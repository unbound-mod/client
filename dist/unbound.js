(()=>{try{let mdls=[...globalThis.modules.values()],find=e=>mdls.find(t=>t?.publicModule.exports?.[e])?.publicModule?.exports;globalThis.ReactNative=find("AppState"),globalThis.React=find("createElement"),function(reactNative,react){function asyncGeneratorStep$a(e,t,n,r,a,o,i){try{var l=e[o](i),s=l.value}catch(e){n(e);return}l.done?t(s):Promise.resolve(s).then(r,a)}function _async_to_generator$a(e){return function(){var t=this,n=arguments;return new Promise(function(r,a){var o=e.apply(t,n);function i(e){asyncGeneratorStep$a(o,r,a,i,l,"next",e)}function l(e){asyncGeneratorStep$a(o,r,a,i,l,"throw",e)}i(void 0)})}}function init(){return _init.apply(this,arguments)}function _init(){return(_init=_async_to_generator$a(function*(){var e=yield Promise.resolve().then(function(){return core$1});yield e.initialize()})).apply(this,arguments)}function log(...e){return console.log("\xbb",...e)}function error(...e){return console.error("\xbb",...e)}function success(...e){return console.log("\xbb",...e)}function warn(...e){return console.warn("\xbb",...e)}function debug$1(...e){return console.debug("\xbb",...e)}function info(...e){return console.info("\xbb",...e)}function createLogger(...e){var t=e.join(" â†’ ")+":";return{log:(...e)=>log(t,...e),error:(...e)=>error(t,...e),success:(...e)=>success(t,...e),warn:(...e)=>warn(t,...e),debug:(...e)=>debug$1(t,...e),info:(...e)=>info(t,...e)}}init();var ws$1,ws,CLIENT_NAME="Unbound",CACHE_KEY=Symbol.for("metro.cache"),CACHE_VERSION=1,ManagerKind=function(e){return e[e.PLUGINS=0]="PLUGINS",e[e.THEMES=1]="THEMES",e[e.ICONS=2]="ICONS",e[e.FONTS=3]="FONTS",e[e.SOURCES=4]="SOURCES",e}({}),ManagerType=function(e){return e[e.BASE=0]="BASE",e[e.ADDON=1]="ADDON",e}({}),ManagerNames={0:"Plugins",1:"Themes",2:"Icons",4:"Sources"},ManagerEntity={0:"plugin",1:"theme",2:"icon-pack"},DISCORD_INVITE="unboundapp",SocialLinks={GitHub:"https://github.com/unbound-mod",Bundle:"https://raw.githubusercontent.com/unbound-mod/unbound/main/dist/bundle.js",Badges:"https://raw.githubusercontent.com/unbound-mod/badges/main/",OnboardingPlugin:"http://rosies-macbook-air.local:5495/manifest.json"},DispatchTypes=function(e){return e.REGISTER_SETTINGS_ENTRIES="UB_REGISTER_SETTINGS_ENTRIES",e}({}),SettingsKeys={General:"UNBOUND_GENERAL",Plugins:"UNBOUND_PLUGINS",Design:"UNBOUND_DESIGN",Custom:"UNBOUND_CUSTOM"},Times={HOUR:36e5},Regex={SemanticVersioning:/^(0|[1-9]\d*)\.(0|[1-9]\d*)\.(0|[1-9]\d*)(?:-((?:0|[1-9]\d*|\d*[a-zA-Z-][0-9a-zA-Z-]*)(?:\.(?:0|[1-9]\d*|\d*[a-zA-Z-][0-9a-zA-Z-]*))*))?(?:\+([0-9a-zA-Z-]+(?:\.[0-9a-zA-Z-]+)*))?$/i};function createTimeoutSignal(e=5e3){var t=new AbortController;return setTimeout(()=>{t.abort(`Timeout of ${e}ms exceeded.`)},e),t.signal}function findInTree(e,t,n){for(var{ignore:r=[],walkable:a=[],maxProperties:o=100}=n??{},i=[e],l=function(e){try{return t.call(this,e)}catch(e){return!1}};i.length&&o;){var s=i.shift();if(s){if(l(s))return s;if(Array.isArray(s))i.push(...s);else if("object"==typeof s&&null!==s){if(a.length)for(var c of[...Reflect.ownKeys(s),"__proto__"]){var u=s[c];void 0!==u&&a.includes(c)&&!r.includes(c)&&i.push(u)}else for(var d of[...Reflect.ownKeys(s),"__proto__"]){var f=s[d];void 0!==f&&(s&&r.includes(d)||i.push(f))}}o--}}}function findInReactTree(e,t,n={}){return findInTree(e,t,{walkable:["props","children"],...n})}function withoutOpacity(e){var t=reactNative.processColor(e).toString(16);return"#"+t.slice(-6)}var overrides={useMemo:e=>e(),useState:e=>[e,()=>void 0],useReducer:e=>[e,()=>void 0],useEffect:()=>{},useInsertionEffect:()=>{},useDeferredValue:()=>{},useLayoutEffect:()=>{},useRef:()=>({current:null}),useCallback:e=>e,useImperativeHandle:()=>{},useTransition:()=>[!1,()=>void 0],useSyncExternalStore:(e,t)=>t(),useContext:e=>e._currentValue},keys=Object.keys(overrides);function forceRender(e,t){return(...n)=>{var r=React.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentDispatcher.current,a=keys.map(e=>[e,r[e]]);Object.assign(r,overrides);var o={rendered:null,error:null};try{o.rendered=t?e.call(t,n):e(...n)}catch(e){o.error=e}if(Object.assign(r,Object.fromEntries(a)),o.error)throw o.error;return o.rendered}}function mergeStyles(...e){return e.reduce((e,t)=>(t&&Object.assign(e,t),e),{})}function chunkArray(e,t){for(var n=[],r=0;r<e.length;r+=t)n.push(e.slice(r,r+t));return n}function capitalize(e){if("string"!=typeof e)throw TypeError('The first argument for "capitalize" must be of type string');return e.charAt(0).toUpperCase()+e.slice(1)}function workletize(e,t,n={}){var r=e;return r.__initData={code:t},r.__closure=n,r.__workletHash=createWorkletHash(t),r}function createWorkletHash(e){for(var t=e.length,n=5381,r=52711;t--;){var a=e.charCodeAt(t);n=33*n^a,r=33*r^a}return(n>>>0)*4096+(r>>>0)}function unitToHex(e){var t=Math.round(255*e).toString(16);return t.length<2?"0"+t:t}function debounce(e,t){var n;return function(...r){clearTimeout(n),n=setTimeout(()=>e.apply(this,r),t)}}function asyncGeneratorStep$9(e,t,n,r,a,o,i){try{var l=e[o](i),s=l.value}catch(e){n(e);return}l.done?t(s):Promise.resolve(s).then(r,a)}function _async_to_generator$9(e){return function(){var t=this,n=arguments;return new Promise(function(r,a){var o=e.apply(t,n);function i(e){asyncGeneratorStep$9(o,r,a,i,l,"next",e)}function l(e){asyncGeneratorStep$9(o,r,a,i,l,"throw",e)}i(void 0)})}}var BundleInfo=reactNative.NativeModules.InfoDictionaryManager??reactNative.NativeModules.RTNClientInfoManager,BundleManager=getNativeModule("BundleUpdaterManager"),DeviceInfo=getNativeModule("DCDDeviceManager");function reload$1(){return _reload.apply(this,arguments)}function _reload(){return(_reload=_async_to_generator$9(function*(e=!0){if(e){BundleManager.reload();return}var{data:t}=yield Promise.resolve().then(function(){return storage$1});t.isPendingReload=!0})).apply(this,arguments)}function getNativeModule(...e){return[...e.map(e=>reactNative.NativeModules[e]),...e.map(e=>reactNative.TurboModuleRegistry.get(e))].find(e=>e)}var native=Object.freeze({__proto__:null,BundleInfo:BundleInfo,BundleManager:BundleManager,DeviceInfo:DeviceInfo,getNativeModule:getNativeModule,reload:reload$1}),FileManager=getNativeModule("DCDFileManager","RTNFileManager"),Documents=FileManager.DocumentsDirPath;function read(e,t="utf8",n=!0){return FileManager.readFile(n?`${Documents}/${e}`:e,t)}function write(e,t,n="utf8"){return FileManager.writeFile("documents",e,t,n)}function rm(e){return FileManager.removeFile("documents",e)}function exists(e,t=!0){return FileManager.fileExists(t?`${Documents}/${e}`:e)}var fs={Documents,read,write,rm,exists},fs$1=Object.freeze({__proto__:null,Documents:Documents,default:fs,exists:exists,read:read,rm:rm,write:write});function asyncGeneratorStep$8(e,t,n,r,a,o,i){try{var l=e[o](i),s=l.value}catch(e){n(e);return}l.done?t(s):Promise.resolve(s).then(r,a)}function _async_to_generator$8(e){return function(){var t=this,n=arguments;return new Promise(function(r,a){var o=e.apply(t,n);function i(e){asyncGeneratorStep$8(o,r,a,i,l,"next",e)}function l(e){asyncGeneratorStep$8(o,r,a,i,l,"throw",e)}i(void 0)})}}function download(e,t){return _download.apply(this,arguments)}function _download(){return(_download=_async_to_generator$8(function*(e,t,n="utf8",r){var a=yield fetch(e,{cache:"no-cache",signal:r}),o=yield a.text();return yield fs.write(t,o,n)})).apply(this,arguments)}function attempt(e){try{return e()}catch(e){return e}}function isEmpty(e){for(var t in e)return!1;return!0}var DEFAULT_ANIMATION={type:"easeInEaseOut",property:"opacity"};function animate(e,t){return t??={duration:500},t.duration??=500,t.create||t.delete||t.update||(t.create=DEFAULT_ANIMATION,t.update=DEFAULT_ANIMATION,t.delete=DEFAULT_ANIMATION),(...n)=>(reactNative.LayoutAnimation.configureNext(t),e(...n))}var Collator=new Intl.Collator([],{numeric:!0});function isGreater(e,t){return 1===Collator.compare(e,t)}function isLess(e,t){return -1===Collator.compare(e,t)}function compare(e,t){return Collator.compare(e,t)}var semver={isGreater,isLess,compare};function noop(...e){}function uuid(e=30){var t="";do{var n=16*Math.random()|0;t+=(12==t.length?4:16==t.length?3&n|8:n).toString(16)}while(t.length<e);return t}function _check_private_redeclaration(e,t){if(t.has(e))throw TypeError("Cannot initialize the same private elements twice on an object")}function _class_apply_descriptor_get(e,t){return t.get?t.get.call(e):t.value}function _class_call_check$6(e,t){if(!(e instanceof t))throw TypeError("Cannot call a class as a function")}function _class_extract_field_descriptor(e,t,n){if(!t.has(e))throw TypeError("attempted to "+n+" private field on non-instance");return t.get(e)}function _class_private_field_get(e,t){var n=_class_extract_field_descriptor(e,t,"get");return _class_apply_descriptor_get(e,n)}function _class_private_field_init(e,t,n){_check_private_redeclaration(e,t),t.set(e,n)}function _defineProperties$6(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function _create_class$6(e,t,n){return _defineProperties$6(e.prototype,t),e}var _listeners=new WeakMap,EventEmitter=function(){function e(){_class_call_check$6(this,e),_class_private_field_init(this,_listeners,{writable:!0,value:{}})}return _create_class$6(e,[{key:"emit",value:function(e,t=null){if(_class_private_field_get(this,_listeners)[e])for(var n of _class_private_field_get(this,_listeners)[e])try{n(t)}catch(t){console.error(`Failed to fire event listener for ${e}:`,t.message)}}},{key:"on",value:function(e,t){this.addListener(e,t)}},{key:"off",value:function(e,t){this.removeListener(e,t)}},{key:"addListener",value:function(e,t){_class_private_field_get(this,_listeners)[e]??=new Set,_class_private_field_get(this,_listeners)[e].add(t)}},{key:"removeListener",value:function(e,t){_class_private_field_get(this,_listeners)[e]&&(_class_private_field_get(this,_listeners)[e].delete(t),_class_private_field_get(this,_listeners)[e].size||delete _class_private_field_get(this,_listeners)[e])}}]),e}(),Logger$e=createLogger("API","Patcher"),PatchType=function(e){return e.Before="before",e.Instead="instead",e.After="after",e}({}),patches=[];function before(e,t,n,r,a=!1){return patch(e,t,n,r,"before",a)}function instead(e,t,n,r,a=!1){return patch(e,t,n,r,"instead",a)}function after(e,t,n,r,a=!1){return patch(e,t,n,r,"after",a)}function createPatcher(e){return{getPatchesByCaller,unpatchAll:()=>unpatchAll(e),before:(t,n,r,a=!1)=>before(e,t,n,r,a),after:(t,n,r,a=!1)=>after(e,t,n,r,a),instead:(t,n,r,a=!1)=>instead(e,t,n,r,a)}}function getPatchesByCaller(e){if(!e)return[];var t=[];for(var n of patches)for(var r of[...n.patches.before,...n.patches.instead,...n.patches.after])e&&r.caller!==e||t.push(r);return t}function unpatchAll(e){var t=getPatchesByCaller(e);if(t.length)for(var n of t)n.unpatch()}function override(e){return function(){if(!e?.patches?.before.length&&!e?.patches?.after.length&&!e?.patches?.instead.length&&!patches.find(t=>t.mdl===e.mdl&&t.func===e.func))return e.unpatch(),new.target?new e.original(...arguments):e.original.apply(this,arguments);for(var t,n=arguments,r=[...e.patches.before],a=0;a<r.length;a++){var o=r[a];if(o)try{var i=o.callback(this,n,e.original.bind(this),e.unpatch);Array.isArray(i)&&(n=i),o.once&&o.unpatch()}catch(t){Logger$e.error(`Could not fire before patch for ${e.func} of ${o.caller}`,t)}}var l=[...e.patches.instead];if(l.length)for(var s=0;s<l.length;s++){var c=l[s];if(c)try{var u=c.callback(this,n,e.original.bind(this),e.unpatch);void 0!==u&&(t=u),c.once&&c.unpatch()}catch(t){Logger$e.error(`Could not fire instead patch for ${e.func} of ${c.caller}`,t)}}else t=new.target?new e.original(...n):e.original.apply(this,n);for(var d=[...e.patches.after],f=0;f<d.length;f++){var p=d[f];if(p)try{var m=p.callback(this,n,t,e.unpatch);void 0!==m&&(t=m),p.once&&p.unpatch()}catch(t){Logger$e.error(`Could not fire after patch for ${e.func} of ${p.caller}`,t)}}return t}}function push(e,t){var n={mdl:e,func:t,original:e[t],unpatch:()=>{n.mdl[n.func]=n.original,n.patches={before:[],after:[],instead:[]}},patches:{before:[],after:[],instead:[]}},r=override(n);e[t]=r;var a=Object.getOwnPropertyDescriptors(n.original);return delete a.length,Object.defineProperties(e[t],{...a,toString:{value:()=>n.original.toString(),configurable:!0,enumerable:!1},__ORIGINAL__:{value:n.original,configurable:!0,enumerable:!1}}),patches.push(n),n}function get$1(e,t){return patches.find(n=>n.mdl===e&&n.func===t)||push(e,t)}function patch(e,t,n,r,a="after",o=!1){if(e&&"string"==typeof e){if(t&&["function","object"].includes(typeof t)){if(n&&"string"==typeof n){if(r&&"function"==typeof r){if(!a||"string"!=typeof a||!["after","before","instead"].includes(a))throw TypeError('fifth argument "type" must be of type string and any of the three: after, before, instead')}else throw TypeError('fourth argument "callback" must be of type function')}else throw TypeError('third argument "func" must be of type string')}else throw TypeError('second argument "mdl" must be of type function or object')}else throw TypeError('first argument "caller" must be of type string');var i=get$1(t,n),l={caller:e,once:o,type:a,id:i.patches?.[a]?.length??0,callback:r,unpatch:()=>{var e=i.patches?.[a].findIndex(e=>e.id===l.id);if(~e&&i.patches?.[a].splice(e,1),!(i.patches?.before.length||i.patches?.after.length||i.patches?.instead.length)){var r=patches.findIndex(e=>e.mdl==t&&e.func==n);r&&(patches[r]?.unpatch(),patches.splice(r,1))}}};return i.patches[a]??=[],i.patches[a].push(l),l.unpatch}var Patcher$a={createPatcher,before,instead,after,unpatchAll,patches},patcher=Object.freeze({__proto__:null,PatchType:PatchType,after:after,before:before,createPatcher:createPatcher,default:Patcher$a,getPatchesByCaller:getPatchesByCaller,instead:instead,patches:patches,unpatchAll:unpatchAll}),Events$1=new EventEmitter,settings$3=globalThis.UNBOUND_SETTINGS??{},data$d={isPendingReload:!1},on$1=Events$1.on.bind(Events$1),off$1=Events$1.off.bind(Events$1);function get(e,t,n){var r=t.split("."),a={result:settings$3[e]};for(var o of r){if(void 0===a.result||void 0===a.result[o]){a.result=n;break}a.result=a.result[o]}return a.result}function set(e,t,n){for(var r=t.split("."),a={current:settings$3[e]??={},changed:!1},o=0;r.length>o;o++)a.current[r[o]]??={},r.length-1===o?a.current[r[o]]=n:a.current=a.current[r[o]];Events$1.emit("changed",{store:e,key:t,value:n}),Events$1.emit("set",{store:e,key:t,value:n})}function toggle(e,t,n){var r=get(e,t,n);set(e,t,!r),Events$1.emit("toggled",{store:e,key:t,prev:r,value:!r})}function remove(e,t){settings$3[e][t]&&(delete settings$3[e][t],isEmpty(settings$3[e])&&delete settings$3[e],Events$1.emit("changed",{store:e,key:t,value:void 0}),Events$1.emit("removed",{store:e,key:t}))}function clear(e){settings$3[e]&&(delete settings$3[e],Events$1.emit("changed",{store:e,key:null,value:void 0}),Events$1.emit("cleared",{store:e,key:null}))}function getStore(e){return{set:(t,n)=>set(e,t,n),get:(t,n)=>get(e,t,n),toggle:(t,n)=>toggle(e,t,n),remove:t=>remove(e,t),clear:()=>clear(e),useSettingsStore:t=>useSettingsStore(e,t)}}function useSettingsStore(e,t){var[,n]=react.useState({});return react.useEffect(()=>{function r(r){r.store===e&&(!t||t(r))&&n({})}return Events$1.on("changed",r),()=>void Events$1.off("changed",r)},[]),{set:(t,n)=>set(e,t,n),get:(t,n)=>get(e,t,n),toggle:(t,n)=>toggle(e,t,n),remove:t=>remove(e,t)}}Events$1.on("changed",debounce(()=>{var e=JSON.stringify(settings$3,null,2);fs.write("Unbound/settings.json",e).then(()=>data$d.isPendingReload&&BundleManager.reload())},100));var Storage={useSettingsStore,getStore,get,set,remove,on:on$1,off:off$1},storage$1=Object.freeze({__proto__:null,clear:clear,data:data$d,default:Storage,get:get,getStore:getStore,off:off$1,on:on$1,remove:remove,set:set,settings:settings$3,toggle:toggle,useSettingsStore:useSettingsStore});function _assert_this_initialized$5(e){if(void 0===e)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function _call_super$5(e,t,n){return t=_get_prototype_of$5(t),_possible_constructor_return$5(e,_is_native_reflect_construct$5()?Reflect.construct(t,[],_get_prototype_of$5(e).constructor):t.apply(e,n))}function _class_call_check$5(e,t){if(!(e instanceof t))throw TypeError("Cannot call a class as a function")}function _defineProperties$5(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function _create_class$5(e,t,n){return _defineProperties$5(e.prototype,t),e}function _define_property$4(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function _get_prototype_of$5(e){return(_get_prototype_of$5=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function _inherits$5(e,t){if("function"!=typeof t&&null!==t)throw TypeError("Super expression must either be null or a function");e.prototype=Object.create(t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),_set_prototype_of$5(e,t)}function _possible_constructor_return$5(e,t){return t&&("object"===_type_of$5(t)||"function"==typeof t)?t:_assert_this_initialized$5(e)}function _set_prototype_of$5(e,t){return(_set_prototype_of$5=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function _type_of$5(e){return e&&"undefined"!=typeof Symbol&&e.constructor===Symbol?"symbol":typeof e}function _is_native_reflect_construct$5(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(_is_native_reflect_construct$5=function(){return!!e})()}var Manager=function(e){function t(e){var n;return _class_call_check$5(this,t),n=_call_super$5(this,t),_define_property$4(n,"type",ManagerType.BASE),_define_property$4(n,"initialized",!1),_define_property$4(n,"name",void 0),_define_property$4(n,"entities",new Map),_define_property$4(n,"errors",new Map),_define_property$4(n,"logger",void 0),_define_property$4(n,"patcher",void 0),_define_property$4(n,"settings",void 0),n.name=ManagerNames[e],n.logger=createLogger("Managers",n.name),n.patcher=createPatcher(`unbound::managers::${n.name.toLowerCase()}`),n.settings=getStore(n.name.toLowerCase()),n}return _inherits$5(t,e),_create_class$5(t,[{key:"load",value:function(...e){throw Error("Not implemented.")}},{key:"unload",value:function(...e){throw Error("Not implemented.")}},{key:"getEntities",value:function(){return[...this.entities.values()]}}]),t}(EventEmitter);function _assert_this_initialized$4(e){if(void 0===e)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function asyncGeneratorStep$7(e,t,n,r,a,o,i){try{var l=e[o](i),s=l.value}catch(e){n(e);return}l.done?t(s):Promise.resolve(s).then(r,a)}function _async_to_generator$7(e){return function(){var t=this,n=arguments;return new Promise(function(r,a){var o=e.apply(t,n);function i(e){asyncGeneratorStep$7(o,r,a,i,l,"next",e)}function l(e){asyncGeneratorStep$7(o,r,a,i,l,"throw",e)}i(void 0)})}}function _call_super$4(e,t,n){return t=_get_prototype_of$4(t),_possible_constructor_return$4(e,_is_native_reflect_construct$4()?Reflect.construct(t,n,_get_prototype_of$4(e).constructor):t.apply(e,n))}function _class_call_check$4(e,t){if(!(e instanceof t))throw TypeError("Cannot call a class as a function")}function _defineProperties$4(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function _create_class$4(e,t,n){return _defineProperties$4(e.prototype,t),e}function _define_property$3(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function _get_prototype_of$4(e){return(_get_prototype_of$4=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function _inherits$4(e,t){if("function"!=typeof t&&null!==t)throw TypeError("Super expression must either be null or a function");e.prototype=Object.create(t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),_set_prototype_of$4(e,t)}function _possible_constructor_return$4(e,t){return t&&("object"===_type_of$4(t)||"function"==typeof t)?t:_assert_this_initialized$4(e)}function _set_prototype_of$4(e,t){return(_set_prototype_of$4=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function _type_of$4(e){return e&&"undefined"!=typeof Symbol&&e.constructor===Symbol?"symbol":typeof e}function _is_native_reflect_construct$4(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(_is_native_reflect_construct$4=function(){return!!e})()}var Addons=function(e){function t(e){var n;return _class_call_check$4(this,t),n=_call_super$4(this,t,[e]),_define_property$3(n,"type",ManagerType.ADDON),_define_property$3(n,"extension",void 0),_define_property$3(n,"kind",void 0),_define_property$3(n,"path",void 0),n.kind=e,n.path=`Unbound/${n.name}`,n}return _inherits$4(t,e),_create_class$4(t,[{key:"initialize",value:function(){throw Error("Not implemented.")}},{key:"shutdown",value:function(){for(var e of this.entities.values())try{this.unload(e)}catch(t){this.logger.error(`Failed to stop ${e.id}. Skipping.`,t.message??t);continue}this.initialized=!1}},{key:"load",value:function(e,t){var n={failed:!1,instance:null};try{this.validateManifest(t);var r=this.handleBundle(e);if(!r)throw Error("Bundle didn't return an instance.");n.instance=r,(this.errors.has(t.id)||this.errors.has(t.path))&&(this.errors.delete(t.id),this.errors.delete(t.path))}catch(e){n.failed=!0,this.logger.error(`Failed to execute ${t.id}:`,e.message),this.errors.set(t.id??t.path,e)}var a={data:t,instance:n.instance,id:t.id,failed:n.failed,started:!1};return this.entities.set(t.id,a),this.isEnabled(a.id)&&this.start(a),this.emit("loaded",a),a}},{key:"unload",value:function(e){var t=this.resolve(e);if(t)try{t.started&&this.stop(t),this.entities.delete(t.id),this.errors.has(t.id)&&this.errors.delete(t.id),this.emit("unloaded",t)}catch(e){this.logger.error(`FATAL: ${t.id} was not able to unload properly, a full app restart is recommended.`,e)}}},{key:"install",value:function(e){var t=this;return _async_to_generator$7(function*(){try{var n=yield fetch(e,{cache:"no-cache",signal:createTimeoutSignal()}).catch(e=>(t.logger.error("Failed to fetch manifest URL:",e.message),t.emit("install-error",e),null));if(!n)return!1;if(!n.ok)throw Error(`Failed to fetch manifest URL (${n.status}: ${n.statusText??"No status text."})`);var r=yield n.json();try{t.logger.debug("Validating manifest..."),t.validateManifest(r),r.url=e}catch(e){return t.logger.error("Failed to validate manifest:",e.message),t.emit("install-error",e),!1}if(r.type!==ManagerEntity[t.kind])throw Error(`You can only install addons of type ${ManagerEntity[t.kind]}.`);var a=e.split("/");a.pop();var o=new URL(r.main,a.join("/")),i=yield fetch(o,{cache:"no-cache",signal:createTimeoutSignal()}).catch(e=>(t.logger.error("Failed to fetch bundle URL:",e.message),t.emit("install-error",e),null));if(!i)return!1;if(!i.ok)throw Error(`Failed to fetch bundle URL (${i.status}: ${i.statusText??"No status text."})`);var l=yield i.text();if(!l)throw Error("Addon bundle was empty.");fs.write(`${t.path}/${r.id}/bundle.${t.extension}`,l),fs.write(`${t.path}/${r.id}/manifest.json`,JSON.stringify(r,null,2));var s=t.handleBundle(l);t.entities.has(r.id)&&(t.logger.debug(`Unloading existing instance of ${r.id}`),t.unload(r.id));var c=t.load(s,r);return t.emit("installed",c),!0}catch(e){return t.logger.error("Failed to install addon:",e.message),t.emit("install-error",e),!1}})()}},{key:"delete",value:function(e){var t=this;return _async_to_generator$7(function*(){var n=t.resolve(e);if(n)try{t.unload(n),yield fs.rm(`${t.path}/${n.data.id}`),t.emit("deleted",n)}catch(e){t.logger.error(`Failed to delete ${n.data.id}:`,e.message??e)}})()}},{key:"start",value:function(e){var t=this.resolve(e);if(t)try{t.instance.start?.(),t.started=!0,this.emit("started",t)}catch(e){this.logger.error(`Failed to start ${t.data.id}:`,e.message??e),t.started=!1}}},{key:"stop",value:function(e){var t=this.resolve(e);if(t)try{t.instance.stop?.(),t.started=!1,this.emit("stopped",t)}catch(e){this.logger.error(`Failed to stop ${t.data.id}:`,e.message??e),t.started=!0}}},{key:"toggle",value:function(e){var t=this.resolve(e);if(t){var n=this.isEnabled(t.id);n?this.disable(t):this.enable(t),this.emit("toggled",t)}}},{key:"enable",value:function(e){var t=this.resolve(e);if(t)try{var n=this.getStates();t.started||this.start(t),n[t.id]=!0,this.settings.set("states",n),this.emit("enabled",t)}catch(e){this.logger.error(`Failed to enable ${t.data.id}:`,e.message??e)}}},{key:"disable",value:function(e){var t=this.resolve(e);if(t)try{var n=this.getStates();t.started&&this.stop(t),n[t.id]=!1,this.settings.set("states",n),this.emit("disabled",t)}catch(e){this.logger.error(`Failed to disable ${t.data.id}:`,e.message??e)}}},{key:"handleBundle",value:function(e){return e}},{key:"validateManifest",value:function(e){if(e.name&&"string"==typeof e.name){if(e.description&&"string"==typeof e.description){if(e.authors&&("object"==typeof e.name||Array.isArray(e.authors))){if(e.version&&"string"==typeof e.version&&Regex.SemanticVersioning.test(e.version)){if(!e.id||"string"!=typeof e.id)throw Error('Manifest property "id" must be of type string and match a "eternal.unbound" pattern.')}else throw Error('Manifest property "version" must be of type string and match the semantic versioning pattern.')}else throw Error('Manifest property "authors" must be of type array.')}else throw Error('Manifest property "description" must be of type string.')}else throw Error('Manifest property "name" must be of type string.')}},{key:"getStates",value:function(){return this.settings.get("states",{})}},{key:"isEnabled",value:function(e){return!!this.getStates()[e]}},{key:"resolve",value:function(e){if(e.data)return e;var t=this.entities.get(e);if(t)return t;var n=[...this.entities.values()].find(t=>t.data.name===e);if(n)return n}}]),t}(Manager);function _assert_this_initialized$3(e){if(void 0===e)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function _call_super$3(e,t,n){return t=_get_prototype_of$3(t),_possible_constructor_return$3(e,_is_native_reflect_construct$3()?Reflect.construct(t,n,_get_prototype_of$3(e).constructor):t.apply(e,n))}function _class_call_check$3(e,t){if(!(e instanceof t))throw TypeError("Cannot call a class as a function")}function _defineProperties$3(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function _create_class$3(e,t,n){return _defineProperties$3(e.prototype,t),e}function _define_property$2(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function _get_prototype_of$3(e){return(_get_prototype_of$3=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function _inherits$3(e,t){if("function"!=typeof t&&null!==t)throw TypeError("Super expression must either be null or a function");e.prototype=Object.create(t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),_set_prototype_of$3(e,t)}function _possible_constructor_return$3(e,t){return t&&("object"===_type_of$3(t)||"function"==typeof t)?t:_assert_this_initialized$3(e)}function _set_prototype_of$3(e,t){return(_set_prototype_of$3=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function _type_of$3(e){return e&&"undefined"!=typeof Symbol&&e.constructor===Symbol?"symbol":typeof e}function _is_native_reflect_construct$3(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(_is_native_reflect_construct$3=function(){return!!e})()}var Plugins$1=function(Addons1){function Plugins1(){var e;return _class_call_check$3(this,Plugins1),e=_call_super$3(this,Plugins1,[ManagerKind.PLUGINS]),_define_property$2(e,"extension","js"),e}return _inherits$3(Plugins1,Addons1),_create_class$3(Plugins1,[{key:"initialize",value:function(){for(var e of window.UNBOUND_PLUGINS??[]){var{manifest:t,bundle:n}=e;this.load(n,t)}this.initialized=!0}},{key:"handleBundle",value:function handleBundle(bundle){if(Storage.get("unbound","recovery",!1))return{start:()=>{},stop:()=>{}};var iife=eval(`() => { return ${bundle} }`),payload=iife(),res="function"==typeof payload?payload():payload;return res.default??res}}]),Plugins1}(Addons),plugins=new Plugins$1,ModuleFlags=function(e){return e[e.BLACKLISTED=1]="BLACKLISTED",e}({}),moduleIds=[...window.modules.keys()],CurrentCacheInfo={cacheVersion:CACHE_VERSION,buildNumber:BundleInfo.Build,moduleCount:moduleIds.length},storage=getStore("unbound::cache"),state$1={info:storage.get("info",CurrentCacheInfo),modules:storage.get("modules",{}),moduleFlags:storage.get("moduleFlags",{}),assets:storage.get("assets",[])};function invalidateCache(){state$1.info=CurrentCacheInfo,state$1.modules={},state$1.moduleFlags={},state$1.assets=[],save()}function getCachedAssets(){return state$1.assets}function addAssetToCache(e){state$1.assets.push(e),save()}function removeAssetFromCache(e){var t=state$1.assets.indexOf(e);~t&&state$1.assets.splice(t,1),save()}function getModuleCacheForKey(e){return state$1.modules[e]}function addCachedIDForKey(e,t){if(state$1.modules[e]??=[],state$1.modules[e].includes(t))return!0;state$1.modules[e].push(t),save()}function removeCachedIDForKey(e,t){var n=state$1.modules[e];if(!n)return!0;var r=n.indexOf(t);return~r&&n.splice(r,1),n.length||delete state$1.modules[e],save(),!0}function addModuleFlag(e,t){state$1.moduleFlags[e]|=t,save()}function removeModuleFlag(e,t){if(!state$1.moduleFlags[e])return!0;state$1.moduleFlags[e]&=~t,save()}function hasModuleFlag(e,t){return!!state$1.moduleFlags[e]&&!!(state$1.moduleFlags[e]&t)}function isValidCache(){return BundleInfo.Build===state$1.info.buildNumber&&moduleIds.length===state$1.info.moduleCount&&CACHE_VERSION===state$1.info.cacheVersion}function save(){storage.set("info",state$1.info),storage.set("modules",state$1.modules),storage.set("moduleFlags",state$1.moduleFlags),storage.set("assets",state$1.assets)}isValidCache()||invalidateCache();var Cache={moduleIds,getCachedAssets,addAssetToCache,getModuleCacheForKey,addCachedIDForKey,addModuleFlag,hasModuleFlag};function byProps(...e){var t=t=>{if(1===e.length)return void 0!==t[e[0]];for(var n=0,r=e.length;n<r;n++)if(void 0===t[e[n]])return!1;return!0};return t[CACHE_KEY]=`byProps::${e.sort().join("::")}`,t}function byPrototypes(...e){var t=t=>{if(!t.prototype)return!1;for(var n=0,r=e.length;n<r;n++)if(void 0===t.prototype[e[n]])return!1;return!0};return t[CACHE_KEY]=`byPrototypes::${e.sort().join("::")}`,t}function byDisplayName(e){var t=t=>t.displayName===e;return t[CACHE_KEY]=`byDisplayName::${e}`,t}function byName(e){var t=t=>t.name===e;return t[CACHE_KEY]=`byName::${e}`,t}function byStore(e,t=!0){var n=t?e+"Store":e,r=e=>e._dispatcher&&e.getName?.()===n;return r[CACHE_KEY]=`byStore::${n}`,r}for(var Filters={byProps,byDisplayName,byPrototypes,byName,byStore},filters=Object.freeze({__proto__:null,byDisplayName:byDisplayName,byName:byName,byProps:byProps,byPrototypes:byPrototypes,byStore:byStore,default:Filters}),_loop=function(e,t){var n=Cache.moduleIds[e],r=window.modules.get(n);if(Cache.hasModuleFlag(n,ModuleFlags.BLACKLISTED))return blacklist.push(n),"continue";if(r.factory){var a=r.factory;r.factory=function(...e){var[,,,,t]=e;a.apply(self,e);var n=t.exports;if(isInvalidExport(n))Cache.addModuleFlag(t.id,ModuleFlags.BLACKLISTED),blacklist.push(t.id);else if(!data$c.patchedNativeRequire&&n.default?.name==="requireNativeComponent"){var r=n.default;n.default=function(...e){try{return r.apply(this,e)}catch(t){return e[0]}},data$c.patchedNativeRequire=!0}}}},blacklist=[],data$c={cache:new Map,patchedNativeRequire:!1,patchedRTNProfiler:!1,origToString:Function.prototype.toString,listeners:new Set},Logger$d=createLogger("Metro"),i=0,len=Cache.moduleIds.length;i<len;i++)_loop(i);function addListener(e){return data$c.listeners.add(e),()=>data$c.listeners.delete(e)}function removeListener(e){data$c.listeners.delete(e)}var on=addListener,off=removeListener;function findLazy(e,t){var n=find$1(e,t);return void 0!==n?n:new Promise(n=>{function r(r,o){e(r,o)&&(n(r),a()),r.default&&e(r.default,o)&&(n(t.interop??!0?r.default:r),a())}var a=addListener(r)})}function find$1(e,t={}){if(!e)throw Error("You must provide a filter to search by.");var{all:n=!1,interop:r=!0,cache:a=!0,initial:o=null,esModules:i=!0,raw:l=!1}=t,s={found:o??[],errored:!1},c=(t,n)=>{try{return e(t,n)}catch(e){if(s.errored)return;s.errored=!0,Logger$d.error("Search filter threw an error, degrading performance.","This will create a bad experience for the user including lag spikes, a slow startup, etc.","Please fix this as soon as possible.","\n",e.stack)}};e[CACHE_KEY]&&(c[CACHE_KEY]=e[CACHE_KEY]);var u=Cache.getModuleCacheForKey(e[CACHE_KEY]);if(u){for(var d of u){var f=window.modules.get(d);if(!(!f||blacklist.includes(d))&&(f.isInitialized||initializeModule(d))){var p=searchExports(c,f,d,i,r,l);if(p){if(!n)return p;s.found.push(p)}}}return n?s.found:null}for(var m=a?data$c.cache:window.modules,g=a?[...m.keys()]:Cache.moduleIds,h=0,_=g.length;h<_;h++){var N=g[h],E=m.get(N);if(E.isInitialized||initializeModule(N)){var O=searchExports(c,E,N,i,r,l);if(O){if(!n)return O;s.found.push(O)}}}return!a||n||s.found.length?a&&n?find$1(e,Object.assign(t,{cache:!1,initial:s.found})):n?s.found:null:find$1(e,Object.assign(t,{cache:!1}))}function bulk(...e){var t=Array(e.length),n=e.some(e=>e.all);return find$1((r,a)=>{for(var o=0,i=e.length;o<i;o++){var l=e[o];if(l.filter){if(l.filter(r,a)){if(l.all){t[o]??=[],t[o].push(r);continue}t[o]=r;continue}if(r.default&&l.filter(r.default,a)){var s=l.interop??!0?r.default:r;if(l.all){t[o]??=[],t[o].push(s);continue}t[o]=s}}}return!n&&t.filter(Boolean).length===e.length},{interop:!1}),t}function findByProps(...e){var[t,n]=parseOptions(e);return searchWithOptions(t,n,"byProps")}function findByPrototypes(...e){var[t,n]=parseOptions(e);return searchWithOptions(t,n,"byPrototypes")}function findStore(...e){var[[t],{short:n=!0,...r}]=parseOptions(e);return searchWithOptions([t,n],r,"byStore")}function findByName(...e){var[t,n]=parseOptions(e);return searchWithOptions(t,n,"byName")}function initializeModule(e){try{return __r(e),Object.defineProperty(Function.prototype,"toString",{value:data$c.origToString,configurable:!0,writable:!0}),!0}catch(t){return Cache.addModuleFlag(e,ModuleFlags.BLACKLISTED),blacklist.push(e),!1}}function searchExports(e,t,n,r=!0,a=!0,o=!1){var i=t.publicModule.exports;return i?isInvalidExport(i)?(Cache.addModuleFlag(n,ModuleFlags.BLACKLISTED),blacklist.push(n),null):e(i,n)?(e[CACHE_KEY]&&Cache.addCachedIDForKey(e[CACHE_KEY],n),data$c.cache[n]=t,o?t:i):r&&i.default&&e(i.default,n)?(e[CACHE_KEY]&&Cache.addCachedIDForKey(e[CACHE_KEY],n),data$c.cache[n]=t,o?t:a?i.default:i):void 0:null}function searchWithOptions(e,t,n){if(t.lazy){var r;return new Proxy({__METRO_LAZY__:!0,get module(){return r}},{get(a,o){if(o&&"string"==typeof o)return(r??=searchWithOptions(e,Object.assign(t,{lazy:!1}),n),"module"===o)?r:r?.[o]},set:(a,o,i)=>(r??=searchWithOptions(e,Object.assign(t,{lazy:!1}),n),Object.defineProperty(r??{},o,{value:i,writable:!0,configurable:!0}))})}if("string"==typeof n&&(n=Filters[n]),n)return t.bulk?bulk(...e.map(e=>!Array.isArray(e)&&"object"==typeof e&&e.params?{filter:n(...e.params??[]),...e}:{filter:n(...e),interop:!0})):find$1(n(...e),t)}function isInvalidExport(e){return!e||e===window||null===e[Symbol()]}function parseOptions(e,t=e=>"object"==typeof e&&!Array.isArray(e),n={}){return[e,t(e[e.length-1])?e.pop():n]}function _assert_this_initialized$2(e){if(void 0===e)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function asyncGeneratorStep$6(e,t,n,r,a,o,i){try{var l=e[o](i),s=l.value}catch(e){n(e);return}l.done?t(s):Promise.resolve(s).then(r,a)}function _async_to_generator$6(e){return function(){var t=this,n=arguments;return new Promise(function(r,a){var o=e.apply(t,n);function i(e){asyncGeneratorStep$6(o,r,a,i,l,"next",e)}function l(e){asyncGeneratorStep$6(o,r,a,i,l,"throw",e)}i(void 0)})}}function _call_super$2(e,t,n){return t=_get_prototype_of$2(t),_possible_constructor_return$2(e,_is_native_reflect_construct$2()?Reflect.construct(t,n,_get_prototype_of$2(e).constructor):t.apply(e,n))}function _class_call_check$2(e,t){if(!(e instanceof t))throw TypeError("Cannot call a class as a function")}function _defineProperties$2(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function _create_class$2(e,t,n){return _defineProperties$2(e.prototype,t),e}function _define_property$1(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function _get(e,t,n){return(_get="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=_super_prop_base(e,t);if(r){var a=Object.getOwnPropertyDescriptor(r,t);return a.get?a.get.call(n||e):a.value}})(e,t,n||e)}function _get_prototype_of$2(e){return(_get_prototype_of$2=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function _inherits$2(e,t){if("function"!=typeof t&&null!==t)throw TypeError("Super expression must either be null or a function");e.prototype=Object.create(t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),_set_prototype_of$2(e,t)}function _possible_constructor_return$2(e,t){return t&&("object"===_type_of$2(t)||"function"==typeof t)?t:_assert_this_initialized$2(e)}function _set_prototype_of$2(e,t){return(_set_prototype_of$2=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function _super_prop_base(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&(e=_get_prototype_of$2(e),null!==e););return e}function _type_of$2(e){return e&&"undefined"!=typeof Symbol&&e.constructor===Symbol?"symbol":typeof e}function _is_native_reflect_construct$2(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(_is_native_reflect_construct$2=function(){return!!e})()}var Themes$1=function(e){function t(){var e;return _class_call_check$2(this,t),e=_call_super$2(this,t,[ManagerKind.THEMES]),_define_property$1(e,"module",void 0),_define_property$1(e,"extension","json"),e}return _inherits$2(t,e),_create_class$2(t,[{key:"initialize",value:function(){for(var e of window.UNBOUND_THEMES??[]){var{manifest:t,bundle:n}=e;this.load(n,t)}if(this.module=findByProps("RawColor","Theme"),!this.module)return this.logger.error("Failed to find theming module. Themes will not function as expected.");for(var r of(this.module._Theme={...this.module.Theme},this.module._RawColor={...this.module.RawColor},this.entities.values()))r.registered||this.registerValues(r);this.patchColors(),this.patchChatBackground(),this.patchThemeStore(),this.initialized=!0}},{key:"load",value:function(e,n){var r=_get(_get_prototype_of$2(t.prototype),"load",this).call(this,e,n);return r&&this.initialized&&this.registerValues(r),r}},{key:"enable",value:function(e){var t=this.resolve(e);if(t)try{var n=this.settings.get("applied",null);n&&this.stop(n),this.settings.set("applied",t.id),t.started||this.start(t),this.emit("enabled",t)}catch(e){this.logger.error(`Failed to enable ${t.data.id}:`,e.message)}}},{key:"disable",value:function(e){var t=this.resolve(e);if(t)try{this.settings.set("applied",null),t.started&&this.stop(t),this.emit("disabled",t)}catch(e){this.logger.error(`Failed to disable ${t.data.id}:`,e.message)}}},{key:"isEnabled",value:function(e){return this.settings.get("applied",null)==e}},{key:"handleBundle",value:function(e){return"object"==typeof e?e:JSON.parse(e)}},{key:"registerValues",value:function(e){var{Theme:t,Shadow:n,SemanticColor:r}=this.module,{data:a,instance:o}=e;for(var i in t[a.id.toUpperCase().replace(".","_")]=a.id,n)n[i][a.id]=o.shadows?.[i]??n[i][o.type??"darker"];for(var l in r)r[l][a.id]=o.shadows?.[l]??r[l][o.type??"darker"];e.registered=!0}},{key:"parseColor",value:function(e){return e?.value?e?.type==="raw"?this.module.RawColor[e.value]:e?.type==="color"?e.value.replace("transparent","rgba(0, 0, 0, 0)"):void 0:e}},{key:"patchColors",value:function(){var e,t=function(t){Object.defineProperty(n,t,{configurable:!0,enumerable:!0,get:()=>{var{_RawColor:n}=e.module,r=e.settings.get("applied",null);if(!r)return n[t];var a=e.entities.get(r);return a?a.instance.raw?.[t]??n[t]:n[t]}})},{RawColor:n}=this.module;for(var r in n)e=this,t(r);var a=findInTree(this.module,e=>e?.resolveSemanticColor);if(!a)return this.logger.error("Failed to find semantic colour resolver. Themes will not function as expected.");this.patcher.instead(a,"resolveSemanticColor",(e,t,n)=>{var[r,a,...o]=t,i=this.entities.get(r);if(!i)return n.apply(e,t);var{instance:l}=i,[s]=Object.getOwnPropertySymbols(a),c=a[s],u=l.semantic?.[c];try{var d=null;if(d=u?this.parseColor(u):n.call(e,l?.type??"darker",a,...o),"CHAT_BACKGROUND"===c&&"number"==typeof l.background?.opacity)return(d??"#000000")+Math.round(255*l.background.opacity).toString(16);return u?.opacity?withoutOpacity(d)+unitToHex(u.opacity):d}catch(e){this.logger.error("Failed to resolve color:",e)}return n.call(this,l?.type??"darker",a)})}},{key:"patchChatBackground",value:function(){var e=this;return _async_to_generator$6(function*(){var t=findByName("MessagesWrapperConnected",{interop:!1});t?e.patcher.after(t,"default",(t,n,r)=>{var a=e.settings.get("applied",null);if(!a)return r;var o=e.entities.get(a);if(!o||!o.instance.background)return r;var{instance:{background:i}}=o;return React.createElement(reactNative.ImageBackground,{blurRadius:"number"==typeof i.blur?i.blur:0,style:{flex:1,height:"100%",width:"100%"},source:{uri:i.url}},r)}):e.logger.error("Failed to find MessagesWrapperConnected. Theme backgrounds may not function as expected.");var{MessagesWrapper:n}=findByProps("MessagesWrapper")??{};n?e.patcher.after(n.prototype,"render",(t,n,r)=>{var a=e.settings.get("applied",null);if(!a)return r;var o=e.entities.get(a);if(!o||!o.instance.background)return r;var i=findInReactTree(r,e=>"HACK_fixModalInteraction"in e.props&&e.props?.style);i&&(i.props.style=[i.props.style,{backgroundColor:"#00000000"}])}):e.logger.error("Failed to find MessagesWrapper. Theme backgrounds may not function as expected.")})()}},{key:"patchThemeStore",value:function(){var e=findStore("Theme");if(!e)return this.logger.error("Failed to find ThemeStore. Themes will not function as expected.");var t=findInTree(e,e=>e?.hasOwnProperty("theme"),{walkable:["__proto__"]});if(!t)return this.logger.error("Failed to patch theme store. Could not find theme getter in store prototype.");var n=Object.getOwnPropertyDescriptor(t,"theme");Object.defineProperty(t,"__theme",n),Object.defineProperty(t,"theme",{get:()=>{var t=this.settings.get("applied",null);return t&&this.initialized?t:e.__theme}}),this.on("enabled",()=>e.emitChange()),this.on("disabled",()=>e.emitChange())}}]),t}(Addons),themes=new Themes$1,managers=Object.freeze({__proto__:null,Plugins:plugins,Themes:themes}),ReactNative=window.ReactNative,React$1=window.React,Reanimated=findByProps("useAnimatedStyle","withSpring",{lazy:!0}),Gestures=findByProps("Gesture","GestureDetector","createNativeWrapper",{lazy:!0}),Clipboard=findByProps("setString","getString","setImage","getImage",{lazy:!0}),MarkdownParser=findByProps("parse","parseToAST","reactParserFor",{lazy:!0}),Screens=findByProps("FullWindowOverlay",{lazy:!0}),Moment=findByProps("isMoment",{lazy:!0}),SVG=findByProps("Svg","Path",{lazy:!0}),Commands=findByProps("getBuiltInCommands",{lazy:!0}),Util=findByProps("inspect",{lazy:!0}),Flux=findByProps("Store","connectStores",{lazy:!0}),Assets$2=findByProps("registerAsset",{lazy:!0}),Clyde=findByProps("createBotMessage",{lazy:!0}),Dispatcher=findByProps("dispatch","subscribe",{lazy:!0}),Constants=findByProps("Fonts","Endpoints",{lazy:!0}),Theme$1=findByProps("colors","internal",{lazy:!0}),REST=findByProps("getAPIBaseURL",{lazy:!0}),i18n$1=findByProps("Messages","_requestedLocale",{lazy:!0}),common=Object.freeze({__proto__:null,Assets:Assets$2,Clipboard:Clipboard,Clyde:Clyde,Commands:Commands,Constants:Constants,Dispatcher:Dispatcher,Flux:Flux,Gestures:Gestures,MarkdownParser:MarkdownParser,Moment:Moment,REST:REST,React:React$1,ReactNative:ReactNative,Reanimated:Reanimated,SVG:SVG,Screens:Screens,Theme:Theme$1,Util:Util,i18n:i18n$1}),assets=new Map,cached=Cache.getCachedAssets();if(cached.length){for(var id of cached)if(initializeModule(id)){var exported=window.modules.get(id).publicModule.exports,asset=Assets$2.getAssetByID(exported);asset&&assets.set(exported,asset)}}else for(var id1 of[...window.modules.keys()])if(initializeModule(id1)){var exported1=window.modules.get(id1).publicModule.exports;if("number"==typeof exported1){var asset1=Assets$2.getAssetByID(exported1);asset1&&(Cache.addAssetToCache(id1),assets.set(exported1,asset1))}}function find(e){return[...assets.values()].find(e)}function getByName(e,t="png"){return[...assets.values()].find(n=>n.name===e&&n.type===t)}function getByID(e){return assets.get(e)}function getIDByName(e,t="png"){var[n]=[...assets.entries()].find(([,n])=>n.name===e&&n.type===t)??[];return n}function getAll(){return[...assets.values()]}var Icons=new Proxy({},{get:(e,t)=>getIDByName(t)}),Assets$1={assets,getByName,getByID,getIDByName},assets$1=Object.freeze({__proto__:null,Icons:Icons,assets:assets,default:Assets$1,find:find,getAll:getAll,getByID:getByID,getByName:getByName,getIDByName:getIDByName}),Discord=findByProps("createStyles","dismissAlerts","ContextMenu",{lazy:!0}),BackdropFilters=findByProps("BackgroundBlurFill",{lazy:!0}),Portal=findByProps("PortalHost","Portal",{lazy:!0}),Media=findByProps("openMediaModal",{lazy:!0}),FlashList=findByProps("FlashList",{lazy:!0}),HelpMessage=findByName("HelpMessage"),Forms=findByProps("FormSliderRow"),components=Object.freeze({__proto__:null,BackdropFilters:BackdropFilters,Discord:Discord,FlashList:FlashList,Forms:Forms,HelpMessage:HelpMessage,Media:Media,Portal:Portal}),useStyles$7=Discord.createStyles({endStyle:{backgroundColor:Theme$1.colors.CARD_PRIMARY_BG??Theme$1.colors.BACKGROUND_PRIMARY,borderBottomLeftRadius:16,borderBottomRightRadius:16},formText:{fontFamily:Constants.Fonts.PRIMARY_NORMAL,color:Theme$1.colors.TEXT_MUTED,fontSize:14},formHint:{fontFamily:Constants.Fonts.PRIMARY_NORMAL,color:Theme$1.colors.TEXT_MUTED,fontSize:12,marginTop:10,marginHorizontal:16},iconTint:{tintColor:Theme$1.colors.INTERACTIVE_NORMAL},sectionWrapper:{marginHorizontal:16}}),useFormStyles=useStyles$7,TintedIcon=({source:e,size:t=24,style:n,defaultSource:r=Icons.MoreHorizontalIcon})=>{var a=useStyles$7({size:t});return React.createElement(reactNative.Image,{defaultSource:r,source:e,style:[a.iconTint,{width:t,height:t},n]})},Switch=find$1(e=>e.FormSwitch&&!e.FormTitle,{lazy:!0}),Checkbox=find$1(e=>e.FormCheckbox&&!e.FormTitle,{lazy:!0}),Section=({children:e,style:t,margin:n=!0,...r})=>{var a=useStyles$7();return React.createElement(reactNative.ScrollView,{scrollEnabled:!1},React.createElement(reactNative.View,{style:[t,a.sectionWrapper,{...n?{marginTop:16}:{}}]},React.createElement(Discord.TableRowGroup,r,e)))},useStyles$6=Discord.createStyles({block:{fontFamily:Constants.Fonts.CODE_SEMIBOLD,fontSize:12,backgroundColor:Theme$1.colors.BACKGROUND_SECONDARY_ALT,color:Theme$1.colors.TEXT_NORMAL,padding:10}});function IosBlock({children:e,style:t,...n}){var r=useStyles$6();return React.createElement(reactNative.TextInput,{value:e,style:[r.block,t],editable:!1,multiline:!0,...n})}function AndroidBlock({selectable:e,children:t,style:n,...r}){var a=useStyles$6();return React.createElement(reactNative.Text,{style:[a.block,n],selectable:e,...r},t)}function CodeBlock({selectable:e,...t}){return e?reactNative.Platform.select({ios:React.createElement(IosBlock,t),default:React.createElement(AndroidBlock,{selectable:e,...t})}):React.createElement(AndroidBlock,{selectable:e,...t})}function Overflow(e){var{items:t,title:n,iconSource:r=Icons.MoreHorizontalIcon,scale:a=1,style:o={}}=e;return React.createElement(Discord.ContextMenu,{items:t,title:n},(e,t,n,i,l)=>React.createElement(reactNative.TouchableOpacity,{...e,onPress:t,accessibilityState:n,accessibilityActions:i,onAccessibilityAction:l},React.createElement(TintedIcon,{source:r,style:{transform:[{scale:a}],marginLeft:8,marginRight:10,...o}})))}var UNBOUND_ADDONS="Addons",UNBOUND_ADDONS_EMPTY="Could not find any {type}.\nMaybe try installing some?",UNBOUND_ADDON_FAILED="Failed to load addon: {error}",UNBOUND_ADDON_FROM_SOURCE="{name} is from {source}",UNBOUND_ADDON_INSTALLED_AMOUNT="{amount} installed",UNBOUND_ADDON_NO_CHANGELOG="{name} has no changelog.",UNBOUND_ADDON_NO_DESCRIPTION="No description provided.",UNBOUND_ADDON_NO_README="{name} has no extra information.",UNBOUND_ADDON_VALID_MANIFEST="Please enter a valid {type} manifest URL below:",UNBOUND_ALL_ADDONS="All Addons",UNBOUND_APPEARANCE="Appearance",UNBOUND_ASSET_BROWSER="Asset Browser",UNBOUND_AUTHORS="Authors",UNBOUND_BEHAVIOUR="Behavior",UNBOUND_BUNDLE="Bundle",UNBOUND_BY="By",UNBOUND_BYTECODE_VERSION="Bytecode Version",UNBOUND_BY_AUTHORS="By {authors}",UNBOUND_CHANGELOG="Changelog",UNBOUND_CHANGE_RESTART="Restart Required",UNBOUND_CHANGE_RESTART_DESC="This change requires a restart to apply. Would you like to restart?",UNBOUND_COLLAPSE="Collapse",UNBOUND_COLLAPSE_AUTHORS="Collapse authors",UNBOUND_DEBUG_BRIDGE="Debug Bridge",UNBOUND_DEBUG_BRIDGE_DESC="Automatically connects to a specified remote debug bridge to allow for code evaluation.",UNBOUND_DEBUG_BRIDGE_IP="Debug IP",UNBOUND_DEBUG_LOGS="Debug Logs",UNBOUND_DEFAULT="Default",UNBOUND_DEFAULT_PACKS="Default Packs",UNBOUND_DESCRIPTION="Description",UNBOUND_DESIGN="Design",UNBOUND_DEVELOPER_SETTINGS="Developer Settings",UNBOUND_DISCORD_SERVER="Discord Server",UNBOUND_DISCORD_VERSION="Discord Version",UNBOUND_DOCUMENTATION="Documentation",UNBOUND_DOWNLOAD_ADDON_DONE="Installed {type} {name}!",UNBOUND_DOWNLOAD_ADDON_FAILED="Failed to install: {error}",UNBOUND_DOWNLOAD_PACK_FETCHING="Fetching metadata...",UNBOUND_DOWNLOAD_PACK_PROGRESS="Fetched {progress}",UNBOUND_ENABLED="Enabled",UNBOUND_ERROR_BOUNDARY="Error Boundary",UNBOUND_ERROR_BOUNDARY_ACTION_COMPONENT="Component",UNBOUND_ERROR_BOUNDARY_ACTION_RECOVERY_MODE="Recovery Mode",UNBOUND_ERROR_BOUNDARY_ACTION_RETRY_RENDER="Retry Render",UNBOUND_ERROR_BOUNDARY_ACTION_STACK_TRACE="Stack Trace",UNBOUND_CLEAR_CACHES="Clear Caches",UNBOUND_CACHE_CLEARED_TITLE="Caches Cleared",UNBOUND_CACHE_CLEARED_DESCRIPTION="Please restart the app to re-populate your cache.",UNBOUND_ERROR_BOUNDARY_DESC="Crash recovery module. Do not disable if you are a consumer.",UNBOUND_ERROR_BOUNDARY_OUTLINE_TITLE="Here's a detailed outline of what happened:",UNBOUND_ERROR_BOUNDARY_TRIGGER_DESC="Trips the error boundary on purpose to visualise the effects of it.",UNBOUND_ERROR_BOUNDARY_TRIGGER_TITLE="Trigger ErrorBoundary",UNBOUND_STAFF_MODE_DESC="Allows you to access staff-only features. The staff section can be found at the bottom of the settings page.",UNBOUND_STAFF_MODE_TITLE="Staff Mode",UNBOUND_FONTS="Fonts",UNBOUND_FORCE_GARBAGE_COLLECTION="Force Garbage Collection",UNBOUND_FORCE_GARBAGE_COLLECTION_DESC="Forces manual garbage collection by running the `gc` function defined on the `window`.",UNBOUND_FORCE_GARBAGE_COLLECTION_TITLE="Force GC",UNBOUND_GARBAGE_COLLECTION="Garbage Collection",UNBOUND_GARBAGE_COLLECTION_TOAST="Freed up unused memory.",UNBOUND_GENERAL="General",UNBOUND_GITHUB="GitHub",UNBOUND_ICONS="Icons",UNBOUND_ICON_PACK_TITLE="Icon Pack",UNBOUND_IDENTIFIER="Identifier",UNBOUND_INDEFINITE="Indefinite",UNBOUND_INFINITE="Infinite",UNBOUND_INFO="Info",UNBOUND_INFORMATION="Information",UNBOUND_INSTALL="Install",UNBOUND_INSTALLED_ADDONS="Installed Addons",UNBOUND_INSTALLED_ADDONS_INFO="Addons you have installed that are also in {source}",UNBOUND_INSTALLED_PLUGINS="Installed Plugins",UNBOUND_INSTALLED_THEMES="Installed Themes",UNBOUND_INSTALL_ADDON="Install {type}",UNBOUND_INSTALL_CANCELLED="{type} installation cancelled.",UNBOUND_INSTALL_TITLE="Install {type}",UNBOUND_JOIN_SERVER="Join Server",UNBOUND_LINKS="Links",UNBOUND_LOADER="Loader",UNBOUND_LOADER_CUSTOM_BUNDLE="Custom Bundle URL",UNBOUND_LOADER_DEVTOOLS="React DevTools",UNBOUND_LOADER_DEVTOOLS_DESC="Enables remote developer tools that can be accessed from a desktop. Use window.DevTools to connect.",UNBOUND_LOADER_ENABLED_DESC="Handles the loading of Unbound. You will need to edit the configuration file to enable the loader again.",UNBOUND_LOADER_UPDATER_FORCE="Force Update",UNBOUND_LOADER_UPDATER_FORCE_DESC="Always fetches and uses the latest bundle available at the provided bundle URL.",UNBOUND_LOGGING="Logging",UNBOUND_LOGGING_DEPTH="Inspection Depth",UNBOUND_LOGGING_DEPTH_DESC="{depth} nested object(s) deep",UNBOUND_LOGS_EMPTY="There are no logs at the moment.\nPlease come back later.",UNBOUND_MANAGE_TYPE="Manage {type}",UNBOUND_MISC="Misc",UNBOUND_MODULE_SETTINGS="Module Settings",UNBOUND_NAME="Name",UNBOUND_ONBOARDING_ADDON_PAGE_INFO="Press on the '+' or pull down from the top (under this message) to install the {type}!",UNBOUND_ONBOARDING_FINISH_TITLE="Enjoy using Unbound!",UNBOUND_ONBOARDING_INSTALLED_SUBTITLE="You just installed a plugin. This process is exactly the same for all other addons, including Themes, Icon Packs, Fonts, and other Plugins!",UNBOUND_ONBOARDING_INSTALLED_TITLE="You've done it!",UNBOUND_ONBOARDING_INSTALL_SUBTITLE="You can access this tab (aswell as others such as the 'Design' tab) from your Discord settings!",UNBOUND_ONBOARDING_INSTALL_TITLE="Let's try installing a plugin...",UNBOUND_ONBOARDING_JOIN_SUBTITLE="To install more addons (such as Themes, Icon Packs, and Fonts) or to get support, you should join our Discord server.",UNBOUND_ONBOARDING_JOIN_TITLE="Join Unbound's Discord Server...",UNBOUND_ONBOARDING_LETS_TRY_TITLE="Let's give it a try!",UNBOUND_ONBOARDING_PASTE_SUBTITLE="For this demonstration, the button won't actually paste anything from your clipboard, but will still add the example plugin URL into the install box.",UNBOUND_ONBOARDING_PASTE_TITLE="Then, press the paste button!",UNBOUND_ONBOARDING_PLUS_SUBTITLE="You can also pull down on the addon page to install the addon, just like pressing the '+'!",UNBOUND_ONBOARDING_PLUS_TITLE="Press the '+' at the top right!",UNBOUND_ONBOARDING_PROTOCOLS_SUBTITLE="These custom protocols can perform multiple actions, including installing and uninstalling addons. For more information on them (aswell as how to make your own), please check the documentation!",UNBOUND_ONBOARDING_PROTOCOLS_TITLE="You can also tap 'unbound://' links!",UNBOUND_ORDER_ADDONS="Order {type}",UNBOUND_PACK_APPLYING_DESC="Applying pack {pack}...",UNBOUND_PACK_NOT_INSTALLED_DESC="The selected icon pack {pack} is not installed. To modify Discord's icons, please download and install the pack. Icons will remain unchanged until the selected pack is installed.",UNBOUND_PACK_NOT_INSTALLED_TITLE="Pack not installed",UNBOUND_PLUGINS="Plugins",UNBOUND_RECOVERY_MODE="Recovery Mode",UNBOUND_RECOVERY_MODE_DESC="Avoids loading addons to prevent crashing.",UNBOUND_RECOVERY_MODE_ENABLED="Recovery mode is enabled, all addons have been disabled to aid you in the diagnosis of issues.",UNBOUND_REFETCH="Refetch",UNBOUND_REFETCH_ADDON="Refetch {type}",UNBOUND_RESTART="Restart",UNBOUND_RETURN_TO_SOURCE="Tap this to return to {source}",UNBOUND_REVERSED="Reversed",UNBOUND_SEARCH="Search {type}...",UNBOUND_SHOW_TOAST="Show Toast",UNBOUND_SKIP_ONBOARDING="Skip Onboarding",UNBOUND_SOURCES="Sources",UNBOUND_SOURCES_REFRESH="Refresh sources",UNBOUND_SOURCE_ADDONS_UPDATES="{number} {plural, select, true {addons have updates} false {addon has an update}}",UNBOUND_SOURCE_EMPTY="Could not find any addons.",UNBOUND_SOURCE_EMPTY_INFO="Could not find any addons in {source}.",UNBOUND_SUCCESSFULLY_INSTALLED="Successfully installed.",UNBOUND_SUCCESSFULLY_UNINSTALLED="Successfully uninstalled.",UNBOUND_SUGGESTED="Suggested",UNBOUND_TAGS="Tags",UNBOUND_TESTING="Testing",UNBOUND_THEMES="Themes",UNBOUND_THEME_EDITOR="Theme Editor",UNBOUND_THEME_GET_DESC="Would you like to create, edit, or import a theme?",UNBOUND_THEME_GET_OPTION_CREATE="Editor",UNBOUND_THEME_GET_OPTION_IMPORT="Import",UNBOUND_TOASTS="Toasts",UNBOUND_TOASTS_ANIMATIONS="Animations",UNBOUND_TOASTS_ANIMATIONS_DESC="You may choose to disable animations for toasts shown by addons.",UNBOUND_TOASTS_DESC="This controls whether you see toasts from addons.",UNBOUND_TOASTS_EXAMPLE_CONTENT_ALTERNATE="Wow I love toasts! Here's a longer description to test how it looks when it gets *really* big. The content here is several lines long actually! The toast should adapt automatically to fit all of the text.",UNBOUND_TOASTS_EXAMPLE_CONTENT_PRIMARY="This is an example description.",UNBOUND_TOASTS_EXAMPLE_CONTENT_UPDATE_ALTERNATE="The toast can update at any time, this is an example!",UNBOUND_TOASTS_EXAMPLE_CONTENT_UPDATE_PRIMARY="The toast can update statefully, so simple and fancy!",UNBOUND_TOASTS_EXAMPLE_TITLE_UPDATE_ALTERNATE="Here's a new title!",UNBOUND_TOASTS_EXAMPLE_TITLE_UPDATE_PRIMARY="Updated title...",UNBOUND_TOAST_BACKGROUND_BLUR="Background Blur",UNBOUND_TOAST_BACKGROUND_OPACITY="Background Opacity",UNBOUND_TOAST_DURATION="Toast Duration",UNBOUND_TOAST_DURATION_DESC="If a created toast has its own duration, that will be used instead.",UNBOUND_TOAST_MAX_ON_SCREEN="Maximum Toasts On Screen",UNBOUND_TOAST_SETTINGS="Toast Settings",UNBOUND_UNBOUND_VERSION="Unbound Version",UNBOUND_UNINSTALL="Uninstall",UNBOUND_UNINSTALL_ADDON="Uninstall {type}",UNBOUND_UNINSTALL_ADDON_DESC="Are you sure you want to uninstall **{name}**? This action is irreversible.",UNBOUND_UPDATE="Update",UNBOUND_UPDATE_ADDON="Update {type}",UNBOUND_UPDATE_ADDONS="Update Addons",UNBOUND_VERSION="Version",UNBOUND_VIEW_ALL="View all addons in {source}",UNBOUND_VIEW_ALL_ADDONS="View All Addons",UNBOUND_VIEW_MANIFEST="View Manifest",UNBOUND_VIEW_UPDATES="Tap this to view the addons and update them",UNBOUND_WELCOME_SUBTITLE="A Discord mobile client modification aimed at providing the user control, stability and customizability.",UNBOUND_WELCOME_TITLE="Welcome to Unbound!",enUS={UNBOUND_ADDONS:UNBOUND_ADDONS,UNBOUND_ADDONS_EMPTY:UNBOUND_ADDONS_EMPTY,UNBOUND_ADDON_FAILED:UNBOUND_ADDON_FAILED,UNBOUND_ADDON_FROM_SOURCE:UNBOUND_ADDON_FROM_SOURCE,UNBOUND_ADDON_INSTALLED_AMOUNT:UNBOUND_ADDON_INSTALLED_AMOUNT,UNBOUND_ADDON_NO_CHANGELOG:UNBOUND_ADDON_NO_CHANGELOG,UNBOUND_ADDON_NO_DESCRIPTION:UNBOUND_ADDON_NO_DESCRIPTION,UNBOUND_ADDON_NO_README:UNBOUND_ADDON_NO_README,UNBOUND_ADDON_VALID_MANIFEST:UNBOUND_ADDON_VALID_MANIFEST,UNBOUND_ALL_ADDONS:UNBOUND_ALL_ADDONS,UNBOUND_APPEARANCE:UNBOUND_APPEARANCE,UNBOUND_ASSET_BROWSER:UNBOUND_ASSET_BROWSER,UNBOUND_AUTHORS:UNBOUND_AUTHORS,UNBOUND_BEHAVIOUR:UNBOUND_BEHAVIOUR,UNBOUND_BUNDLE:UNBOUND_BUNDLE,UNBOUND_BY:UNBOUND_BY,UNBOUND_BYTECODE_VERSION:UNBOUND_BYTECODE_VERSION,UNBOUND_BY_AUTHORS:UNBOUND_BY_AUTHORS,UNBOUND_CHANGELOG:UNBOUND_CHANGELOG,UNBOUND_CHANGE_RESTART:UNBOUND_CHANGE_RESTART,UNBOUND_CHANGE_RESTART_DESC:UNBOUND_CHANGE_RESTART_DESC,UNBOUND_COLLAPSE:UNBOUND_COLLAPSE,UNBOUND_COLLAPSE_AUTHORS:UNBOUND_COLLAPSE_AUTHORS,UNBOUND_DEBUG_BRIDGE:UNBOUND_DEBUG_BRIDGE,UNBOUND_DEBUG_BRIDGE_DESC:UNBOUND_DEBUG_BRIDGE_DESC,UNBOUND_DEBUG_BRIDGE_IP:UNBOUND_DEBUG_BRIDGE_IP,UNBOUND_DEBUG_LOGS:UNBOUND_DEBUG_LOGS,UNBOUND_DEFAULT:UNBOUND_DEFAULT,UNBOUND_DEFAULT_PACKS:UNBOUND_DEFAULT_PACKS,UNBOUND_DESCRIPTION:UNBOUND_DESCRIPTION,UNBOUND_DESIGN:UNBOUND_DESIGN,UNBOUND_DEVELOPER_SETTINGS:UNBOUND_DEVELOPER_SETTINGS,UNBOUND_DISCORD_SERVER:UNBOUND_DISCORD_SERVER,UNBOUND_DISCORD_VERSION:UNBOUND_DISCORD_VERSION,UNBOUND_DOCUMENTATION:UNBOUND_DOCUMENTATION,UNBOUND_DOWNLOAD_ADDON_DONE:UNBOUND_DOWNLOAD_ADDON_DONE,UNBOUND_DOWNLOAD_ADDON_FAILED:UNBOUND_DOWNLOAD_ADDON_FAILED,UNBOUND_DOWNLOAD_PACK_FETCHING:UNBOUND_DOWNLOAD_PACK_FETCHING,UNBOUND_DOWNLOAD_PACK_PROGRESS:UNBOUND_DOWNLOAD_PACK_PROGRESS,UNBOUND_ENABLED:UNBOUND_ENABLED,UNBOUND_ERROR_BOUNDARY:UNBOUND_ERROR_BOUNDARY,UNBOUND_ERROR_BOUNDARY_ACTION_COMPONENT:UNBOUND_ERROR_BOUNDARY_ACTION_COMPONENT,UNBOUND_ERROR_BOUNDARY_ACTION_RECOVERY_MODE:UNBOUND_ERROR_BOUNDARY_ACTION_RECOVERY_MODE,UNBOUND_ERROR_BOUNDARY_ACTION_RETRY_RENDER:UNBOUND_ERROR_BOUNDARY_ACTION_RETRY_RENDER,UNBOUND_ERROR_BOUNDARY_ACTION_STACK_TRACE:UNBOUND_ERROR_BOUNDARY_ACTION_STACK_TRACE,UNBOUND_CLEAR_CACHES:UNBOUND_CLEAR_CACHES,UNBOUND_CACHE_CLEARED_TITLE:UNBOUND_CACHE_CLEARED_TITLE,UNBOUND_CACHE_CLEARED_DESCRIPTION:UNBOUND_CACHE_CLEARED_DESCRIPTION,UNBOUND_ERROR_BOUNDARY_DESC:UNBOUND_ERROR_BOUNDARY_DESC,UNBOUND_ERROR_BOUNDARY_OUTLINE_TITLE:UNBOUND_ERROR_BOUNDARY_OUTLINE_TITLE,UNBOUND_ERROR_BOUNDARY_TRIGGER_DESC:UNBOUND_ERROR_BOUNDARY_TRIGGER_DESC,UNBOUND_ERROR_BOUNDARY_TRIGGER_TITLE:UNBOUND_ERROR_BOUNDARY_TRIGGER_TITLE,UNBOUND_STAFF_MODE_DESC:UNBOUND_STAFF_MODE_DESC,UNBOUND_STAFF_MODE_TITLE:UNBOUND_STAFF_MODE_TITLE,UNBOUND_FONTS:UNBOUND_FONTS,UNBOUND_FORCE_GARBAGE_COLLECTION:UNBOUND_FORCE_GARBAGE_COLLECTION,UNBOUND_FORCE_GARBAGE_COLLECTION_DESC:UNBOUND_FORCE_GARBAGE_COLLECTION_DESC,UNBOUND_FORCE_GARBAGE_COLLECTION_TITLE:UNBOUND_FORCE_GARBAGE_COLLECTION_TITLE,UNBOUND_GARBAGE_COLLECTION:UNBOUND_GARBAGE_COLLECTION,UNBOUND_GARBAGE_COLLECTION_TOAST:UNBOUND_GARBAGE_COLLECTION_TOAST,UNBOUND_GENERAL:UNBOUND_GENERAL,UNBOUND_GITHUB:UNBOUND_GITHUB,UNBOUND_ICONS:UNBOUND_ICONS,UNBOUND_ICON_PACK_TITLE:UNBOUND_ICON_PACK_TITLE,UNBOUND_IDENTIFIER:UNBOUND_IDENTIFIER,UNBOUND_INDEFINITE:UNBOUND_INDEFINITE,UNBOUND_INFINITE:UNBOUND_INFINITE,UNBOUND_INFO:UNBOUND_INFO,UNBOUND_INFORMATION:UNBOUND_INFORMATION,UNBOUND_INSTALL:UNBOUND_INSTALL,UNBOUND_INSTALLED_ADDONS:UNBOUND_INSTALLED_ADDONS,UNBOUND_INSTALLED_ADDONS_INFO:UNBOUND_INSTALLED_ADDONS_INFO,UNBOUND_INSTALLED_PLUGINS:UNBOUND_INSTALLED_PLUGINS,UNBOUND_INSTALLED_THEMES:UNBOUND_INSTALLED_THEMES,UNBOUND_INSTALL_ADDON:UNBOUND_INSTALL_ADDON,UNBOUND_INSTALL_CANCELLED:UNBOUND_INSTALL_CANCELLED,UNBOUND_INSTALL_TITLE:UNBOUND_INSTALL_TITLE,UNBOUND_JOIN_SERVER:UNBOUND_JOIN_SERVER,UNBOUND_LINKS:UNBOUND_LINKS,UNBOUND_LOADER:UNBOUND_LOADER,UNBOUND_LOADER_CUSTOM_BUNDLE:UNBOUND_LOADER_CUSTOM_BUNDLE,UNBOUND_LOADER_DEVTOOLS:UNBOUND_LOADER_DEVTOOLS,UNBOUND_LOADER_DEVTOOLS_DESC:UNBOUND_LOADER_DEVTOOLS_DESC,UNBOUND_LOADER_ENABLED_DESC:UNBOUND_LOADER_ENABLED_DESC,UNBOUND_LOADER_UPDATER_FORCE:UNBOUND_LOADER_UPDATER_FORCE,UNBOUND_LOADER_UPDATER_FORCE_DESC:UNBOUND_LOADER_UPDATER_FORCE_DESC,UNBOUND_LOGGING:UNBOUND_LOGGING,UNBOUND_LOGGING_DEPTH:UNBOUND_LOGGING_DEPTH,UNBOUND_LOGGING_DEPTH_DESC:UNBOUND_LOGGING_DEPTH_DESC,UNBOUND_LOGS_EMPTY:UNBOUND_LOGS_EMPTY,UNBOUND_MANAGE_TYPE:UNBOUND_MANAGE_TYPE,UNBOUND_MISC:UNBOUND_MISC,UNBOUND_MODULE_SETTINGS:UNBOUND_MODULE_SETTINGS,UNBOUND_NAME:UNBOUND_NAME,UNBOUND_ONBOARDING_ADDON_PAGE_INFO:UNBOUND_ONBOARDING_ADDON_PAGE_INFO,UNBOUND_ONBOARDING_FINISH_TITLE:UNBOUND_ONBOARDING_FINISH_TITLE,UNBOUND_ONBOARDING_INSTALLED_SUBTITLE:UNBOUND_ONBOARDING_INSTALLED_SUBTITLE,UNBOUND_ONBOARDING_INSTALLED_TITLE:UNBOUND_ONBOARDING_INSTALLED_TITLE,UNBOUND_ONBOARDING_INSTALL_SUBTITLE:UNBOUND_ONBOARDING_INSTALL_SUBTITLE,UNBOUND_ONBOARDING_INSTALL_TITLE:UNBOUND_ONBOARDING_INSTALL_TITLE,UNBOUND_ONBOARDING_JOIN_SUBTITLE:UNBOUND_ONBOARDING_JOIN_SUBTITLE,UNBOUND_ONBOARDING_JOIN_TITLE:UNBOUND_ONBOARDING_JOIN_TITLE,UNBOUND_ONBOARDING_LETS_TRY_TITLE:UNBOUND_ONBOARDING_LETS_TRY_TITLE,UNBOUND_ONBOARDING_PASTE_SUBTITLE:UNBOUND_ONBOARDING_PASTE_SUBTITLE,UNBOUND_ONBOARDING_PASTE_TITLE:UNBOUND_ONBOARDING_PASTE_TITLE,UNBOUND_ONBOARDING_PLUS_SUBTITLE:UNBOUND_ONBOARDING_PLUS_SUBTITLE,UNBOUND_ONBOARDING_PLUS_TITLE:UNBOUND_ONBOARDING_PLUS_TITLE,UNBOUND_ONBOARDING_PROTOCOLS_SUBTITLE:UNBOUND_ONBOARDING_PROTOCOLS_SUBTITLE,UNBOUND_ONBOARDING_PROTOCOLS_TITLE:UNBOUND_ONBOARDING_PROTOCOLS_TITLE,UNBOUND_ORDER_ADDONS:UNBOUND_ORDER_ADDONS,UNBOUND_PACK_APPLYING_DESC:UNBOUND_PACK_APPLYING_DESC,UNBOUND_PACK_NOT_INSTALLED_DESC:UNBOUND_PACK_NOT_INSTALLED_DESC,UNBOUND_PACK_NOT_INSTALLED_TITLE:UNBOUND_PACK_NOT_INSTALLED_TITLE,UNBOUND_PLUGINS:UNBOUND_PLUGINS,UNBOUND_RECOVERY_MODE:UNBOUND_RECOVERY_MODE,UNBOUND_RECOVERY_MODE_DESC:UNBOUND_RECOVERY_MODE_DESC,UNBOUND_RECOVERY_MODE_ENABLED:UNBOUND_RECOVERY_MODE_ENABLED,UNBOUND_REFETCH:UNBOUND_REFETCH,UNBOUND_REFETCH_ADDON:UNBOUND_REFETCH_ADDON,UNBOUND_RESTART:UNBOUND_RESTART,UNBOUND_RETURN_TO_SOURCE:UNBOUND_RETURN_TO_SOURCE,UNBOUND_REVERSED:UNBOUND_REVERSED,UNBOUND_SEARCH:UNBOUND_SEARCH,UNBOUND_SHOW_TOAST:UNBOUND_SHOW_TOAST,UNBOUND_SKIP_ONBOARDING:UNBOUND_SKIP_ONBOARDING,UNBOUND_SOURCES:UNBOUND_SOURCES,UNBOUND_SOURCES_REFRESH:UNBOUND_SOURCES_REFRESH,UNBOUND_SOURCE_ADDONS_UPDATES:UNBOUND_SOURCE_ADDONS_UPDATES,UNBOUND_SOURCE_EMPTY:UNBOUND_SOURCE_EMPTY,UNBOUND_SOURCE_EMPTY_INFO:UNBOUND_SOURCE_EMPTY_INFO,UNBOUND_SUCCESSFULLY_INSTALLED:UNBOUND_SUCCESSFULLY_INSTALLED,UNBOUND_SUCCESSFULLY_UNINSTALLED:UNBOUND_SUCCESSFULLY_UNINSTALLED,UNBOUND_SUGGESTED:UNBOUND_SUGGESTED,UNBOUND_TAGS:UNBOUND_TAGS,UNBOUND_TESTING:UNBOUND_TESTING,UNBOUND_THEMES:UNBOUND_THEMES,UNBOUND_THEME_EDITOR:UNBOUND_THEME_EDITOR,UNBOUND_THEME_GET_DESC:UNBOUND_THEME_GET_DESC,UNBOUND_THEME_GET_OPTION_CREATE:UNBOUND_THEME_GET_OPTION_CREATE,UNBOUND_THEME_GET_OPTION_IMPORT:UNBOUND_THEME_GET_OPTION_IMPORT,UNBOUND_TOASTS:UNBOUND_TOASTS,UNBOUND_TOASTS_ANIMATIONS:UNBOUND_TOASTS_ANIMATIONS,UNBOUND_TOASTS_ANIMATIONS_DESC:UNBOUND_TOASTS_ANIMATIONS_DESC,UNBOUND_TOASTS_DESC:UNBOUND_TOASTS_DESC,UNBOUND_TOASTS_EXAMPLE_CONTENT_ALTERNATE:UNBOUND_TOASTS_EXAMPLE_CONTENT_ALTERNATE,UNBOUND_TOASTS_EXAMPLE_CONTENT_PRIMARY:UNBOUND_TOASTS_EXAMPLE_CONTENT_PRIMARY,UNBOUND_TOASTS_EXAMPLE_CONTENT_UPDATE_ALTERNATE:UNBOUND_TOASTS_EXAMPLE_CONTENT_UPDATE_ALTERNATE,UNBOUND_TOASTS_EXAMPLE_CONTENT_UPDATE_PRIMARY:UNBOUND_TOASTS_EXAMPLE_CONTENT_UPDATE_PRIMARY,UNBOUND_TOASTS_EXAMPLE_TITLE_UPDATE_ALTERNATE:UNBOUND_TOASTS_EXAMPLE_TITLE_UPDATE_ALTERNATE,UNBOUND_TOASTS_EXAMPLE_TITLE_UPDATE_PRIMARY:UNBOUND_TOASTS_EXAMPLE_TITLE_UPDATE_PRIMARY,UNBOUND_TOAST_BACKGROUND_BLUR:UNBOUND_TOAST_BACKGROUND_BLUR,UNBOUND_TOAST_BACKGROUND_OPACITY:UNBOUND_TOAST_BACKGROUND_OPACITY,UNBOUND_TOAST_DURATION:UNBOUND_TOAST_DURATION,UNBOUND_TOAST_DURATION_DESC:UNBOUND_TOAST_DURATION_DESC,UNBOUND_TOAST_MAX_ON_SCREEN:UNBOUND_TOAST_MAX_ON_SCREEN,UNBOUND_TOAST_SETTINGS:UNBOUND_TOAST_SETTINGS,UNBOUND_UNBOUND_VERSION:UNBOUND_UNBOUND_VERSION,UNBOUND_UNINSTALL:UNBOUND_UNINSTALL,UNBOUND_UNINSTALL_ADDON:UNBOUND_UNINSTALL_ADDON,UNBOUND_UNINSTALL_ADDON_DESC:UNBOUND_UNINSTALL_ADDON_DESC,UNBOUND_UPDATE:UNBOUND_UPDATE,UNBOUND_UPDATE_ADDON:UNBOUND_UPDATE_ADDON,UNBOUND_UPDATE_ADDONS:UNBOUND_UPDATE_ADDONS,UNBOUND_VERSION:UNBOUND_VERSION,UNBOUND_VIEW_ALL:UNBOUND_VIEW_ALL,UNBOUND_VIEW_ALL_ADDONS:UNBOUND_VIEW_ALL_ADDONS,UNBOUND_VIEW_MANIFEST:UNBOUND_VIEW_MANIFEST,UNBOUND_VIEW_UPDATES:UNBOUND_VIEW_UPDATES,UNBOUND_WELCOME_SUBTITLE:UNBOUND_WELCOME_SUBTITLE,UNBOUND_WELCOME_TITLE:UNBOUND_WELCOME_TITLE},enGB={},CoreStrings={"en-US":enUS,"en-GB":enGB};function asyncGeneratorStep$5(e,t,n,r,a,o,i){try{var l=e[o](i),s=l.value}catch(e){n(e);return}l.done?t(s):Promise.resolve(s).then(r,a)}function _async_to_generator$5(e){return function(){var t=this,n=arguments;return new Promise(function(r,a){var o=e.apply(t,n);function i(e){asyncGeneratorStep$5(o,r,a,i,l,"next",e)}function l(e){asyncGeneratorStep$5(o,r,a,i,l,"throw",e)}i(void 0)})}}var Logger$c=createLogger("API","i18n"),state={locale:"en-US",messages:{}};function initialize$2(){state.locale=i18n$1.getLocale()??"en-US",i18n$1.on("locale",onChange),add(CoreStrings)}function addStrings(e,t){state.locale&&(state.messages[e]??={},Object.assign(state.messages[e],t),i18n$1.loadPromise.then(inject))}function inject(){if(state.locale&&i18n$1?.getLocale){var e=i18n$1._provider._context;Object.assign(e.messages,state.messages[state.locale]??{}),Object.assign(e.defaultMessages,state.messages["en-US"]??{})}}function onChange(e){return _onChange.apply(this,arguments)}function _onChange(){return(_onChange=_async_to_generator$5(function*(e){state.locale=e,yield i18n$1.loadPromise,inject()})).apply(this,arguments)}function add(e){if("object"!=typeof e||Array.isArray(e))throw Error("Locale strings must be an object with languages and strings.");for(var t in e)addStrings(t,e[t]);return{remove:()=>{var t=i18n$1._provider._context;for(var n in e)for(var r of Object.keys(e[n]))delete t.defaultMessages[r],delete t.messages[r],delete i18n$1.Messages[r]}}}try{initialize$2()}catch(e){Logger$c.error("Failed to initialize i18n:",e.message)}var Strings=i18n$1.Messages,i18n=Object.freeze({__proto__:null,Strings:Strings,add:add,state:state});function Search(e){return React.createElement(Discord.TextInput,{size:"md",...e})}function GeneralSearch({type:e,search:t,setSearch:n}){return React.createElement(Search,{placeholder:Strings.UNBOUND_SEARCH.format({type:e}),value:t,onChange:e=>n(e),onClear:()=>n(""),isClearable:!0,leadingIcon:()=>React.createElement(reactNative.View,{style:{flex:1,justifyContent:"center",alignItems:"center"}},React.createElement(TintedIcon,{source:getIDByName("ic_search"),size:16}))})}var useStyles$5=Discord.createStyles({container:{backgroundColor:Theme$1.colors.BACKGROUND_TERTIARY,width:"100%",height:"100%",flex:1,paddingVertical:30},cardShadow:Theme$1.shadows.SHADOW_HIGH,card:{backgroundColor:Theme$1.colors.BACKGROUND_PRIMARY,marginHorizontal:20,marginBottom:12,borderRadius:20,...Theme$1.shadows.SHADOW_BORDER},headerChainIcon:{width:void 0,height:"45%",aspectRatio:1,right:30,top:"27.5%",borderRadius:1e3,position:"absolute"},headerTitle:{color:Theme$1.colors.HEADER_PRIMARY,width:"60%",fontSize:22,fontFamily:Constants.Fonts.PRIMARY_BOLD,letterSpacing:-.5,marginTop:20,marginBottom:10,marginLeft:20},headerBody:{color:Theme$1.colors.TEXT_NORMAL,width:"50%",fontSize:18,fontFamily:Constants.Fonts.PRIMARY_NORMAL,marginBottom:20,marginLeft:20},outlineTitle:{color:Theme$1.colors.TEXT_NORMAL,width:"100%",textAlign:"center",fontSize:18,fontFamily:Constants.Fonts.PRIMARY_SEMIBOLD,letterSpacing:-.5,marginVertical:10},outlineCodeblock:{marginHorizontal:10,marginBottom:10,borderRadius:20,flexGrow:1,...Theme$1.shadows.SHADOW_LOW}}),Card=({style:e,...t})=>{var n=useStyles$5();return React.createElement(reactNative.View,{style:[n.cardShadow,e]},React.createElement(reactNative.View,{style:[n.card,e],...t}))},Header=({res:e})=>{var t=useStyles$5();return React.createElement(Card,null,React.createElement(reactNative.View,{style:{flexDirection:"column"}},React.createElement(reactNative.Text,{style:t.headerTitle},e.props?.title?.replace("Discord",CLIENT_NAME)),React.createElement(reactNative.Text,{style:t.headerBody},e.props.body)),React.createElement(reactNative.Image,{source:{uri:"https://raw.githubusercontent.com/unbound-mod/assets/main/logo/logo.png"},style:[t.headerChainIcon,{transform:[{rotateZ:"20deg"},{scale:1.4}],opacity:.3}],blurRadius:6,defaultSource:Icons.MoreHorizontalIcon}),React.createElement(reactNative.Image,{source:{uri:"https://raw.githubusercontent.com/unbound-mod/assets/main/logo/logo.png"},style:t.headerChainIcon,defaultSource:Icons.MoreHorizontalIcon}))},Outline=({state:e,error:t})=>{var n,r=useStyles$5(),[a,o]=react.useState(!1);return React.createElement(Card,{style:{flexGrow:1}},React.createElement(reactNative.Text,{style:r.outlineTitle},Strings.UNBOUND_ERROR_BOUNDARY_OUTLINE_TITLE),React.createElement(reactNative.View,{style:{flexGrow:1}},React.createElement(Discord.SegmentedControlPages,{state:e}),React.createElement(reactNative.View,{style:{position:"absolute",bottom:20,right:20}},React.createElement(Discord.IconButton,{icon:getIDByName("ic_message_copy"),variant:"primary",size:"md",loading:a,onPress:()=>{clearTimeout(n),o(e=>!e),n=setTimeout(()=>o(e=>!e),400),Clipboard.setString(t)}}))),React.createElement(reactNative.View,{style:{margin:10,marginTop:0}},React.createElement(Discord.SegmentedControl,{state:e,variant:"experimental_Large"})))},Actions=({retryRender:e})=>{var t=useSettingsStore("unbound");return React.createElement(Card,{style:{marginBottom:0}},React.createElement(reactNative.View,{style:{flexDirection:"row",margin:10}},React.createElement(reactNative.View,{style:t.get("recovery",!1)?{flex:1}:{flex:.5,marginRight:10}},React.createElement(Discord.Button,{onPress:e,variant:"destructive",size:"md",icon:getIDByName("ic_message_retry"),iconPosition:"start",text:Strings.UNBOUND_ERROR_BOUNDARY_ACTION_RETRY_RENDER})),!t.get("recovery",!1)&&React.createElement(reactNative.View,{style:{flex:.5}},React.createElement(Discord.Button,{onPress:()=>(t.set("recovery",!0),reload$1(!1)),icon:getIDByName("ic_shield_24px"),variant:"tertiary",size:"md",text:Strings.UNBOUND_ERROR_BOUNDARY_ACTION_RECOVERY_MODE}))))};function ErrorBoundary({error:e,retryRender:t,res:n}){var r=[{id:"component",icon:()=>React.createElement(TintedIcon,{source:Icons.ImageTextIcon,size:20}),label:Strings.UNBOUND_ERROR_BOUNDARY_ACTION_COMPONENT,error:e.toString()+e.componentStack},{id:"stack",icon:()=>React.createElement(TintedIcon,{source:Icons.ic_category_16px,size:20}),label:Strings.UNBOUND_ERROR_BOUNDARY_ACTION_STACK_TRACE,error:e.stack.replace(/(at .*) \(.*\)/g,"$1")}],[a,o]=react.useState(0),i=useStyles$5(),l=Discord.useSegmentedControlState({defaultIndex:0,items:r.map(({label:e,id:t,icon:n,error:r})=>({label:e,id:t,icon:n,page:React.createElement(CodeBlock,{selectable:!0,style:i.outlineCodeblock},r)})),pageWidth:reactNative.Dimensions.get("window").width-40,onPageChange:o});return React.createElement(reactNative.SafeAreaView,{style:i.container},React.createElement(Header,{res:n}),React.createElement(Outline,{state:l,error:r[a].error}),React.createElement(Actions,{retryRender:t}))}var Patcher$9=createPatcher("unbound::error-boundary"),Logger$b=createLogger("Core","Error Boundary"),Settings$5=getStore("unbound"),data$b={name:"Error Boundary",shouldInitialize:()=>Settings$5.get("error-boundary",!0),settings:{monitor:["error-boundary"]}};function start$c(){var e=findByName("ErrorBoundary");if(!e)return Logger$b.error("Failed to find ErrorBoundary.");Patcher$9.after(e.prototype,"render",(e,t,n)=>e.state.error?React.createElement(ErrorBoundary,{error:e.state.error,retryRender:()=>e.setState({error:null,info:null}),res:n}):n)}function stop$c(){Patcher$9.unpatchAll()}var errorBoundary=Object.freeze({__proto__:null,data:data$b,start:start$c,stop:stop$c}),Patcher$8=createPatcher("unbound::debug-bridge"),Logger$a=createLogger("Core","Debug Bridge"),Settings$4=getStore("unbound"),data$a={name:"Debug Bridge",shouldInitialize:()=>Settings$4.get("debug-bridge.enabled",!1),settings:{monitor:["debug-bridge.enabled","debug-bridge.address"]}};function start$b(isReconnect=!1){var address=Settings$4.get("debug-bridge.address","192.168.0.35:9090");if(!address)return Logger$a.warn("Address is invalid.");patchLoggingHook(),ws$1=new WebSocket(`ws://${address}`),ws$1.addEventListener("open",()=>{Logger$a.success(isReconnect?"Reconnected.":"Connected.")}),ws$1.addEventListener("close",({code:e})=>{Logger$a.warn(`Socket closed with code ${e}.`),stop$b()}),ws$1.addEventListener("message",message=>{try{var result=eval(message.data);console.log(result)}catch(e){console.error(e)}}),attachAppStateListener()}function stop$b(){Patcher$8.unpatchAll(),ws$1?.readyState===ws$1.OPEN&&(ws$1.close(),ws$1=null)}function patchLoggingHook(){Patcher$8.before(globalThis,"nativeLoggingHook",(e,t)=>{var[n,r]=t;if(ws$1?.readyState===WebSocket.OPEN)try{ws$1.send(JSON.stringify({level:r,message:n}))}catch(e){Logger$a.error("Failed to send log message:",e)}return t})}function attachAppStateListener(){var{remove:e}=reactNative.AppState.addEventListener("change",t=>{switch(t){case"active":if(ws$1||ws$1?.readyState===WebSocket.OPEN)return;e(),start$b(!0);break;case"background":stop$b()}})}var debugBridge=Object.freeze({__proto__:null,data:data$a,start:start$b,stop:stop$b,get ws(){return ws$1}});function AddonCard(e){var{addon:t,kind:n}=e,r=useSettingsStore("unbound",({key:e})=>"recovery"===e),a=react.useMemo(()=>managers[ManagerNames[n]],[n]);return a?React.createElement(reactNative.View,{style:{margin:20}},React.createElement(Discord.Card,{style:{flexDirection:"column"}},React.createElement(reactNative.View,null,React.createElement(Discord.Text,{color:"text-normal",variant:"text-lg/bold"},t.data.name),React.createElement(Switch.FormSwitch,{disabled:t.failed||r.get("recovery",!1),value:a.isEnabled(t.id),onValueChange:()=>a.toggle(t.id)})),React.createElement(Discord.Text,{color:"text-muted",variant:"text-md/normal"},t.data.description))):null}function AddonPage(e){return React.createElement(reactNative.View,{style:{flex:1}},React.createElement(FlashList.FlashList,{data:e.addons,estimatedItemSize:200,renderItem:({item:t})=>React.createElement(AddonCard,{kind:e.kind,addon:t})}))}function useForceUpdate(){var[,e]=react.useReducer(e=>e+1,0);return e}function useAddons(e){var t=useForceUpdate(),n=managers[e];return(react.useEffect(()=>{if(n)return n.on("load",t),n.on("unload",t),n.on("enabled",t),n.on("disabled",t),()=>{n.off("load",t),n.off("unload",t),n.off("enabled",t),n.off("disabled",t)}},[]),n)?n.getEntities():[]}function Plugins({headerRightMargin:e=!1}){var t=Discord.useNavigation(),n=useAddons("Plugins"),r=t.addListener("focus",()=>{r(),t.setOptions({title:n.length?`${Strings.UNBOUND_PLUGINS} - ${n.length}`:Strings.UNBOUND_PLUGINS})});return React.createElement(reactNative.View,null,React.createElement(AddonPage,{kind:ManagerKind.PLUGINS,addons:n}))}Discord.createStyles({container:{flex:1,flexGrow:1,justifyContent:"space-between",alignItems:"center"},innerContainer:{width:"90%",alignItems:"center"},progressInactive:{backgroundColor:Theme$1.colors.BG_BASE_SECONDARY},progressActive:{backgroundColor:Theme$1.colors.REDESIGN_BUTTON_PRIMARY_BACKGROUND},page:{backgroundColor:Theme$1.colors.BG_BASE_PRIMARY},title:{color:Theme$1.colors.HEADER_PRIMARY},subtitle:{color:Theme$1.colors.HEADER_SECONDARY}});var Messages=findByProps("sendMessage","receiveMessage",{lazy:!0}),Linking=findByProps("openURL","openDeeplink",{lazy:!0}),Profiles=findByProps("showUserProfile",{lazy:!0}),AsyncUsers=findByProps("fetchProfile",{lazy:!0}),api=Object.freeze({__proto__:null,AsyncUsers:AsyncUsers,Linking:Linking,Messages:Messages,Profiles:Profiles}),data$9={name:"Onboarding",shouldInitialize:()=>!Settings$3.get("onboarding.completed",!1)},Patcher$7=createPatcher("unbound::onboarding");createLogger("Core","Onboarding");var Settings$3=getStore("unbound");function start$a(){}function stop$a(){Patcher$7.unpatchAll()}var onboarding=Object.freeze({__proto__:null,data:data$9,start:start$a,stop:stop$a}),data$8={name:"Locale Fix"};function start$9(){Dispatcher.subscribe("I18N_LOAD_SUCCESS",onDispatch)}function stop$9(){Dispatcher.unsubscribe("I18N_LOAD_SUCCESS",onDispatch)}function onDispatch(e){var{locale:t}=e;Moment.locale(t.toLowerCase()),Dispatcher.unsubscribe("I18N_LOAD_SUCCESS",onDispatch)}var localeFix=Object.freeze({__proto__:null,data:data$8,start:start$9,stop:stop$9}),Theme=findStore("Theme",{lazy:!0}),Users=findStore("User",{lazy:!0}),Guilds=findStore("Guild",{lazy:!0}),stores=Object.freeze({__proto__:null,Guilds:Guilds,Theme:Theme,Users:Users}),Patcher$6=createPatcher("unbound::staff"),Logger$9=createLogger("Core","Staff Mode"),Settings$2=getStore("unbound"),data$7={name:"Staff Mode",unpatches:[]};function start$8(){patchDeveloperStore()}function stop$8(){data$7.unpatches.map(e=>e()),Patcher$6.unpatchAll()}function patchDeveloperStore(){var e=findStore("DeveloperExperiment");if(!e)return Logger$9.error("Failed to find DeveloperExperimentStore.");function t({store:t,key:n}){"unbound"===t&&"staff-mode"===n&&e.emitChange()}Patcher$6.instead(e,"initialize",(e,t,n)=>{e.waitFor(Users,Guilds),Object.defineProperties(e,{isDeveloper:{configurable:!1,get:()=>Settings$2.get("staff-mode",!1),set:()=>{}}})}),Storage.on("changed",t),data$7.unpatches.push(()=>void Storage.off("changed",t))}var staffMode=Object.freeze({__proto__:null,data:data$7,start:start$8,stop:stop$8,ws:ws});function showDialog(e){e.key??=uuid(),Discord.openAlert(e.key,React.createElement(Discord.AlertModal,{title:e.title,content:e.content,actions:React.createElement(React.Fragment,null,React.createElement(reactNative.View,{style:{marginTop:e.content?-8:-32,marginBottom:8*(!!(e.componentMargin??!0)&&!!e.component)}},e.component),e.buttons?.length>0&&e.buttons.map(e=>react.createElement(Discord[e.closeAlert??!0?"AlertActionButton":"Button"],e)),(e.cancelButton??!0)&&React.createElement(Discord.AlertActionButton,{text:Strings.CANCEL,variant:"secondary",onPress:()=>e.onCancel?.()}))}))}var dialogs={showDialog},dialogs$1=Object.freeze({__proto__:null,default:dialogs,showDialog:showDialog});function Unbound(e){return React.createElement(SVG.Svg,{xmlns:"http://www.w3.org/2000/svg",width:"100%",height:"100%",version:"1.1",viewBox:"0 0 512 512",...e},React.createElement(SVG.Path,{fill:"currentColor",fillOpacity:"1",stroke:"none",strokeOpacity:"1",strokeWidth:"2",d:"M1030 670l20 145 230 .416v.416a158.168 185 0 01129.79 94.584H1320a-60 72.5 0 00-60 72.5-60 72.5 0 0060 72.5h102.647A158.168 185 0 011280 1185v.416l-155-.416 20 145 135 .416c148.653 0 272.033-118.94 295.832-275.02L1790 1055l60-145-281.299.41C1533.085 771.904 1417.32 670.416 1280 670.416L1030 670z",transform:"scale(.26458)"}),React.createElement(SVG.Path,{fill:"currentColor",fillOpacity:"1",stroke:"none",strokeOpacity:"1",strokeWidth:"2",d:"M620 605c-137.32 0-253.088 101.49-288.703 240H155L95 990h229.172c23.807 156.07 147.18 275 295.828 275h300l-20-145H620v-.416A158.168 185 0 01477.354 990H580a60 72.5 0 0060-72.5 60 72.5 0 00-60-72.5h-89.79A158.168 185 0 01620 750.416V750h210l-20-145H620z",transform:"scale(.26458)"}))}function createStore(e){var t=new Set,n=Object.freeze({getState:(t=e=>e)=>t(e),setState(n){var r="function"==typeof n?n(e):n;Object.is(e,r)||(e=Object.assign({},e,r),setImmediate(()=>{for(var n of t)try{n(e)}catch(e){console.error("Failed to fire listener in zustand store.")}}))},useState(e=e=>e){var[,r]=react.useReducer(e=>e+1,0);return react.useEffect(()=>{var e=()=>{r()};return t.add(e),()=>void t.delete(e)},[]),n.getState(e)},addListener(e){if(!t.has(e))return t.add(e),()=>t.delete(e)},removeListener:e=>t.delete(e),get listeners(){return t}});return n}var store$2=createStore({toasts:{}});function updateToastWithOptions(e,t){store$2.setState(n=>{var r=n.toasts[e];return r?{toasts:{...n.toasts,[e]:{...r,...t}}}:n})}function addToast(e){return e.id??=uuid(),e.date??=Date.now(),store$2.setState(t=>({toasts:{...t.toasts,[e.id]:e}})),{update(t){updateToastWithOptions(e.id,t)},close(){updateToastWithOptions(e.id,{closing:!0})}}}function showToast(e){return e.id??=uuid(),addToast(e)}var Toasts$1={showToast},toasts$1=Object.freeze({__proto__:null,default:Toasts$1,showToast:showToast});function _assert_this_initialized$1(e){if(void 0===e)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function _call_super$1(e,t,n){return t=_get_prototype_of$1(t),_possible_constructor_return$1(e,_is_native_reflect_construct$1()?Reflect.construct(t,n||[],_get_prototype_of$1(e).constructor):t.apply(e,n))}function _class_call_check$1(e,t){if(!(e instanceof t))throw TypeError("Cannot call a class as a function")}function _defineProperties$1(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function _create_class$1(e,t,n){return _defineProperties$1(e.prototype,t),e}function _get_prototype_of$1(e){return(_get_prototype_of$1=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function _inherits$1(e,t){if("function"!=typeof t&&null!==t)throw TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&_set_prototype_of$1(e,t)}function _possible_constructor_return$1(e,t){return t&&("object"===_type_of$1(t)||"function"==typeof t)?t:_assert_this_initialized$1(e)}function _set_prototype_of$1(e,t){return(_set_prototype_of$1=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function _type_of$1(e){return e&&"undefined"!=typeof Symbol&&e.constructor===Symbol?"symbol":typeof e}function _is_native_reflect_construct$1(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(_is_native_reflect_construct$1=function(){return!!e})()}var AssetHandler=findByProps("getAssetUriForEmbed",{lazy:!0}),Asset=function(e){function t(){return _class_call_check$1(this,t),_call_super$1(this,t,arguments)}return _inherits$1(t,e),_create_class$1(t,[{key:"render",value:function(){var{item:e,index:t,total:n,id:r}=this.props;return React.createElement(Discord.TableRow,{label:e.name,subLabel:`${e.type.toUpperCase()} - ${e.width}x${e.height} - ${r}`,trailing:React.createElement(reactNative.Image,{source:r,style:{width:24,height:24}}),onPress:({nativeEvent:e})=>this.open(AssetHandler.getAssetUriForEmbed(r),e),start:0===t,end:t===n-1})}},{key:"open",value:function(e,t){reactNative.Image.getSize(e,(n,r)=>{Media.openMediaModal({originLayout:{width:0,height:0,x:t.pageX,y:t.pageY,resizeMode:"fill"},initialIndex:0,initialSources:[{uri:e,sourceURI:e,width:n,height:r}]})})}}]),t}(react.PureComponent),Assets=react.memo(()=>{var[e,t]=react.useState(""),n=react.useMemo(()=>[...assets.entries()].filter(([,e])=>"png"===e.type),[assets.size]),r=react.useMemo(()=>e?n.filter(([,t])=>t.name.toLowerCase().includes(e.toLowerCase())):n,[e]);return React.createElement(reactNative.ScrollView,{key:"unbound-assets"},React.createElement(reactNative.View,{style:{marginHorizontal:16,marginVertical:12}},React.createElement(GeneralSearch,{type:"assets",search:e,setSearch:t})),React.createElement(Section,{style:{flex:1,marginBottom:108},margin:!1},React.createElement(reactNative.FlatList,{keyExtractor:(e,t)=>t.toString(),data:r,scrollEnabled:!1,initialNumToRender:15,ItemSeparatorComponent:Discord.TableRowDivider,removeClippedSubviews:!0,renderItem:({item:[e,t],index:n})=>React.createElement(Asset,{id:e,item:t,index:n,total:r.length})})))}),store$1=createStore({logs:[]});function addLog({message:e,level:t}){store$1.setState(n=>({logs:[...n.logs.slice(-50),{time:Date.now(),message:e,level:t}]}))}var{TableRow:TableRow$3,TableRowIcon:TableRowIcon$3}=Discord,levelSelection={variant:e=>["muted","normal","warning","danger"][e],icon:e=>["ic_settings","ic_chat_bubble_16px","ic_warning_24px","failure-header"][e]};function Logger$8(){var[e,t]=react.useState(""),n=Discord.useNavigation(),r=store$1.useState(),a=useStyles$4(),o=react.useMemo(()=>r.logs.filter(t=>t.message?.toLowerCase()?.includes(e)).sort((e,t)=>e.time-t.time),[e]),i=n.addListener("focus",()=>{i(),n.setOptions({headerRight:HeaderRight$1})});return React.createElement(reactNative.ScrollView,null,React.createElement(reactNative.View,{style:{marginHorizontal:16,marginVertical:12}},React.createElement(GeneralSearch,{type:"logs",search:e,setSearch:t})),React.createElement(Section,{style:{flex:1,marginBottom:108},margin:!1},React.createElement(reactNative.FlatList,{data:o,keyExtractor:(e,t)=>String(t),scrollEnabled:!1,ListEmptyComponent:React.createElement(reactNative.View,{style:a.empty},React.createElement(reactNative.Image,{style:a.emptyImage,source:Icons.img_connection_empty_dark}),React.createElement(reactNative.Text,{style:a.emptyMessage},Strings.UNBOUND_LOGS_EMPTY)),renderItem:({item:e})=>React.createElement(TableRow$3,{label:e.message,subLabel:Moment.module(e.time).format("HH:mm:ss.SSS"),variant:levelSelection.variant(e.level),icon:React.createElement(TableRowIcon$3,{source:Icons[levelSelection.icon(e.level)]})})})))}var useStyles$4=Discord.createStyles({touchable:{marginRight:10},empty:{justifyContent:"center",alignItems:"center",marginTop:"50%"},emptyImage:{marginBottom:10},emptyMessage:{color:Theme$1.colors.TEXT_MUTED,fontFamily:Constants.Fonts.PRIMARY_SEMIBOLD,textAlign:"center",paddingHorizontal:25}});function HeaderRight$1(){var e=useStyles$4();return React.createElement(reactNative.TouchableOpacity,{style:e.touchable,onPress:()=>store$1.setState({logs:[]})},React.createElement(TintedIcon,{source:Icons.ic_input_clear_24px}))}function asyncGeneratorStep$4(e,t,n,r,a,o,i){try{var l=e[o](i),s=l.value}catch(e){n(e);return}l.done?t(s):Promise.resolve(s).then(r,a)}function _async_to_generator$4(e){return function(){var t=this,n=arguments;return new Promise(function(r,a){var o=e.apply(t,n);function i(e){asyncGeneratorStep$4(o,r,a,i,l,"next",e)}function l(e){asyncGeneratorStep$4(o,r,a,i,l,"throw",e)}i(void 0)})}}var{TableSwitchRow:TableSwitchRow$2,TextInput,TableRow:TableRow$2,TableRowIcon:TableRowIcon$2}=Discord;function Developer(){var e=Discord.useNavigation(),t=useSettingsStore("unbound"),{endStyle:n,formText:r}=useFormStyles(),a={Debug:Assets$1.getIDByName("debug"),Browser:Assets$1.getIDByName("ImageTextIcon"),Trash:Assets$1.getIDByName("trash"),Retry:Assets$1.getIDByName("RetryIcon")};return React.createElement(reactNative.ScrollView,null,React.createElement(Section,{title:Strings.UNBOUND_DEBUG_BRIDGE},React.createElement(TableSwitchRow$2,{label:Strings.UNBOUND_ENABLED,subLabel:Strings.UNBOUND_DEBUG_BRIDGE_DESC,value:t.get("debug-bridge.enabled",!1),onValueChange:()=>t.toggle("debug-bridge.enabled",!1)}),React.createElement(reactNative.View,{style:n},React.createElement(reactNative.View,{style:{margin:8}},React.createElement(TextInput,{isRound:!0,size:"md",value:t.get("debug-bridge.address","192.168.0.35:9090"),onChange:e=>t.set("debug-bridge.address",e),label:Strings.UNBOUND_DEBUG_BRIDGE_IP,disabled:!t.get("debug-bridge.enabled",!1)})))),React.createElement(Section,{title:Strings.UNBOUND_LOADER},React.createElement(TableSwitchRow$2,{label:Strings.UNBOUND_ENABLED,subLabel:Strings.UNBOUND_LOADER_ENABLED_DESC,value:t.get("loader.enabled",!0),onValueChange:()=>t.toggle("loader.enabled",!0)}),React.createElement(TableSwitchRow$2,{label:Strings.UNBOUND_LOADER_DEVTOOLS,subLabel:Strings.UNBOUND_LOADER_DEVTOOLS_DESC,value:t.get("loader.devtools",!1),onValueChange:()=>t.toggle("loader.devtools",!1)}),React.createElement(TableSwitchRow$2,{label:Strings.UNBOUND_LOADER_UPDATER_FORCE,subLabel:Strings.UNBOUND_LOADER_UPDATER_FORCE_DESC,value:t.get("loader.update.force",!1),onValueChange:()=>t.toggle("loader.update.force",!1)}),React.createElement(reactNative.View,{style:n},React.createElement(reactNative.View,{style:{margin:8}},React.createElement(TextInput,{isRound:!0,size:"md",value:t.get("loader.update.url",SocialLinks.Bundle),onChange:e=>t.set("loader.update.url",e),label:Strings.UNBOUND_LOADER_CUSTOM_BUNDLE})))),React.createElement(Section,{title:Strings.UNBOUND_ERROR_BOUNDARY},React.createElement(TableSwitchRow$2,{label:Strings.UNBOUND_ERROR_BOUNDARY,subLabel:Strings.UNBOUND_ERROR_BOUNDARY_DESC,value:t.get("error-boundary",!0),onValueChange:()=>t.toggle("error-boundary",!0)}),React.createElement(TableRow$2,{label:Strings.UNBOUND_ERROR_BOUNDARY_TRIGGER_TITLE,subLabel:Strings.UNBOUND_ERROR_BOUNDARY_TRIGGER_DESC,onPress:()=>e.push(SettingsKeys.Custom,{title:null,render:()=>React.createElement("undefined",null)}),arrow:!0})),React.createElement(Section,{title:Strings.UNBOUND_LOGGING},React.createElement(TableRow$2,{label:Strings.UNBOUND_LOGGING_DEPTH,trailing:React.createElement(reactNative.Text,{style:r},Strings.UNBOUND_LOGGING_DEPTH_DESC.format({depth:t.get("logging.depth",2)}))}),React.createElement(reactNative.View,{style:[n,{borderBottomRightRadius:0,borderBottomLeftRadius:0}]},React.createElement(Discord.Slider,{style:{marginHorizontal:15,marginVertical:5},value:t.get("logging.depth",2),onValueChange:e=>t.set("logging.depth",Math.round(e)),minimumValue:1,maximumValue:6,tapToSeek:!0})),React.createElement(TableRow$2,{label:Strings.UNBOUND_DEBUG_LOGS,icon:React.createElement(TableRowIcon$2,{source:a.Debug}),onPress:()=>e.push(SettingsKeys.Custom,{title:Strings.UNBOUND_DEBUG_LOGS,render:Logger$8}),arrow:!0})),React.createElement(Section,{title:Strings.UNBOUND_MISC},React.createElement(TableRow$2,{label:Strings.UNBOUND_FORCE_GARBAGE_COLLECTION,icon:React.createElement(TableRowIcon$2,{source:a.Trash}),arrow:!0,onPress:_async_to_generator$4(function*(){yield window.gc(),Toasts$1.showToast({title:Strings.UNBOUND_GARBAGE_COLLECTION,content:Strings.UNBOUND_GARBAGE_COLLECTION_TOAST,icon:a.Trash})})}),React.createElement(TableRow$2,{label:Strings.UNBOUND_ASSET_BROWSER,icon:React.createElement(TableRowIcon$2,{source:a.Browser}),onPress:()=>e.push(SettingsKeys.Custom,{title:Strings.UNBOUND_ASSET_BROWSER,render:Assets}),arrow:!0})),React.createElement(reactNative.View,{style:{marginBottom:50}}))}var{TableRow:TableRow$1,TableSwitchRow:TableSwitchRow$1,TableRowIcon:TableRowIcon$1}=Discord;function Toasts(){var[e,t]=react.useState(!0),n=useSettingsStore("unbound"),{endStyle:r,formHint:a,formText:o}=useFormStyles(),i=n.get("toasts.maxOnScreen",3),l=n.get("toasts.duration",0),s=n.get("toasts.opacity",.8),c=n.get("toasts.blur",.15);return React.createElement(reactNative.ScrollView,null,React.createElement(Section,null,React.createElement(TableSwitchRow$1,{label:Strings.UNBOUND_ENABLED,subLabel:Strings.UNBOUND_TOASTS_DESC,icon:React.createElement(TableRowIcon$1,{source:Icons.ic_notification_settings}),value:n.get("toasts.enabled",!0),onValueChange:()=>n.toggle("toasts.enabled",!0)}),React.createElement(TableSwitchRow$1,{label:Strings.UNBOUND_TOASTS_ANIMATIONS,subLabel:Strings.UNBOUND_TOASTS_ANIMATIONS_DESC,icon:React.createElement(TableRowIcon$1,{source:Icons.ic_wand}),value:n.get("toasts.animations",!0),onValueChange:()=>n.toggle("toasts.animations",!0)}),React.createElement(TableRow$1,{arrow:!0,label:Strings.UNBOUND_SHOW_TOAST,icon:React.createElement(TableRowIcon$1,{source:Icons.ic_star_filled}),onPress:()=>{var n=showToast({get title(){return Strings[`UNBOUND_${e?"TOASTS":"TESTING"}`]},get content(){return Strings[`UNBOUND_TOASTS_EXAMPLE_CONTENT_${e?"ALTERNATE":"PRIMARY"}`]},icon:e?"ic_star_filled":"StarIcon"});t(e=>!e),n.update({buttons:e?[{get content(){return Strings.CLOSE},onPress:n.close},{get content(){return Strings.NONE},onPress:noop,variant:"tertiary"}]:[]}),setTimeout(()=>n.update({get title(){return Strings[`UNBOUND_TOASTS_EXAMPLE_TITLE_UPDATE_${e?"ALTERNATE":"PRIMARY"}`]},get content(){return Strings[`UNBOUND_TOASTS_EXAMPLE_CONTENT_UPDATE_${e?"ALTERNATE":"PRIMARY"}`]},icon:e?"smile":"MusicIcon",buttons:[{get content(){return Strings[e?"CLOSE":"NONE"]},onPress:e?n.close:noop,variant:"primary"}]}),1e3)}})),React.createElement(Section,{title:Strings.APPEARANCE},React.createElement(TableRow$1,{label:Strings.UNBOUND_TOAST_BACKGROUND_BLUR,trailing:React.createElement(reactNative.Text,{style:o},`${Math.round(100*c)}%`)}),React.createElement(reactNative.View,{style:r},React.createElement(Discord.Slider,{style:{marginHorizontal:15,marginVertical:5},value:c,onValueChange:e=>n.set("toasts.blur",Math.round(100*e)/100),minimumValue:0,maximumValue:1,tapToSeek:!0}))),React.createElement(Section,null,React.createElement(TableRow$1,{label:Strings.UNBOUND_TOAST_BACKGROUND_OPACITY,trailing:React.createElement(reactNative.Text,{style:o},`${Math.round(100*s)}%`)}),React.createElement(reactNative.View,{style:r},React.createElement(Discord.Slider,{style:{marginHorizontal:15,marginVertical:5},value:s,onValueChange:e=>n.set("toasts.opacity",Math.round(100*e)/100),minimumValue:0,maximumValue:1,tapToSeek:!0}))),React.createElement(Section,{title:Strings.UNBOUND_BEHAVIOUR},React.createElement(TableRow$1,{label:Strings.UNBOUND_TOAST_MAX_ON_SCREEN,trailing:React.createElement(reactNative.Text,{style:o},0===i?Strings.UNBOUND_INFINITE:i)}),React.createElement(reactNative.View,{style:r},React.createElement(Discord.Slider,{style:{marginHorizontal:15,marginVertical:5},value:i,onValueChange:e=>n.set("toasts.maxOnScreen",Math.round(e)),minimumValue:0,maximumValue:6,tapToSeek:!0}))),React.createElement(Section,null,React.createElement(TableRow$1,{label:Strings.UNBOUND_TOAST_DURATION,trailing:React.createElement(reactNative.Text,{style:o},0===l?Strings.UNBOUND_INDEFINITE:Strings.DURATION_SECONDS.format({seconds:l}))}),React.createElement(reactNative.View,{style:r},React.createElement(Discord.Slider,{style:{marginHorizontal:15,marginVertical:5},value:l,onValueChange:e=>n.set("toasts.duration",Math.round(10*e)/10),minimumValue:0,maximumValue:10,tapToSeek:!0}))),React.createElement(reactNative.Text,{style:a},Strings.UNBOUND_TOAST_DURATION_DESC))}var{TableRow,TableSwitchRow,TableRowIcon}=Discord,useStyles$3=Discord.createStyles({trailingText:{color:Theme$1.colors.TEXT_MUTED},container:{marginBottom:50}});function General(){var e=react.useMemo(()=>HermesInternal.getRuntimeProperties(),[]),t=Discord.useNavigation(),n=useSettingsStore("unbound"),r=useStyles$3(),a={GitHub:Assets$1.getIDByName("img_account_sync_github_white"),Development:Assets$1.getIDByName("ic_progress_wrench_24px"),Toasts:Assets$1.getIDByName("ic_notification_settings"),Trash:Assets$1.getIDByName("trash"),Shield:Assets$1.getIDByName("ShieldIcon"),Refresh:Assets$1.getIDByName("RefreshIcon"),Discord:Assets$1.getIDByName("logo"),Staff:Assets$1.getIDByName("ic_badge_staff"),Information:Assets$1.getIDByName("ic_information_24px")};return React.createElement(reactNative.ScrollView,null,React.createElement(reactNative.KeyboardAvoidingView,{enabled:!0,behavior:"position",style:r.container,keyboardVerticalOffset:100,contentContainerStyle:{backfaceVisibility:"hidden"}},React.createElement(Section,null,React.createElement(TableSwitchRow,{label:Strings.UNBOUND_RECOVERY_MODE,subLabel:Strings.UNBOUND_RECOVERY_MODE_DESC,icon:React.createElement(TableRowIcon,{source:a.Shield}),value:n.get("recovery",!1),onValueChange:()=>{n.toggle("recovery",!1),showDialog({title:Strings.UNBOUND_CHANGE_RESTART,content:Strings.UNBOUND_CHANGE_RESTART_DESC,onCancel:()=>n.toggle("recovery",!1),buttons:[{text:Strings.UNBOUND_RESTART,onPress:reload$1}]})}}),React.createElement(TableRow,{label:Strings.UNBOUND_RESTART,icon:React.createElement(TableRowIcon,{source:a.Refresh}),arrow:!0,onPress:reload$1}),React.createElement(TableRow,{label:Strings.UNBOUND_CLEAR_CACHES,icon:React.createElement(TableRowIcon,{source:a.Trash}),arrow:!0,onPress:()=>{showToast({title:Strings.UNBOUND_CACHE_CLEARED_TITLE,content:Strings.UNBOUND_CACHE_CLEARED_DESCRIPTION,icon:"trash"})}})),React.createElement(Section,null,React.createElement(TableRow,{label:Strings.UNBOUND_TOAST_SETTINGS,icon:React.createElement(TableRowIcon,{source:a.Toasts}),onPress:()=>t.push(SettingsKeys.Custom,{title:Strings.UNBOUND_TOAST_SETTINGS,render:Toasts}),arrow:!0}),React.createElement(TableRow,{label:Strings.UNBOUND_DEVELOPER_SETTINGS,icon:React.createElement(TableRowIcon,{source:a.Development}),onPress:()=>t.push(SettingsKeys.Custom,{title:Strings.UNBOUND_DEVELOPER_SETTINGS,render:Developer}),arrow:!0})),React.createElement(Section,null,React.createElement(TableSwitchRow,{label:Strings.UNBOUND_STAFF_MODE_TITLE,subLabel:Strings.UNBOUND_STAFF_MODE_DESC,icon:React.createElement(TableRowIcon,{source:a.Staff}),value:n.get("staff-mode",!1),onValueChange:()=>n.toggle("staff-mode",!1)})),React.createElement(Section,{title:"Links"},React.createElement(TableRow,{label:Strings.UNBOUND_DISCORD_SERVER,icon:React.createElement(TableRowIcon,{source:a.Discord}),onPress:()=>Linking.openDeeplink(`https://discord.gg/${DISCORD_INVITE}`),arrow:!0}),React.createElement(TableRow,{label:Strings.UNBOUND_GITHUB,icon:React.createElement(TableRowIcon,{source:a.GitHub}),onPress:()=>Linking.openURL(SocialLinks.GitHub),arrow:!0})),React.createElement(Section,{title:Strings.UNBOUND_INFO},React.createElement(TableRow,{label:Strings.UNBOUND_UNBOUND_VERSION,onPress:()=>Linking.openURL(`https://github.com/unbound-mod/client/commit/${window.unbound.version}`),icon:React.createElement(TableRowIcon,{IconComponent:Unbound}),trailing:React.createElement(reactNative.Text,{style:r.trailingText},window.unbound.version)}),React.createElement(TableRow,{label:Strings.UNBOUND_DISCORD_VERSION,icon:React.createElement(TableRowIcon,{source:a.Discord}),trailing:React.createElement(reactNative.Text,{style:r.trailingText},BundleInfo.Version)}),React.createElement(TableRow,{label:Strings.UNBOUND_BYTECODE_VERSION,icon:React.createElement(TableRowIcon,{source:a.Information}),trailing:React.createElement(reactNative.Text,{style:r.trailingText},e["Bytecode Version"])}))))}var resolveType=e=>managers["function"==typeof e?e():e].type,useStyles$2=Discord.createStyles({trailing:{flex:1,flexDirection:"row",alignItems:"center"}}),TrailingIcon=({selected:e,source:t})=>{var n=useStyles$2();return React.createElement(reactNative.View,{style:n.trailing},e&&React.createElement(TintedIcon,{source:getIDByName("CheckmarkLargeIcon"),size:14,style:{height:14}}),React.createElement(TintedIcon,{source:getIDByName(t),size:20,style:{height:20,marginLeft:6}}))},radioItems=[{id:"default",label:"UNBOUND_DEFAULT",icon:"PencilSparkleIcon",ordering:e=>e},{id:"identifier",label:"UNBOUND_IDENTIFIER",icon:"ic_star_filled",ordering:e=>e.sort((e,t)=>e.data.id.localeCompare(t.data.id))},{id:"name",label:"UNBOUND_NAME",icon:"ic_add_text",ordering:e=>e.sort((e,t)=>e.data.name.localeCompare(t.data.name))},{id:"description",label:"UNBOUND_DESCRIPTION",icon:"BookCheckIcon",ordering:e=>e.sort((e,t)=>e.data.description.localeCompare(t.data.description))},{id:"authors",label:"UNBOUND_AUTHORS",icon:"ic_group_dm",ordering:e=>e.sort((e,t)=>e.data.authors.join("").localeCompare(t.data.authors.join("")))},{id:"version",label:"UNBOUND_VERSION",icon:"ic_text_channel_16px",ordering:e=>e.slice().sort((e,t)=>{for(var n=e.data.version.split(".").map(Number),r=t.data.version.split(".").map(Number),a=0;a<n.length;a++)if(n[a]!==r[a])return n[a]-r[a];return 0})}],sourceRadioItems=radioItems.filter(e=>["default","identifier","name","description"].includes(e.id)),getItems=(e,t)=>[("source"===resolveType(e)?sourceRadioItems:radioItems).map(n=>{var{icon:r,label:a,...o}=n,i={IconComponent:()=>React.createElement(TrailingIcon,{selected:t.get(`${resolveType(e)}.order`,"default")===n.id,source:r}),action(){t.set(`${resolveType(e)}.order`,n.id)},get label(){return Strings[a]}};return{...o,...i}}),[{id:"reversed",label:"Reversed",IconComponent:()=>{var t=useSettingsStore("unbound");return React.createElement(reactNative.TouchableOpacity,{onPress:()=>t.toggle(`${resolveType(e)}.reversed`,!1),style:{transform:[{scale:.8},{translateX:2}]}},React.createElement(Checkbox.FormCheckbox,{checked:t.get(`${resolveType(e)}.reversed`,!1)}))},action(){t.toggle(`${resolveType(e)}.reversed`,!1)},ordering:e=>e}]];function HeaderRight({type:e,settings:t,onPress:n,margin:r=!1}){return React.createElement(reactNative.View,{style:{flexDirection:"row",alignItems:"center",marginRight:12*!!r}},React.createElement(Overflow,{title:Strings.UNBOUND_ORDER_ADDONS.format({type:capitalize("function"==typeof e?e():e)}),items:getItems(e,t),iconSource:getIDByName("ArrowsUpDownIcon"),scale:.85}),React.createElement(reactNative.TouchableOpacity,{style:{marginLeft:4},onPress:n},React.createElement(TintedIcon,{source:getIDByName("PlusSmallIcon")})))}function _assert_this_initialized(e){if(void 0===e)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function _call_super(e,t,n){return t=_get_prototype_of(t),_possible_constructor_return(e,_is_native_reflect_construct()?Reflect.construct(t,n||[],_get_prototype_of(e).constructor):t.apply(e,n))}function _class_call_check(e,t){if(!(e instanceof t))throw TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function _create_class(e,t,n){return _defineProperties(e.prototype,t),e}function _define_property(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function _get_prototype_of(e){return(_get_prototype_of=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&_set_prototype_of(e,t)}function _possible_constructor_return(e,t){return t&&("object"===_type_of(t)||"function"==typeof t)?t:_assert_this_initialized(e)}function _set_prototype_of(e,t){return(_set_prototype_of=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function _type_of(e){return e&&"undefined"!=typeof Symbol&&e.constructor===Symbol?"symbol":typeof e}function _is_native_reflect_construct(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(_is_native_reflect_construct=function(){return!!e})()}var InternalInstallInput=function(e){function t(){var e;return _class_call_check(this,t),e=_call_super(this,t,arguments),_define_property(e,"controller",new AbortController),_define_property(e,"state",{url:"",loadingPaste:!1,loadingInstall:!1,message:null,error:null}),e}return _inherits(t,e),_create_class(t,[{key:"manager",get:function(){return managers[this.props.type]}},{key:"render",value:function(){return React.createElement(React.Fragment,null,this.renderInput(),this.renderButtons())}},{key:"renderInput",value:function(){var{message:e,error:t}=this.state,{settings:n}=this.props;return React.createElement(reactNative.View,{style:{flex:1,flexDirection:"row",flexWrap:"wrap"}},React.createElement(reactNative.View,{style:{flex:1,flexGrow:1}},React.createElement(Discord.TextInput,{isRound:!0,isClearable:!0,size:"md",onChange:e=>this.setState({url:e}),onClear:()=>this.setState({error:null,message:null}),value:this.state.url,placeholder:`https://${this.manager.type}.com/manifest.json`,placeholderTextColor:Theme$1.unsafe_rawColors.PRIMARY_400,errorMessage:t,description:e})),React.createElement(Discord.IconButton,{icon:Icons.ClipboardListIcon,style:{marginLeft:8},variant:"tertiary",size:"md",loading:this.state.loadingPaste,onPress:()=>{if(n.get("onboarding.install",!1)){this.setState({url:SocialLinks.OnboardingPlugin});return}this.setState({loadingPaste:!0}),Clipboard.getString().then(e=>{this.setState({url:e,loadingPaste:!1})})}}))}},{key:"renderButtons",value:function(){var{url:e}=this.state,{settings:t}=this.props;return React.createElement(React.Fragment,null,React.createElement(Discord.Button,{text:Strings.UNBOUND_INSTALL,style:{marginTop:18},loading:this.state.loadingInstall,onPress:()=>{e&&(this.setState({loadingInstall:!0}),this.manager.install(e,e=>this.setState(e),this.controller.signal).then(()=>{this.setState({loadingInstall:!1}),t.get("onboarding.install",!1)&&t.set("onboarding.install",!1)}))}}),React.createElement(Discord.Button,{text:Strings.CANCEL,style:{marginTop:12},onPress:()=>{Discord.dismissAlerts(),this.state.loadingInstall&&(this.controller.abort(),showToast({title:this.manager.name,content:Strings.UNBOUND_INSTALL_CANCELLED.format({type:capitalize(this.manager.type)}),icon:"CloseLargeIcon"}))},variant:"secondary"}))}},{key:"getInput",value:function(){return this.state.url}}]),t}(react.PureComponent);function InstallInput(e){var t=useSettingsStore("unbound");return React.createElement(InternalInstallInput,{settings:t,...e})}function showInstallAlert({type:e,ref:t}){var n=managers[e];showDialog({title:Strings.UNBOUND_INSTALL_TITLE.format({type:n.type}),content:Strings.UNBOUND_ADDON_VALID_MANIFEST.format({type:n.type}),component:React.createElement(InstallInput,{type:e,ref:t}),componentMargin:!1,cancelButton:!1})}function ThemesPage(){var e=useAddons("Themes");return console.log(e),React.createElement(reactNative.View,{style:{flex:1}},React.createElement(AddonPage,{kind:ManagerKind.THEMES,addons:e}))}var callback=({type:e,ref:t})=>{showDialog({title:Strings.UNBOUND_INSTALL_TITLE.format({type:"theme"}),content:Strings.UNBOUND_THEME_GET_DESC,buttons:[{text:Strings.UNBOUND_THEME_GET_OPTION_IMPORT,onPress:()=>showInstallAlert({type:e,ref:t})},{text:Strings.UNBOUND_THEME_GET_OPTION_CREATE,variant:"tertiary",onPress:noop}]})},Themes={page:React.createElement(ThemesPage,null),callback,icon:React.createElement(TintedIcon,{source:Icons[themes.icon]})},items=[{get label(){return Strings.UNBOUND_THEMES},id:"Themes",...Themes},{get label(){return Strings.UNBOUND_ICONS},id:"Icons",page:()=>null},{get label(){return Strings.UNBOUND_FONTS},id:"Fonts",page:()=>null}];function Design(){var e=react.useRef(),t=Discord.useNavigation(),n=useSettingsStore("unbound"),r=Discord.useSegmentedControlState({defaultIndex:n.get("designPageIndex",0),items,pageWidth:reactNative.Dimensions.get("window").width,onPageChange(e){n.set("designPageIndex",e)}});return react.useLayoutEffect(()=>{var r=t.addListener("focus",()=>{r(),t.setOptions({headerRight:()=>React.createElement(HeaderRight,{type:()=>items[n.get("designPageIndex",0)].id,settings:n,onPress:()=>{var t=items[n.get("designPageIndex",0)];t.callback({ref:e,type:t.id})}})})})},[]),React.createElement(reactNative.View,{style:{flex:1,flexGrow:1,justifyContent:"space-between"}},React.createElement(Discord.SegmentedControlPages,{state:r}),React.createElement(reactNative.SafeAreaView,{style:{position:"absolute",bottom:0,height:"auto",marginBottom:36,marginHorizontal:36}},React.createElement(Discord.SegmentedControl,{state:r,variant:"experimental_Large"})))}var Events=new EventEmitter,Patcher$5=createPatcher("unbound::settings"),Logger$7=createLogger("Core","Settings"),data$6={name:"Settings",unpatches:[],entries:{[SettingsKeys.General]:{type:"route",title:CLIENT_NAME,key:SettingsKeys.General,parent:null,get icon(){return Icons.settings},IconComponent:()=>React.createElement(Discord.TableRowIcon,{IconComponent:Unbound}),screen:{route:"unbound",getComponent:()=>General}},[SettingsKeys.Plugins]:{type:"route",get title(){return Strings.UNBOUND_PLUGINS},key:SettingsKeys.Plugins,parent:null,get icon(){return Icons.debug},screen:{route:"unbound/plugins",getComponent:()=>Plugins}},[SettingsKeys.Design]:{type:"route",get title(){return Strings.UNBOUND_DESIGN},key:SettingsKeys.Design,parent:null,get icon(){return Icons.ic_theme_24px},screen:{route:"unbound/design",getComponent:()=>Design}},[SettingsKeys.Custom]:{type:"route",title:"Page",key:SettingsKeys.Custom,excludeFromDisplay:!0,parent:null,icon:null,screen:{route:SettingsKeys.Custom,getComponent:()=>({route:e})=>{var{render:t,title:n,...r}=e.params??{},a=Discord.useNavigation(),o=a.addListener("focus",()=>{o(),a.setOptions({title:n})});return React.createElement(t,r)}}}}};function start$7(){patchSettingsConfig(),patchSettingsOverview(),Dispatcher.subscribe(DispatchTypes.REGISTER_SETTINGS_ENTRIES,onRegisterEntry)}function stop$7(){data$6.unpatches.map(e=>e()),Dispatcher.unsubscribe(DispatchTypes.REGISTER_SETTINGS_ENTRIES,onRegisterEntry),Patcher$5.unpatchAll()}function patchSettingsConfig(){var e=findByProps("SETTING_RENDERER_CONFIG");if(!e)return Logger$7.error("Failed to find SETTING_RENDERER_CONFIG.");e._SETTING_RENDERER_CONFIG=e.SETTING_RENDERER_CONFIG;var t=e.SETTING_RENDERER_CONFIG;Object.defineProperty(e,"SETTING_RENDERER_CONFIG",{set:e=>t=e,get:()=>({...t,...data$6.entries})}),data$6.unpatches.push(()=>{delete e.SETTING_RENDERER_CONFIG,e.SETTING_RENDERER_CONFIG=e._SETTING_RENDERER_CONFIG,delete e._SETTING_RENDERER_CONFIG})}function patchSettingsOverview(){var e=findByName("SettingsOverviewScreen",{interop:!1});if(!e)return Logger$7.error("Failed to find SettingsOverviewScreen.");Patcher$5.after(e,"default",(e,t,n)=>{var[,r]=react.useState({});react.useEffect(()=>{function e(){r({})}return Events.on("updated-sections",e),()=>Events.off("updated-sections",e)},[]);var a=[...n.props.sections],o=new Map;for(var i of(o.set("unbound-main-section",{isUnbound:!0,isUnboundMainSection:!0,label:null,settings:[]}),Object.values(data$6.entries)))if(!i.excludeFromDisplay){if(i.section){o.has(i.section)||o.set(i.section,{isUnbound:!0,label:i.section,settings:[]});var l=o.get(i.section);l.settings.includes(i.key)||l.settings.push(i.key)}else{var s=o.get("unbound-main-section");s.settings.includes(i.key)||s.settings.push(i.key)}}var c=[...o.values()].sort((e,t)=>e.isUnboundMainSection?-1:t.isUnboundMainSection?1:e.label.localeCompare(t.label));return a.unshift(...c),n.props.sections=a,n})}function onRegisterEntry({entries:e}){for(var t of e)data$6.entries[t.key]&&Logger$7.warn(`Overwriting already existing section ${t.key}. If this was intended, please ignore this.`),data$6.entries[t.key]=t;Events.emit("updated-sections")}var settings$2=Object.freeze({__proto__:null,data:data$6,start:start$7,stop:stop$7}),Patcher$4=createPatcher("unbound::tracking"),Logger$6=createLogger("Core","Tracking"),data$5={name:"Tracking"};function start$6(){patchMetadataTrackers(),patchSuperProperties(),patchActionHandlers()}function stop$6(){Patcher$4.unpatchAll()}function patchMetadataTrackers(){var e=findByProps("trackWithMetadata");if(!e)return Logger$6.error("Failed to find metadata trackers.");Patcher$4.instead(e,"trackWithMetadata",noop)}function patchActionHandlers(){var e=findByProps("AnalyticsActionHandlers");if(!e)return Logger$6.error("Failed to find action handlers.");Patcher$4.instead(e.AnalyticsActionHandlers,"handleConnectionClosed",noop),Patcher$4.instead(e.AnalyticsActionHandlers,"handleConnectionOpen",noop),Patcher$4.instead(e.AnalyticsActionHandlers,"handleFingerprint",noop),Patcher$4.instead(e.AnalyticsActionHandlers,"handleTrack",noop)}function patchSuperProperties(){var e=findByProps("track","encodeProperties");if(!e)return Logger$6.error("Failed to find super properties.");Patcher$4.instead(e,"track",noop)}var tracking=Object.freeze({__proto__:null,data:data$5,start:start$6,stop:stop$6}),ApplicationCommandType=function(e){return e[e.CHAT=1]="CHAT",e[e.USER=2]="USER",e[e.MESSAGE=3]="MESSAGE",e}({}),ApplicationCommandInputType=function(e){return e[e.BUILT_IN=0]="BUILT_IN",e[e.BUILT_IN_TEXT=1]="BUILT_IN_TEXT",e[e.BUILT_IN_INTEGRATION=2]="BUILT_IN_INTEGRATION",e[e.BOT=3]="BOT",e[e.PLACEHOLDER=4]="PLACEHOLDER",e}({}),ApplicationCommandOptionType=function(e){return e[e.SUB_COMMAND=1]="SUB_COMMAND",e[e.SUB_COMMAND_GROUP=2]="SUB_COMMAND_GROUP",e[e.STRING=3]="STRING",e[e.INTEGER=4]="INTEGER",e[e.BOOLEAN=5]="BOOLEAN",e[e.USER=6]="USER",e[e.CHANNEL=7]="CHANNEL",e[e.ROLE=8]="ROLE",e[e.MENTIONABLE=9]="MENTIONABLE",e[e.NUMBER=10]="NUMBER",e[e.ATTACHMENT=11]="ATTACHMENT",e}({});function buildCommands(e,t){if(e&&"string"==typeof e){if(!t||!Array.isArray(t))throw TypeError("second argument cmds must be of type array")}else throw TypeError("first argument caller must be of type string");var n=[];for(var r of t)r.type??=1,r.inputType??=1,r.id??=uuid(),r.applicationId??="-1",r.displayName??=r.name,r.displayDescription??=r.description,r.untranslatedName??=r.name,r.untranslatedDescription??=r.description,r.__UNBOUND__=!0,r.__CALLER__=e,r.options=r.options?.map(e=>({...e,displayName:e.name,displayDescription:e.description})),n.push(r);return n}function registerCommands(e,t){var n=buildCommands(e,t);Promise.resolve().then(function(){return commands}).then(({data:e})=>e.commands.push(...n))}function unregisterCommands(e){if(!e||"string"!=typeof e)throw TypeError("first argument caller must be of type string");Promise.resolve().then(function(){return commands}).then(({data:t})=>t.commands=t.commands.filter(t=>t.__CALLER__===e))}var commands$1=Object.freeze({__proto__:null,ApplicationCommandInputType:ApplicationCommandInputType,ApplicationCommandOptionType:ApplicationCommandOptionType,ApplicationCommandType:ApplicationCommandType,buildCommands:buildCommands,registerCommands:registerCommands,unregisterCommands:unregisterCommands}),settings$1=getStore("unbound"),recovery={name:"recovery",description:"Toggle recovery mode and reload the app.",execute:()=>{settings$1.toggle("recovery",!1),reload$1(!1)}},reload={name:"reload",description:"Reloads the app.",execute:()=>reload$1()};function asyncGeneratorStep$3(e,t,n,r,a,o,i){try{var l=e[o](i),s=l.value}catch(e){n(e);return}l.done?t(s):Promise.resolve(s).then(r,a)}function _async_to_generator$3(e){return function(){var t=this,n=arguments;return new Promise(function(r,a){var o=e.apply(t,n);function i(e){asyncGeneratorStep$3(o,r,a,i,l,"next",e)}function l(e){asyncGeneratorStep$3(o,r,a,i,l,"throw",e)}i(void 0)})}}function handleEvaluation(e){return _handleEvaluation.apply(this,arguments)}function _handleEvaluation(){return(_handleEvaluation=_async_to_generator$3(function*(src){var out={res:null,err:null,time:null},isAsync=src.includes("await");isAsync&&(src=`(async function() { return ${src} })()`);var start=new Date().getTime();try{out.res=eval(src),isAsync&&(out.res=yield out.res)}catch(err){out.res=err,out.err=!0}return out.time=new Date().getTime()-start,out})).apply(this,arguments)}var evaluate={name:"eval",description:"Allows you to execute code through evaluation.",options:[{name:"src",description:"Source of the code to evaluate (BE CAREFUL AS PASTING CODE FROM RANDOM PEOPLE IS DANGEROUS)",type:3,required:!0}],execute:(e,t)=>_async_to_generator$3(function*(){var n=e.find(e=>"src"===e.name).value,{res:r,err:a,time:o}=yield handleEvaluation(n),i=a?"Failed executing":"Successfully executed";console.log(r),Messages.sendBotMessage(t.channel.id,[`${i} in ${o}ms`,"```js",r?r.toString().trim():"undefined","```"].join("\n"))})()},debug={name:"debug",description:"Prints out information to help debug unbound.",execute:()=>{var e=[],t=HermesInternal.getRuntimeProperties();return e.push("**Debug Info:**"),e.push(`> **Client**: ${window.unbound.version}`),e.push(`> **Loader**: ${window.UNBOUND_LOADER?.origin??"N/A"} - ${window.UNBOUND_LOADER?.platform??"N/A"} (Version ${window.UNBOUND_LOADER?.version??"N/A"})`),e.push(`> **Discord**: ${BundleInfo.Version}`),e.push(`> **Build**: ${BundleInfo.Build} on ${BundleInfo.ReleaseChannel}`),e.push(`> **Hermes**: ${t["OSS Release Version"]}`),e.push(`> **Bytecode**: ${t["Bytecode Version"]}`),e.push(`> **Device**: ${DeviceInfo.device} (${DeviceInfo.systemVersion})`),{content:e.join("\n")}}},CoreCommands=[debug,reload,recovery,evaluate],Patcher$3=createPatcher("unbound::commands"),data$4={name:"Commands",commands:[...buildCommands("unbound",CoreCommands)]};function start$5(){Patcher$3.after(Commands,"getBuiltInCommands",(e,[t],n)=>{if(t===ApplicationCommandType.CHAT||Array.isArray(t)&&t.includes(ApplicationCommandType.CHAT)){var r=function(e){n.find(t=>t.id===e.id)||n.push(e)};for(var a of data$4.commands)r(a)}return n})}function stop$5(){Patcher$3.unpatchAll()}var commands=Object.freeze({__proto__:null,data:data$4,start:start$5,stop:stop$5}),data$3={name:"Console"},Settings$1=getStore("unbound"),Levels=function(e){return e[e.error=3]="error",e[e.info=1]="info",e[e.log=1]="log",e[e.warn=2]="warn",e[e.trace=0]="trace",e[e.debug=0]="debug",e}({});function start$4(){var e=function(e){console[e].__ORIGINAL__=console[e],console[e]=(...t)=>{for(var n=Settings$1.get("logging.depth",2),r=[],a=0,o=t.length;o>a;a++){var i=t[a],l="string"==typeof i?i:Util.inspect?.(i,{depth:n});r.push(l??i.toString())}var s=r.join(" ");addLog({message:s,level:Levels[e]}),window.nativeLoggingHook(s,Levels[e]??1)}};for(var t of["error","info","log","warn","trace","debug"])e(t)}function stop$4(){for(var e of["error","info","log","warn","trace","debug"]){var t=console[e].__ORIGINAL__;t&&(console[e]=t)}}var console$1=Object.freeze({__proto__:null,Levels:Levels,data:data$3,start:start$4,stop:stop$4}),Patcher$2=createPatcher("unbound::design"),Logger$5=createLogger("Core","Design"),data$2={name:"Design"};function start$3(){patchImageResolver(),patchThemeChacteristics()}function stop$3(){Patcher$2.unpatchAll()}function patchImageResolver(){Patcher$2.before(reactNative.Image,"render",(e,[t])=>{var n="{__path__}",{source:r}=t;"object"==typeof r&&r.uri&&r.uri.includes(n)&&(t.source={...t.source},t.source.uri=r.uri.replace(n,Documents))})}function patchThemeChacteristics(){var e=findByProps("isThemeDark","isThemeLight");if(!e)return Logger$5.error("Failed to find ThemeBooleans.");function t(e,t,n){var r=themes.entities.get(e);if(!r)return t();var a=r.instance?.type;switch(a){case"midnight":case"darker":case"amoled":return"dark"===n;case"light":return"light"===n;default:return a}}Patcher$2.instead(e,"isThemeDark",(e,n,r)=>t(n[0],()=>r.apply(e,n),"dark")),Patcher$2.instead(e,"isThemeLight",(e,n,r)=>t(n[0],()=>r.apply(e,n),"light"))}var design=Object.freeze({__proto__:null,data:data$2,start:start$3,stop:stop$3}),useStyles$1=Discord.createStyles({safeArea:{height:"auto"}}),{useSharedValue,withTiming,Easing}=Reanimated,MOUNT_CHANGE_CONFIG={duration:325,easing:Easing.inOut(Easing.cubic)};function useToastState(e){var[t,n]=react.useState(e.closing),[r,a]=react.useState(!1),o=useSettingsStore("unbound",({key:e})=>e.startsWith("toasts")),i=o.get("toasts.animations",!0),l=useSharedValue(0),s=useSharedValue(0),c=useSharedValue(.75),u=useSharedValue(0),d=useSharedValue(0),f=useSharedValue(.9*reactNative.Dimensions.get("window").width);function p(){n(!0),u.value=i?withTiming(0,MOUNT_CHANGE_CONFIG):0,l.value=i?withTiming(0,MOUNT_CHANGE_CONFIG):0,c.value=i?withTiming(.75,MOUNT_CHANGE_CONFIG):.75,s.value=i?withTiming(0,MOUNT_CHANGE_CONFIG):0,d.value=i?withTiming(-40,MOUNT_CHANGE_CONFIG):-40,setTimeout(()=>a(!0),MOUNT_CHANGE_CONFIG.duration)}return react.useEffect(()=>{i?(l.value=withTiming(1,MOUNT_CHANGE_CONFIG),d.value=withTiming(0,MOUNT_CHANGE_CONFIG),c.value=withTiming(1,MOUNT_CHANGE_CONFIG),s.value=withTiming(5,MOUNT_CHANGE_CONFIG)):(l.value=1,d.value=0,c.value=1,s.value=5);var t=e.duration??1e3*o.get("toasts.duration",0);if(0!==t){f.value=withTiming(0,{duration:t+100,easing:Easing.linear});var n=setTimeout(p,t);return()=>clearTimeout(n)}},[]),react.useEffect(()=>{r&&store$2.setState(t=>{var n={...t.toasts};return delete n[e.id],{toasts:n}})},[r]),react.useEffect(()=>{e.closing&&p()},[e.closing]),{style:{opacity:l,height:u,transform:[{scale:c,translateY:d}],marginVertical:s},properties:{opacity:l,height:u,scale:c,translateY:d,width:f,marginVertical:s},leave:p,leaving:r,closing:t}}var useStyles=Discord.createStyles({toastShadow:Theme$1.shadows.SHADOW_MEDIUM,container:{backgroundColor:Theme$1.colors.TOAST_BG,borderWidth:1,borderColor:Theme$1.colors.BORDER_STRONG,alignSelf:"center",borderRadius:18,width:"90%",maxWidth:500,position:"absolute",padding:4,marginTop:20,overflow:"hidden"},wrapper:{flex:1,flexDirection:"row",alignItems:"center",justifyContent:"center"},contentContainer:{marginLeft:12,flex:1,flexDirection:"column",justifyContent:"center"},title:{fontFamily:Constants.Fonts.PRIMARY_SEMIBOLD,color:Theme$1.colors.TEXT_NORMAL,fontSize:14},content:{fontFamily:Constants.Fonts.PRIMARY_NORMAL,color:Theme$1.colors.TEXT_MUTED,fontSize:12,height:"auto"},icon:{marginTop:10,marginLeft:12},buttons:{flexWrap:"wrap",flexDirection:"row",marginHorizontal:12,marginBottom:12,gap:5},button:{width:"45%",flexGrow:1,justifyContent:"space-between"},bar:{backgroundColor:Theme$1.colors.REDESIGN_BUTTON_PRIMARY_BACKGROUND}}),{withSpring,default:Animated}=Reanimated,{PanGestureHandler}=Gestures;function Toast(e){var{style:t,closing:n,leave:r,properties:{scale:a,height:o,width:i,translateY:l}}=useToastState(e),s=useSettingsStore("unbound",({key:e})=>e.startsWith("toasts")),c=useStyles(),[u,d]=react.useState(1),f=e=>{e.nativeEvent.translationY>-40||r()};return React.createElement(PanGestureHandler,{onGestureEvent:f},React.createElement(Animated.View,{key:e.id,style:[{...t,transform:[{scale:a},{translateY:l}]},{zIndex:10*!n}],pointerEvents:"box-none"},React.createElement(reactNative.View,{style:[c.container,c.toastShadow,{backgroundColor:withoutOpacity(c.container.backgroundColor)+unitToHex(s.get("toasts.opacity",.8))}],onLayout:({nativeEvent:e})=>{n||e.layout.height===o.value||(s.get("toasts.animations",!0)?o.value=withSpring(e.layout.height,{damping:11}):o.value=e.layout.height)}},1!==s.get("toasts.opacity",.8)&&React.createElement(BackdropFilters.BackgroundBlurFill,{blurAmount:s.get("toasts.blur",.15)}),React.createElement(reactNative.View,{style:c.wrapper},e.icon&&React.createElement(reactNative.View,{style:[c.icon,{marginVertical:10*u}]},e.tintedIcon??!0?React.createElement(TintedIcon,{source:"string"==typeof e.icon?Icons[e.icon]:e.icon}):React.createElement(reactNative.Image,{source:"string"==typeof e.icon?Icons[e.icon]:e.icon,style:{width:24,aspectRatio:1}})),React.createElement(reactNative.View,{style:c.contentContainer},e.title&&"function"==typeof e.title?react.createElement(e.title):React.createElement(reactNative.Text,{style:c.title},e.title),e.content&&"function"==typeof e.content?react.createElement(e.content):React.createElement(reactNative.Text,{style:c.content,onTextLayout:({nativeEvent:{lines:{length:e}}})=>{d(e>2?e+1:e)}},e.content)),React.createElement(reactNative.Pressable,{style:[c.icon,{marginRight:12,marginVertical:10*u}],hitSlop:10,onPress:r,onLongPress:()=>{store$2.setState(e=>{var t={...e.toasts};for(var n in t)t[n].closing=!0;return{toasts:t}})}},React.createElement(TintedIcon,{source:Icons.ic_close}))),Array.isArray(e.buttons)&&0!==e.buttons.length&&React.createElement(reactNative.View,{style:[c.buttons,{marginTop:5}]},e.buttons.map((t,n)=>React.createElement(Discord.Button,{key:`${e.id}-button-${n}`,style:c.button,variant:t.variant||"primary",size:t.size||"sm",onPress:t.onPress,iconPosition:t.iconPosition||"start",icon:t.icon||void 0,text:t.content}))),(e.duration??s.get("toasts.duration",0))>0&&React.createElement(Animated.View,{style:[{position:"absolute",bottom:0,left:0,width:i,height:3,borderRadius:1e5},c.bar]}))))}function ToastContainer(){var e=useSettingsStore("unbound",({key:e})=>"toasts.maxOnScreen"===e),{toasts:t}=store$2.useState(),n=useStyles$1(),r=e.get("toasts.maxOnScreen",3),a=react.useMemo(()=>Object.entries(t),[t]),o=react.useMemo(()=>a.sort(([,e],[,t])=>t.date-e.date).slice(0,0===r?1/0:r),[a,r]);return React.createElement(Screens.FullWindowOverlay,null,React.createElement(reactNative.SafeAreaView,{style:n.safeArea,pointerEvents:"box-none"},o.map(([e,t])=>React.createElement(Toast,{...t,key:e}))))}var Patcher$1=createPatcher("unbound::toasts"),Logger$4=createLogger("Core","Toasts"),Settings=getStore("unbound"),data$1={name:"Toasts"};function start$2(){patchToastContainer(),patchToastAPI()}function stop$2(){Patcher$1.unpatchAll()}function patchToastContainer(){var e=findByProps("ToastContainer");if(!e)return Logger$4.error("Failed to find ToastContainer component.");Patcher$1.after(e.ToastContainer,"type",(e,t,n)=>Settings.useSettingsStore(({key:e})=>e.startsWith("toasts")).get("toasts.enabled",!0)?React.createElement(ToastContainer,null):n)}function patchToastAPI(){var e=find$1(e=>e.open&&e.close&&2===Object.keys(e).length,{lazy:!0});if(!e||!e.open)return Logger$4.error("Failed to find Toaster API.");Patcher$1.instead(e,"open",(e,t,n)=>{if(!Settings.get("toasts.enabled",!0))return n.apply(e,t);var[r]=t;return r.title=r.content,r.tintedIcon=!1,delete r.content,r.duration??=5e3,showToast(r)})}var toasts=Object.freeze({__proto__:null,data:data$1,start:start$2,stop:stop$2});function asyncGeneratorStep$2(e,t,n,r,a,o,i){try{var l=e[o](i),s=l.value}catch(e){n(e);return}l.done?t(s):Promise.resolve(s).then(r,a)}function _async_to_generator$2(e){return function(){var t=this,n=arguments;return new Promise(function(r,a){var o=e.apply(t,n);function i(e){asyncGeneratorStep$2(o,r,a,i,l,"next",e)}function l(e){asyncGeneratorStep$2(o,r,a,i,l,"throw",e)}i(void 0)})}}var Patcher=createPatcher("unbound::badges"),Logger$3=createLogger("Core","Badges"),data={name:"Badges"},cache={user:{},badges:{}};function start$1(){for(var e of findByName("ProfileBadges",{all:!0,interop:!1}))Patcher.after(e,"default",(e,[{user:t,isUnbound:n,style:r,...a}],o)=>{var[i,l]=react.useState({data:[]});if(n||(react.useEffect(()=>{try{fetchUserBadges(t.id).then(e=>l({data:e}))}catch(e){Logger$3.error(`Failed to request/parse badges for ${t.id}`)}},[]),!i.data.length))return o;if(o){var s=i.data.map(e=>makeBadge(e,r));o?.props.badges?o.props.badges.push(...s):o?.props.children&&o?.props.children.push(...s)}})}function stop$1(){Patcher.unpatchAll()}function fetchUserBadges(e){return _fetchUserBadges.apply(this,arguments)}function _fetchUserBadges(){return(_fetchUserBadges=_async_to_generator$2(function*(e){if(cache.user[e]?.date&&Date.now()-cache.user[e].date<Times.HOUR)return cache.user[e].badges;var t=yield fetch(SocialLinks.Badges+e+".json",{headers:{"Cache-Control":"no-cache"}}).then(e=>e.json()).catch(()=>[]);return Array.isArray(t)&&(cache.user[e]={badges:t,date:Date.now()}),t})).apply(this,arguments)}var makeBadge=(e,t)=>React.createElement(reactNative.View,{unbound:!0,key:e,style:{alignItems:"center",flexDirection:"row",justifyContent:"flex-end"}},React.createElement(Badge,{type:e,size:Array.isArray(t)?t.find(e=>e.paddingVertical&&e.paddingHorizontal)?18:24:20,margin:Array.isArray(t)?4:8})),Badge=({type:e,size:t,margin:n})=>{var[r,a]=react.useState(null);if(react.useEffect(()=>{try{fetchBadge(e).then(a)}catch(t){Logger$3.error(`Failed to get badge data for ${e}.`,t.message)}},[]),!r?.url)return null;var o={image:{width:t,height:t,resizeMode:"contain",marginLeft:n,marginRight:n+1}},i=r.url[Theme.theme]??r.url.dark;return i?React.createElement(reactNative.TouchableOpacity,{onPress:()=>showToast({title:r.name,icon:{uri:i},tintedIcon:!1})},React.createElement(reactNative.Image,{style:o.image,source:{uri:i}})):null};function fetchBadge(e){return _fetchBadge.apply(this,arguments)}function _fetchBadge(){return(_fetchBadge=_async_to_generator$2(function*(e){if(cache.badges[e]?.date&&Date.now()-cache.badges[e].date<Times.HOUR)return cache.badges[e].data;var t=yield fetch(SocialLinks.Badges+`data/${e}.json`,{headers:{"Cache-Control":"no-cache"}}).then(e=>e.json()).catch(()=>{});return t?.url&&(cache.badges[e]={data:t,date:Date.now()}),t})).apply(this,arguments)}var badges=Object.freeze({__proto__:null,data:data,start:start$1,stop:stop$1}),instances=Object.freeze({__proto__:null,Badges:badges,Commands:commands,Console:console$1,DebugBridge:debugBridge,Design:design,ErrorBoundary:errorBoundary,LocaleFix:localeFix,Onboarding:onboarding,Settings:settings$2,StaffMode:staffMode,Toasts:toasts,Tracking:tracking});function asyncGeneratorStep$1(e,t,n,r,a,o,i){try{var l=e[o](i),s=l.value}catch(e){n(e);return}l.done?t(s):Promise.resolve(s).then(r,a)}function _async_to_generator$1(e){return function(){var t=this,n=arguments;return new Promise(function(r,a){var o=e.apply(t,n);function i(e){asyncGeneratorStep$1(o,r,a,i,l,"next",e)}function l(e){asyncGeneratorStep$1(o,r,a,i,l,"throw",e)}i(void 0)})}}var started=new Set,Logger$2=createLogger("Core","Built-Ins"),mdls=Object.values(instances);function initialize$1(){for(var e of mdls){var t=e.data.shouldInitialize??!0;("function"==typeof t?t():t)&&start(e)}}function shutdown$1(){var e=function(e){var t=mdls.find(t=>t.data.name===e);if(!t)return started.delete(e),"continue";stop(t)};for(var t of started)e(t)}function start(e){return _start.apply(this,arguments)}function _start(){return(_start=_async_to_generator$1(function*(e){if(!started.has(e.data.name))try{yield e.start?.(),started.add(e.data.name),Logger$2.success(`Started ${e.data.name}.`)}catch(t){started.delete(e.data.name),Logger$2.error(`Failed to initialize built-in ${e.data.name}: ${t.message}`)}})).apply(this,arguments)}function stop(e){return _stop.apply(this,arguments)}function _stop(){return(_stop=_async_to_generator$1(function*(e){if(started.has(e.data.name))try{yield e.stop?.(),started.delete(e.data.name),Logger$2.success(`Stopped ${e.data.name}.`)}catch(t){started.add(e.data.name),Logger$2.error(`Failed to shutdown built-in ${e.data.name}: ${t.message}`)}})).apply(this,arguments)}function onSettingsChange(e){return _onSettingsChange.apply(this,arguments)}function _onSettingsChange(){return(_onSettingsChange=_async_to_generator$1(function*({store:e,key:t}){if("unbound"===e){for(var n of mdls)if(n.data.settings){var r=n.data.settings.monitor;if(r?.length&&r.includes(t)){started.has(n.data.name)&&(yield stop(n));var a=n.data.shouldInitialize??!0;("function"==typeof a?a():a)&&start(n)}}}})).apply(this,arguments)}Storage.on("changed",onSettingsChange);var BuiltIns={initialize:initialize$1,shutdown:shutdown$1},exports$1=Object.freeze({__proto__:null,CACHE_KEY:CACHE_KEY,addListener:addListener,api:api,bulk:bulk,common:common,components:components,data:data$c,filters:filters,find:find$1,findByName:findByName,findByProps:findByProps,findByPrototypes:findByPrototypes,findLazy:findLazy,findStore:findStore,initializeModule:initializeModule,off:off,on:on,removeListener:removeListener,stores:stores}),utilities=Object.freeze({__proto__:null,Semver:semver,animate:animate,attempt:attempt,capitalize:capitalize,chunkArray:chunkArray,createTimeoutSignal:createTimeoutSignal,debounce:debounce,download:download,findInReactTree:findInReactTree,findInTree:findInTree,forceRender:forceRender,isEmpty:isEmpty,mergeStyles:mergeStyles,noop:noop,unitToHex:unitToHex,uuid:uuid,withoutOpacity:withoutOpacity,workletize:workletize}),Logger$1=createLogger("API","Settings"),store={get sections(){return data$6.sections}};function validateEntry(e){return Logger$1.info("hi"),!0}function registerSettings(...e){var t=e.filter(e=>validateEntry());Dispatcher.dispatch({type:DispatchTypes.REGISTER_SETTINGS_ENTRIES,entries:t})}var settings=Object.freeze({__proto__:null,registerSettings:registerSettings,store:store}),version="6e97219",API=Object.freeze({__proto__:null,assets:assets$1,commands:commands$1,dialogs:dialogs$1,fs:fs$1,i18n:i18n,managers:managers,metro:exports$1,native:native,newManagers:managers,patcher:patcher,settings:settings,storage:storage$1,toasts:toasts$1,utilities:utilities,version:version});function asyncGeneratorStep(e,t,n,r,a,o,i){try{var l=e[o](i),s=l.value}catch(e){n(e);return}l.done?t(s):Promise.resolve(s).then(r,a)}function _async_to_generator(e){return function(){var t=this,n=arguments;return new Promise(function(r,a){var o=e.apply(t,n);function i(e){asyncGeneratorStep(o,r,a,i,l,"next",e)}function l(e){asyncGeneratorStep(o,r,a,i,l,"throw",e)}i(void 0)})}}var Logger=createLogger("Core");function initialize(){return _initialize.apply(this,arguments)}function _initialize(){return(_initialize=_async_to_generator(function*(){try{yield BuiltIns.initialize()}catch(e){Logger.error("Failed to apply built-ins:",e.message)}window.unbound??=API,plugins.initialize(),themes.initialize()})).apply(this,arguments)}function shutdown(){return _shutdown.apply(this,arguments)}function _shutdown(){return(_shutdown=_async_to_generator(function*(){Patcher$a.unpatchAll(),plugins.shutdown(),themes.shutdown(),BuiltIns.shutdown()})).apply(this,arguments)}var core={initialize,shutdown},core$1=Object.freeze({__proto__:null,default:core,initialize:initialize,shutdown:shutdown})}(window.ReactNative,window.React)}catch(error){alert("Unbound failed to initialize: "+error.stack)}})();
