try{var Type,ws,ManagerType,Levels,find$2=e=>Object.values(window.modules).find(t=>t?.publicModule.exports?.[e])?.publicModule?.exports;window.React=find$2("createElement"),window.ReactNative=find$2("AppState"),Promise.resolve().then(function(){return components});try{Promise.resolve().then(function(){return index$1}).then(e=>e.initialize())}catch(e){alert("Enmity failed to initialize: "+e.message)}}catch(e1){alert("Enmity failed to initialize: "+e1.message)}!function(e){e.Before="before",e.Instead="instead",e.After="after"}(Type||(Type={}));var patches=[];function before(e,t,r,n,o=!1){return patch(e,t,r,n,Type.Before,o)}function instead(e,t,r,n,o=!1){return patch(e,t,r,n,Type.Instead,o)}function after(e,t,r,n,o=!1){return patch(e,t,r,n,Type.After,o)}function createPatcher(e){return{getPatchesByCaller,before:(t,r,n,o=!1)=>before(e,t,r,n,o),instead:(t,r,n,o=!1)=>instead(e,t,r,n,o),after:(t,r,n,o=!1)=>after(e,t,r,n,o),unpatchAll:()=>unpatchAll(e)}}function getPatchesByCaller(e){if(!e)return[];var t=[];for(var r of patches)for(var n of[...r.patches.before,...r.patches.instead,...r.patches.after])e&&n.caller!==e||t.push(n);return t}function unpatchAll(e){var t=getPatchesByCaller(e);if(t.length)for(var r of t)r.unpatch()}function override(e){return function(){if(!e?.patches?.before.length&&!e?.patches?.after.length&&!e?.patches?.instead.length&&!patches.find(t=>t.mdl===e.mdl&&t.func===e.func))return e.unpatch(),new.target?new e.original(...arguments):e.original.apply(this,arguments);for(var t,r=arguments,n=[...e.patches.before],o=0;o<n.length;o++){var a=n[o];if(a)try{var i=a.callback(this,r,e.original.bind(this));Array.isArray(i)&&(r=i),a.once&&a.unpatch()}catch(s){console.error(`Could not fire before patch for ${e.func} of ${a.caller}`,s)}}var c=[...e.patches.instead];if(c.length)for(var l=0;l<c.length;l++){var u=c[l];if(u)try{var f=u.callback(this,r,e.original.bind(this));void 0!==f&&(t=f),u.once&&u.unpatch()}catch(d){console.error(`Could not fire instead patch for ${e.func} of ${u.caller}`,d)}}else t=new.target?new e.original(...r):e.original.apply(this,r);for(var p=[...e.patches.after],h=0;h<p.length;h++){var m=p[h];if(m)try{var g=m.callback(this,r,t,e=>t=e);void 0!==g&&(t=g),m.once&&m.unpatch()}catch(y){console.error(`Could not fire after patch for ${e.func} of ${m.caller}`,y)}}return t}}function push(e,t){"renderPatched"===t&&(e[t]=function(...t){return new.target?new e(...t):e.apply(this,t)});var r={mdl:e,func:t,original:e[t],unpatch(){"renderPatched"===r.func?delete r.mdl.renderPatched:r.mdl[r.func]=r.original,r.patches={before:[],after:[],instead:[]}},patches:{before:[],after:[],instead:[]}},n=override(r);e[t]=n;var o=Object.getOwnPropertyDescriptors(r.original);return delete o.length,Object.defineProperties(e[t],{...o,toString:{value:()=>r.original.toString(),configurable:!0,enumerable:!1},__original:{value:r.original,configurable:!0,enumerable:!1}}),patches.push(r),r}function get$1(e,t){return patches.find(r=>r.mdl===e&&r.func===t)||push(e,t)}function patch(e,t,r,n,o=Type.After,a=!1){if(e&&"string"==typeof e){if(t&&["function","object"].includes(typeof t)){if(r&&"string"==typeof r){if(n&&"function"==typeof n){if(!o||"string"!=typeof o||!["after","before","instead"].includes(o))throw TypeError('fifth argument "type" must be of type string and any of the three: after, before, instead')}else throw TypeError('fourth argument "callback" must be of type function')}else throw TypeError('third argument "func" must be of type string')}else throw TypeError('second argument "mdl" must be of type function or object')}else throw TypeError('first argument "caller" must be of type string');var i=get$1(t,r),s={caller:e,once:a,type:o,id:i.patches?.[o]?.length??0,callback:n,unpatch(){var e=i.patches?.[o].findIndex(e=>e.id===s.id);if(~e&&i.patches?.[o].splice(e,1),!i.patches?.before.length&&!i.patches?.after.length&&!i.patches?.instead.length){var n=patches.findIndex(e=>e.mdl==t&&e.func==r);n&&(patches[n]?.unpatch(),patches.splice(n,1))}}};return i.patches[o]??=[],i.patches[o].push(s),s.unpatch}var Patcher$3={createPatcher,before,instead,after,unpatchAll,patches},patcher=Object.freeze({__proto__:null,get Type(){return Type},patches:patches,before:before,instead:instead,after:after,createPatcher:createPatcher,getPatchesByCaller:getPatchesByCaller,unpatchAll:unpatchAll,default:Patcher$3}),Patcher$2=createPatcher("components"),unknown=new Set,named=new Map;function traverse(e){if(e?.type&&"string"!=typeof e.type){var t=e.type;t.displayName?add$1(t.displayName,t):t.name?add$1(t.name,t):t.type?.name?add$1(t.type.name,t):t.type?.displayName?add$1(t.type.displayName,t):t.render?.displayName?add$1(t.render.displayName,t):t.render?.name?add$1(t.render.name,t):unknown.add(t);var{children:r}=e.props||{};for(var n of r?Array.isArray(r)?r:[r]:[])traverse(n)}}for(var method of(Patcher$2.before(window.React,"createElement",(e,t)=>{var[r]=t;return r&&traverse(r),"function"==typeof r&&void 0!==r.renderPatched&&(t[0]=r.renderPatched),t}),Patcher$2.after(window.React,"createElement",(e,t,r)=>{r&&traverse(r)}),["forEach","map"]))Patcher$2.after(window.React.Children,method,(e,t,r)=>{var[n]=t;for(var o of n??[])traverse(o);return r});function add$1(e,t){named.get(e)||named.set(e,t)}function getAll(){return{named:Object.fromEntries(named.entries()),unknown:[...unknown.values()]}}function getByName$1(e){return named.get(e)}var components=Object.freeze({__proto__:null,add:add$1,getAll:getAll,getByName:getByName$1});function findInTree(e={},t=e=>e,{ignore:r=[],walkable:n=[],maxProperties:o=100}={}){for(var a=[e],i=function(...e){try{return Reflect.apply(t,this,e)}catch{return!1}};a.length&&o;){var s=a.shift();if(i(s))return s;if(Array.isArray(s))a.push(...s);else if("object"==typeof s&&null!==s){if(n.length)for(var c in s){var l=s[c];~n.indexOf(c)&&!~r.indexOf(c)&&a.push(l)}else for(var u in s){var f=s[u];s&&~r.indexOf(u)||a.push(f)}}o--}}function findInReactTree(e,t=e=>e,r={}){return findInTree(e,t,{walkable:["props","children"],...r})}var overrides={useMemo:e=>e(),useState:e=>[e,()=>void 0],useReducer:e=>[e,()=>void 0],useEffect(){},useLayoutEffect(){},useRef:()=>({current:null}),useCallback:e=>e,useImperativeHandle(){},useContext:e=>e._currentValue},keys=Object.keys(overrides);function forceRender(e){return(...t)=>{var r=window.React.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentDispatcher.current,n=keys.map(e=>[e,r[e]]);Object.assign(r,overrides);var o={rendered:null,error:null};try{o.rendered=e(...t)}catch(a){o.error=a}if(Object.assign(r,Object.fromEntries(n)),o.error)throw o.error;return o.rendered}}function capitalize(e){if("string"!=typeof e)throw TypeError("capitalize's first argument must be of type string");return e.charAt(0).toUpperCase()+e.slice(1)}function debounce(e,t){var r;return function(...n){clearTimeout(r),r=setTimeout(()=>e.apply(this,n),t)}}var Colors={red:"\x1b[31m",reset:"\x1b[0m",green:"\x1b[32m",gray:"\x1b[90m",blue:"\x1b[34m",yellow:"\x1b[33m"};function colorize(e,t="reset"){return Colors[t.toLowerCase()]+e+Colors.reset}function attempt(e){try{e()}catch{}}function isEmpty(e){for(var t in e)return!1;return!0}function noop(...e){}function uuid(e=30){var t="";do{var r=16*Math.random()|0;t+=(12==t.length?4:16==t.length?3&r|8:r).toString(16)}while(t.length<e);return t}function byProps(...e){return t=>{for(var r=0,n=e.length;r<n;r++)if(void 0===t[e[r]])return!1;return!0}}function byPrototypes(...e){return t=>{if(!t.prototype)return!1;for(var r=0,n=e.length;r<n;r++)if(void 0===t.prototype[e[r]])return!1;return!0}}function byDisplayName(e){return t=>t.displayName===e}function byName(e){return t=>t.name===e}function byStore(e,t=!0){return r=>r._dispatcher&&r.getName?.()===(t?e+"Store":e)}var Filters={byProps,byDisplayName,byPrototypes,byName,byStore},_typeof$6=function(e){return e&&"undefined"!=typeof Symbol&&e.constructor===Symbol?"symbol":typeof e},data$2={cache:[],patchedMoment:!1};function find$1(e,t={}){var r=function(e){if(!modules[e].isInitialized)try{__r(e)}catch{return deenumerate(e),"continue"}var t=modules[e].publicModule.exports;if(!t||t===window||null===t[Symbol()]||isEmpty(t))return deenumerate(e),"continue";if(!data$2.patchedMoment&&t.defineLocale){var r=t.defineLocale,a=t.locale();t.defineLocale=function(...e){try{r.apply(this,e),t.locale(a)}catch(n){console.error("Failed to define moment locale:",n.message)}},data$2.patchedMoment=!0}if(u(t,e)){data$2.cache[e]=t;var i=c?modules[e]:t;if(!n)return{v:i};l.found.push(i)}if(s&&t.default&&u(t.default,e)){data$2.cache[e]=t;var f=c?modules[e]:o?t.default:t;if(!n)return{v:f};l.found.push(f)}};if(!e)throw Error("You must provide a filter to search by.");var{all:n=!1,interop:o=!0,cache:a=!0,initial:i=null,esModules:s=!0,raw:c=!1}=t,l={found:i??[],errored:!1},u=(t,r)=>{try{return e(t,r)}catch(n){if(l.errored)return;l.errored=!0,console.error("Search filter threw an error, degrading performance.","This will create a bad experience for the user including lag spikes, a slow startup, etc.","Please fix this as soon as possible.","\n",n.stack)}},f=a?data$2.cache:modules;for(var d in f){var p=r(d);if("object"===_typeof$6(p))return p.v}return!a||n||l.found.length?a&&n?find$1(e,Object.assign(t,{cache:!1,initial:l.found})):n?l.found:null:find$1(e,Object.assign(t,{cache:!1}))}function bulk(...e){var t=Array(e.length);return find$1((r,n)=>{for(var o=0,a=e.length;o<a;o++){var i=e[o];i.filter&&(i.filter(r,n)&&(t[o]=r),void 0!==r.default&&i.filter(r.default,n)&&(t[o]=i.interop??!0?r.default:r))}return t.filter(String).length===search.length},{interop:!1,esModules:!1}),t}function findByProps(...e){var[t,r]=parseOptions(e);return search(t,r,"byProps")}function findByPrototypes(...e){var[t,r]=parseOptions(e);return search(t,r,"byPrototypes")}function findStore(...e){var[[t],{short:r=!0,...n}]=parseOptions(e);return search([t,r],n,"byStore")}function findByName(...e){console.log(...e);var[t,r]=parseOptions(e);return search(t,r,"byName")}function search(e,t,r){if(t.lazy){var n;return new Proxy({__METRO_LAZY__:!0,get module(){return n}},{get(o,a){if(a&&"string"==typeof a)return(n??=search(e,Object.assign(t,{lazy:!1}),r),"module"===a)?n:n?.[a]},set:(o,a,i)=>Object.defineProperty((n??=search(e,Object.assign(t,{lazy:!1}),r))??{},a,{value:i,writable:!0,configurable:!0})})}if("string"==typeof r&&(r=Filters[r]),r)return t.bulk?bulk(...e.map(e=>!Array.isArray(e)&&"object"==typeof e&&e.params?{filter:r(...e.params),...e}:{filter:r(...e),interop:!0})):find$1(r(...e),t)}function parseOptions(e,t=e=>"object"==typeof e&&!Array.isArray(e),r={}){return[e,t(e[e.length-1])?e.pop():r]}function deenumerate(e){Object.defineProperty(modules,e,{value:modules[e],enumerable:!1,configurable:!0,writable:!0})}var Modules=Object.freeze({__proto__:null,find:find$1,bulk:bulk,findByProps:findByProps,findByPrototypes:findByPrototypes,findStore:findStore,findByName:findByName}),Patcher$1=createPatcher("no-track"),data$1={id:"misc.anti-track",default:!0};function initialize$3(){var[e,t,r]=findByProps({params:["trackWithMetadata"]},{params:["AnalyticsActionHandlers"]},{params:["encodeProperties","track"]},{bulk:!0});attempt(()=>Patcher$1.instead(e,"trackWithMetadata",noop)),attempt(()=>Patcher$1.instead(t.AnalyticsActionHandlers,"handleConnectionClosed",noop)),attempt(()=>Patcher$1.instead(t.AnalyticsActionHandlers,"handleConnectionOpen",noop)),attempt(()=>Patcher$1.instead(t.AnalyticsActionHandlers,"handleFingerprint",noop)),attempt(()=>Patcher$1.instead(t.AnalyticsActionHandlers,"handleTrack",noop)),attempt(()=>Patcher$1.instead(r,"track",noop))}function shutdown$3(){Patcher$1.unpatchAll()}var antiTrack=Object.freeze({__proto__:null,data:data$1,initialize:initialize$3,shutdown:shutdown$3}),Flux=findByProps("Store","connectStores",{lazy:!0}),Moment=findByProps("isMoment"),ReactNative=window.ReactNative,React=window.React,Chroma=window.Chroma,StyleSheet=findByProps("createThemedStyleSheet",{lazy:!0}),Constants=findByProps("API_HOST","Endpoints",{lazy:!0}),Dispatcher=findByProps("_dispatch",{lazy:!0}),Theme$1=findByProps("colors","meta",{lazy:!0}),REST=findByProps("getAPIBaseURL",{lazy:!0}),i18n$1=findByProps("Messages",{lazy:!0}),Common=Object.freeze({__proto__:null,Flux:Flux,Moment:Moment,ReactNative:ReactNative,React:React,Chroma:Chroma,StyleSheet:StyleSheet,Constants:Constants,Dispatcher:Dispatcher,Theme:Theme$1,REST:REST,i18n:i18n$1});function _checkPrivateRedeclaration(e,t){if(t.has(e))throw TypeError("Cannot initialize the same private elements twice on an object")}function _classApplyDescriptorGet(e,t){return t.get?t.get.call(e):t.value}function _classCallCheck$6(e,t){if(!(e instanceof t))throw TypeError("Cannot call a class as a function")}function _classExtractFieldDescriptor(e,t,r){if(!t.has(e))throw TypeError("attempted to "+r+" private field on non-instance");return t.get(e)}function _classPrivateFieldGet(e,t){var r=_classExtractFieldDescriptor(e,t,"get");return _classApplyDescriptorGet(e,r)}function _classPrivateFieldInit(e,t,r){_checkPrivateRedeclaration(e,t),t.set(e,r)}var _listeners=new WeakMap,EventEmitter=function(){function e(){_classCallCheck$6(this,e),_classPrivateFieldInit(this,_listeners,{writable:!0,value:{}})}var t=e.prototype;return t.emit=function(e,t=null){if(_classPrivateFieldGet(this,_listeners)[e])for(var r of _classPrivateFieldGet(this,_listeners)[e])try{r(t)}catch(n){console.error(`Failed to fire event listener for ${e}:`,n.message)}},t.on=function(e,t){this.addListener(e,t)},t.off=function(e,t){this.removeListener(e,t)},t.addListener=function(e,t){_classPrivateFieldGet(this,_listeners)[e]??=new Set,_classPrivateFieldGet(this,_listeners)[e].add(t)},t.removeListener=function(e,t){_classPrivateFieldGet(this,_listeners)[e]&&(_classPrivateFieldGet(this,_listeners)[e].delete(t),_classPrivateFieldGet(this,_listeners)[e].size||delete _classPrivateFieldGet(this,_listeners)[e])},e}(),{DCDFileManager:DCDFileManager$1}=ReactNative.NativeModules,Events=new EventEmitter,settings$2=globalThis.ENMITY_SETTINGS??{},on=Events.on.bind(Events),off=Events.off.bind(Events);function get(e,t,r){return settings$2[e]?.[t]??r}function set(e,t,r){settings$2[e]??={},settings$2[e][t]=r,Events.emit("changed",{store:e,key:t,value:r}),Events.emit("set",{store:e,key:t,value:r})}function toggle(e,t,r){settings$2[e]??={};var n=settings$2[e][t]??r;settings$2[e][t]=!n,Events.emit("changed",{store:e,key:t,value:!n}),Events.emit("toggled",{store:e,key:t,prev:n,value:!n})}function remove$4(e,t){delete settings$2[e][t],isEmpty(settings$2[e])&&delete settings$2[e],Events.emit("changed",{store:e,key:t,value:void 0}),Events.emit("removed",{store:e,key:t})}function getStore(e){return{set:(t,r)=>set(e,t,r),get:(t,r)=>get(e,t,r),toggle:(t,r)=>toggle(e,t,r),remove:t=>remove$4(e,t),useSettingsStore:()=>useSettingsStore(e)}}function useSettingsStore(e){var[,t]=React.useState({});return React.useEffect(()=>{function r(r){r.store===e&&t({})}return Events.on("changed",r),()=>void Events.off("changed",r)},[]),getStore(e)}Events.on("changed",debounce(()=>{var e=JSON.stringify(settings$2),t=ReactNative.Platform.select({ios:"Documents/Enmity",default:"Enmity"})+"/settings.json";DCDFileManager$1.writeFile("documents",t,e,"utf8")},250));var Storage={useSettingsStore,getStore,get,set,remove:remove$4,on,off},storage=Object.freeze({__proto__:null,settings:settings$2,on:on,off:off,get:get,set:set,toggle:toggle,remove:remove$4,getStore:getStore,useSettingsStore:useSettingsStore,default:Storage});function log(...e){return console.log("\xbb",...e)}function error(...e){return console.error("\xbb",...e)}function success(...e){return console.log("\xbb",...e)}function warn(...e){return console.warn("\xbb",...e)}function debug$1(...e){return console.debug("\xbb",...e)}function info(...e){return console.info("\xbb",...e)}function createLogger(...e){var t=e.join(" â†’ ")+":";return{log:(...e)=>log(t,...e),error:(...e)=>error(t,...e),success:(...e)=>success(t,...e),warn:(...e)=>warn(t,...e),debug:(...e)=>debug$1(t,...e),info:(...e)=>info(t,...e)}}var Logger$3=createLogger("Debug","WebSocket"),data={id:"dev.debugBridge",settings:["dev.debugBridgeHost"],default:!1};function initialize$2(isReconnect=!1){var settings=getStore("enmity");try{ws=new WebSocket(`ws://${settings.get("dev.debugBridgeHost","192.168.0.35:9090")}`)}catch(e){alert("Failed to connect to the debug websocket. Make sure the host is reachable."),Logger$3.error(e.message)}ws?.addEventListener("open",()=>{Logger$3.success(isReconnect?"Reconnected.":"Connected.")}),ws?.addEventListener("message",message=>{try{Logger$3.log(eval(message.data))}catch(e){Logger$3.error(e)}}),globalThis._nativeLoggingHook=nativeLoggingHook,globalThis.nativeLoggingHook=function(e,t){return ws?.readyState===WebSocket.OPEN&&ws.send(JSON.stringify({level:t,message:e})),globalThis._nativeLoggingHook.apply(this,arguments)};var{remove}=ReactNative.AppState?.addEventListener("change",e=>{switch(e){case"active":if(ws||ws?.readyState===WebSocket.OPEN)return;remove(),initialize$2(!0);break;case"background":shutdown$2()}})}function shutdown$2(){globalThis._nativeLoggingHook&&(globalThis.nativeLoggingHook=globalThis._nativeLoggingHook),ws?.readyState===WebSocket.OPEN&&(ws.close(),ws=null)}var debug=Object.freeze({__proto__:null,data:data,get ws(){return ws},initialize:initialize$2,shutdown:shutdown$2}),instances=Object.freeze({__proto__:null,AntiTrack:antiTrack,Debug:debug}),Logger$2=createLogger("Core","Built-Ins"),settings$1=Storage.getStore("enmity"),started=new Set;function initialize$1(){for(var e in instances){var t=instances[e];settings$1.get(t.data.id,t.data.default??!0)&&start(e)}}function shutdown$1(){for(var e of started)stop(e)}function start(e){if(instances[e]&&!started.has(e)){var t=instances[e];try{t.initialize?.(),started.add(e)}catch(r){started.delete(e),Logger$2.error(`Failed to initialize built-in ${e}:`,r.message)}}}function stop(e){if(instances[e]&&started.has(e)){var t=instances[e];try{t.shutdown?.(),started.delete(e)}catch(r){started.add(e),Logger$2.error(`Failed to shutdown built-in ${e}:`,r.message)}}}function onSettingsChange({store:e,key:t,value:r}){if("enmity"===e)for(var n in instances){var o=instances[n];o.data.id===t?(r?start:stop)(n):o.data.settings?.includes(t)&&started.has(n)&&(stop(n),start(n))}}Storage.on("changed",onSettingsChange);var BuiltIns={initialize:initialize$1,shutdown:shutdown$1,start,stop},Guilds=findStore("Guild",{lazy:!0}),Theme=findStore("Theme",{lazy:!0}),Users=findStore("User",{lazy:!0}),Stores=Object.freeze({__proto__:null,Guilds:Guilds,Theme:Theme,Users:Users}),Themes$3=findByProps("updateTheme","overrideTheme",{lazy:!0}),Dialog=findByProps("show","close","openLazy",{lazy:!0}),Profiles=findByProps("showUserProfile",{lazy:!0}),UI=Object.freeze({__proto__:null,Themes:Themes$3,Dialog:Dialog,Profiles:Profiles});function apply$3(){Dispatcher?.subscribe&&Dispatcher.subscribe("CONNECTION_OPEN",handler)}function remove$3(){Dispatcher?.subscribe&&Dispatcher.unsubscribe("CONNECTION_OPEN",handler)}function handler(){Themes$3.overrideTheme(Theme.theme)}var themeFix=Object.freeze({__proto__:null,apply:apply$3,remove:remove$3}),Native=findByProps("Button","View","Text",{lazy:!0}),Forms=findByProps("Form","FormSection",{lazy:!0}),SVG=findByProps("Svg","Path",{lazy:!0}),Search=findByName("StaticSearchBarContainer"),Media=findByProps("openMediaModal"),Navigation=findByProps("useNavigation",{lazy:!0}),Components=Object.freeze({__proto__:null,Native:Native,Forms:Forms,SVG:SVG,Search:Search,Media:Media,Navigation:Navigation}),Invite="enmity",Links={GitHub:"https://github.com/enmity-mod",Twitter:"https://twitter.com/EnmityApp"},Screens={General:"ENMITY_GENERAL",Plugins:"ENMITY_PLUGINS",Themes:"ENMITY_THEMES",Updater:"ENMITY_UPDATER",Custom:"CUSTOM"},assets=new Set,registry=findByProps("registerAsset");Patcher$3.after("enmity-assets",registry,"registerAsset",(e,[t],r)=>{Object.assign(t,{id:r}),assets.add(t)});for(var id=1;;id++){var asset=registry.getAssetByID(id);if(!asset)break;assets.has(asset)||(Object.assign(asset,{id}),assets.add(asset))}function find(e){return Object.values(assets).find(e)}function getByName(e,t="png"){return[...assets].find(r=>r.name===e&&r.type===t)}function getByID(e){return registry.getAssetByID(e)}function getIDByName(e,t="png"){return getByName(e,t)?.id}var Icons=new Proxy({},{get:(e,t)=>getIDByName(t)}),assets$1={assets,getByName,getByID,getIDByName},assets$2=Object.freeze({__proto__:null,assets:assets,registry:registry,find:find,getByName:getByName,getByID:getByID,getIDByName:getIDByName,Icons:Icons,default:assets$1});function _extends$2(){return(_extends$2=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}var{colors:colors$5}=Theme$1,styles$5=StyleSheet.createThemedStyleSheet({icon:{color:colors$5.INTERACTIVE_NORMAL,opacity:.75,marginLeft:.5}});function palette({height:e,width:t,color:r=styles$5.icon.color,...n}){return React.createElement(SVG.Svg,_extends$2({viewBox:"0 0 24 24",style:{height:e,width:t,...styles$5.icon,color:r},fill:"currentColor"},n),React.createElement(SVG.Path,{d:"M0 0h24v24H0z",fill:"none"}),React.createElement(SVG.Path,{d:"M12 3c-4.97 0-9 4.03-9 9s4.03 9 9 9c.83 0 1.5-.67 1.5-1.5 0-.39-.15-.74-.39-1.01-.23-.26-.38-.61-.38-.99 0-.83.67-1.5 1.5-1.5H16c2.76 0 5-2.24 5-5 0-4.42-4.03-8-9-8zm-5.5 9c-.83 0-1.5-.67-1.5-1.5S5.67 9 6.5 9 8 9.67 8 10.5 7.33 12 6.5 12zm3-4C8.67 8 8 7.33 8 6.5S8.67 5 9.5 5s1.5.67 1.5 1.5S10.33 8 9.5 8zm5 0c-.83 0-1.5-.67-1.5-1.5S13.67 5 14.5 5s1.5.67 1.5 1.5S15.33 8 14.5 8zm3 4c-.83 0-1.5-.67-1.5-1.5S16.67 9 17.5 9s1.5.67 1.5 1.5-.67 1.5-1.5 1.5z"}))}function _extends$1(){return(_extends$1=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}var{colors:colors$4}=Theme$1,styles$4=StyleSheet.createThemedStyleSheet({icon:{color:colors$4.INTERACTIVE_NORMAL,opacity:.75,marginLeft:.5}});function puzzle({height:e,width:t,color:r=styles$4.icon.color,...n}){return React.createElement(SVG.Svg,_extends$1({viewBox:"0 0 24 24",style:{height:e,width:t,...styles$4.icon,color:r},fill:"currentColor"},n),React.createElement(SVG.Path,{d:"M0 0h24v24H0z",fill:"none"}),React.createElement(SVG.Path,{d:"M20.5 11H19V7c0-1.1-.9-2-2-2h-4V3.5C13 2.12 11.88 1 10.5 1S8 2.12 8 3.5V5H4c-1.1 0-1.99.9-1.99 2v3.8H3.5c1.49 0 2.7 1.21 2.7 2.7s-1.21 2.7-2.7 2.7H2V20c0 1.1.9 2 2 2h3.8v-1.5c0-1.49 1.21-2.7 2.7-2.7 1.49 0 2.7 1.21 2.7 2.7V22H17c1.1 0 2-.9 2-2v-4h1.5c1.38 0 2.5-1.12 2.5-2.5S21.88 11 20.5 11z"}))}var Invites=findByProps("acceptInviteAndTransitionToInviteChannel",{lazy:!0}),Actions=Object.freeze({__proto__:null,Invites:Invites});function _assertThisInitialized$5(e){if(void 0===e)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function _classCallCheck$5(e,t){if(!(e instanceof t))throw TypeError("Cannot call a class as a function")}function _getPrototypeOf$5(e){return(_getPrototypeOf$5=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function _inherits$5(e,t){if("function"!=typeof t&&null!==t)throw TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&_setPrototypeOf$5(e,t)}function _possibleConstructorReturn$5(e,t){return t&&("object"===_typeof$5(t)||"function"==typeof t)?t:_assertThisInitialized$5(e)}function _setPrototypeOf$5(e,t){return(_setPrototypeOf$5=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var _typeof$5=function(e){return e&&"undefined"!=typeof Symbol&&e.constructor===Symbol?"symbol":typeof e};function _isNativeReflectConstruct$5(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}function _createSuper$5(e){var t=_isNativeReflectConstruct$5();return function(){var r,n=_getPrototypeOf$5(e);if(t){var o=_getPrototypeOf$5(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return _possibleConstructorReturn$5(this,r)}}var{Fonts:Fonts$2}=Constants,{colors:colors$3}=Theme$1,styles$3=StyleSheet.createThemedStyleSheet({label:{fontFamily:Fonts$2.DISPLAY_SEMIBOLD,color:colors$3.TEXT_NORMAL,fontSize:16},image:{width:24,height:24}}),_class$1=function(e){_inherits$5(r,e);var t=_createSuper$5(r);function r(){return _classCallCheck$5(this,r),t.apply(this,arguments)}var n=r.prototype;return n.render=function(){var{item:e}=this.props;return React.createElement(Forms.FormRow,{label:()=>React.createElement(ReactNative.Text,{style:styles$3.label},e.name),leading:()=>React.createElement(ReactNative.Image,{style:styles$3.image,source:e.id}),subLabel:e.type.toUpperCase(),onPress:this.open.bind(this)})},n.open=function(){Media.openMediaModal},r}(React.PureComponent);function AssetBrowser(){var[e,t]=React.useState(),r=[...assets.values()].filter(e=>"png"===e.type),n=e?[]:r;if(e)for(var o of r)(o.name.toLowerCase().includes(e)||o.httpServerLocation.toLowerCase().includes(e))&&n.push(o);return React.createElement(ReactNative.View,null,React.createElement(Search,{placeholder:i18n$1.Messages.ENMITY_SEARCH_ASSETS,onChangeText:e=>t(e),onClear:()=>t(""),value:e}),React.createElement(Forms.FormSection,{style:{flex:1}},React.createElement(ReactNative.FlatList,{keyExtractor:(e,t)=>String(t),data:n,ItemSeparatorComponent:Forms.FormDivider,renderItem:({item:e})=>React.createElement(_class$1,{item:e})})))}function createStore(e){var t=new Set,r=Object.freeze({getState:(t=e=>e)=>t(e),setState(r){var n="function"==typeof r?r(e):r;if(!Object.is(e,n))for(var o of(e=Object.assign({},e,n),t))try{o(e)}catch{console.error("Failed to fire listener in zustand store.")}},addListener(e){if(!t.has(e))return t.add(e),()=>t.delete(e)},removeListener:e=>t.delete(e),get listeners(){return t}});function n(e=e=>e){var[,n]=React.useReducer(e=>e+1,0);return React.useEffect(()=>{var e=()=>n();return t.add(e),()=>void t.delete(e)},[]),r.getState(e)}return Object.assign(n,r,{*[Symbol.iterator](){yield r,yield n}}),n}var[store,useStore]=createStore({logs:[]});function addLog({message:e,level:t}){store.setState(r=>({logs:[...r.logs,{time:Date.now(),message:e,level:t}]}))}var Logger$1={store,useStore},{Fonts:Fonts$1}=Constants,{colors:colors$2}=Theme$1;function Logs(){var e=Navigation.useNavigation(),t=Logger$1.useStore();return React.useEffect(()=>{e.setOptions({headerRight:HeaderRight})},[]),React.createElement(Forms.FormSection,{style:{flex:1}},React.createElement(ReactNative.FlatList,{data:t.logs.sort((e,t)=>e.time-t.time),keyExtractor:(e,t)=>String(t),ListEmptyComponent:()=>React.createElement(ReactNative.Text,null,"nothing here!"),ItemSeparatorComponent:Forms.FormDivider,renderItem({item:e}){var t=StyleSheet.createThemedStyleSheet({log:{fontSize:16,fontFamily:Fonts$1.DISPLAY_SEMIBOLD,color:(()=>{switch(e.level){case 1:return colors$2.TEXT_NORMAL;case 0:return colors$2.TEXT_MUTED;case 2:return"yellow";case 3:return"red"}})()},time:{fontSize:16,fontFamily:Fonts$1.DISPLAY_SEMIBOLD,color:colors$2.TEXT_MUTED}});return React.createElement(Forms.FormRow,{label:()=>React.createElement(ReactNative.Text,{style:t.log},e.message),subLabel:Moment(e.time).format("HH:mm:ss.SSS")})}}))}var styles$2=StyleSheet.createThemedStyleSheet({touchable:{marginRight:10},image:{tintColor:colors$2.TEXT_NORMAL}});function HeaderRight(){return React.createElement(ReactNative.TouchableOpacity,{style:styles$2.touchable,onPress:()=>Logger$1.store.setState({logs:[]})},React.createElement(ReactNative.Image,{style:styles$2.image,source:assets$1.getIDByName("ic_input_clear_24px")}))}function Developer(){var e=Navigation.useNavigation(),t=useSettingsStore("enmity"),r={Debug:assets$1.getIDByName("debug")};return React.createElement(React.Fragment,null,React.createElement(Forms.FormSection,{title:i18n$1.Messages.ENMITY_DEBUG_BRIDGE},React.createElement(Forms.FormRow,{label:i18n$1.Messages.ENMITY_DEBUG_BRIDGE_CONNECT,trailing:React.createElement(Forms.FormSwitch,{value:t.get("dev.debugBridge",!1),onValueChange:()=>t.toggle("dev.debugBridge",!1)})}),t.get("dev.debugBridge",!1)&&React.createElement(React.Fragment,null,React.createElement(Forms.FormDivider,null),React.createElement(Forms.FormInput,{value:t.get("dev.debugBridgeHost","192.168.0.35:9090"),onChange:e=>t.set("dev.debugBridgeHost",e),title:i18n$1.Messages.ENMITY_DEBUG_BRIDGE_IP}))),React.createElement(Forms.FormSection,null,React.createElement(Forms.FormRow,{label:i18n$1.Messages.ENMITY_ASSET_BROWSER,leading:React.createElement(Forms.FormRow.Icon,{source:r.Debug}),trailing:Forms.FormRow.Arrow,onPress:()=>e.push(Screens.Custom,{title:i18n$1.Messages.ENMITY_ASSET_BROWSER,render:AssetBrowser})}),React.createElement(Forms.FormRow,{label:i18n$1.Messages.ENMITY_DEBUG_LOGS,leading:React.createElement(Forms.FormRow.Icon,{source:r.Debug}),trailing:Forms.FormRow.Arrow,onPress:()=>e.push(Screens.Custom,{title:i18n$1.Messages.ENMITY_DEBUG_LOGS,render:Logs})})))}function _assertThisInitialized$4(e){if(void 0===e)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function asyncGeneratorStep$3(e,t,r,n,o,a,i){try{var s=e[a](i),c=s.value}catch(l){r(l);return}s.done?t(c):Promise.resolve(c).then(n,o)}function _asyncToGenerator$3(e){return function(){var t=this,r=arguments;return new Promise(function(n,o){var a=e.apply(t,r);function i(e){asyncGeneratorStep$3(a,n,o,i,s,"next",e)}function s(e){asyncGeneratorStep$3(a,n,o,i,s,"throw",e)}i(void 0)})}}function _classCallCheck$4(e,t){if(!(e instanceof t))throw TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function _createClass(e,t,r){return t&&_defineProperties(e.prototype,t),r&&_defineProperties(e,r),e}function _getPrototypeOf$4(e){return(_getPrototypeOf$4=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function _inherits$4(e,t){if("function"!=typeof t&&null!==t)throw TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&_setPrototypeOf$4(e,t)}function _possibleConstructorReturn$4(e,t){return t&&("object"===_typeof$4(t)||"function"==typeof t)?t:_assertThisInitialized$4(e)}function _setPrototypeOf$4(e,t){return(_setPrototypeOf$4=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var _typeof$4=function(e){return e&&"undefined"!=typeof Symbol&&e.constructor===Symbol?"symbol":typeof e};function _isNativeReflectConstruct$4(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}function _createSuper$4(e){var t=_isNativeReflectConstruct$4();return function(){var r,n=_getPrototypeOf$4(e);if(t){var o=_getPrototypeOf$4(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return _possibleConstructorReturn$4(this,r)}}var{DCDFileManager}=ReactNative.NativeModules;!function(e){e.Plugins="plugin",e.Themes="theme"}(ManagerType||(ManagerType={}));var Manager=function(EventEmitter){_inherits$4(Manager,EventEmitter);var _super=_createSuper$4(Manager);function Manager(e){var t;return _classCallCheck$4(this,Manager),(t=_super.call(this)).entities=new Map,t.started=new Set,t.type=e,t.name=capitalize(e)+"s",t.logger=createLogger("Manager",t.name),t.settings=getStore(`${e}-states`),t.path=ReactNative.Platform.select({ios:"Documents/Enmity/Plugins",default:"Enmity/Plugins"}),t}var _proto=Manager.prototype;return _proto.install=function(e){var t=this;return _asyncToGenerator$3(function*(){t.logger.debug(`Fetching ${e} for manifest...`);var r=yield fetch(e,{cache:"no-cache"}).then(e=>e.json());t.logger.debug(`Fetching bundle from ${r.bundle}...`);var n=yield fetch(r.bundle,{cache:"no-cache"}).then(e=>e.text());t.logger.debug("Done fetching..."),t.logger.debug("Saving..."),t.save(n,r),t.logger.debug("Loading..."),t.load(n,r)})()},_proto.save=function(e,t){DCDFileManager.writeFile("documents",`${this.path}/${t.name}/bundle.js`,e,"utf8"),DCDFileManager.writeFile("documents",`${this.path}/${t.name}/manifest.json`,JSON.stringify(t,null,2),"utf8")},_proto.load=function(e,t){var r={failed:!1,instance:null};try{var n=this.handleBundle(e);n||this.handleInvalidBundle(),r.instance=n}catch(o){this.logger.error(`Failed to execute ${t.id}:`,o.message),r.failed=!0}var a={data:t,instance:r.instance,started:!1};this.entities.set(t.id,a),this.settings.get(t.id,!1)&&this.start(a)},_proto.start=function(e){var t=this.resolve(e);if(t)try{t.instance.start?.(),t.started=!0}catch(r){this.logger.error(`Failed to start ${t.data.id}:`,r.message),t.started=!1}},_proto.stop=function(e){var t=this.resolve(e);if(t)try{t.instance.stop?.(),t.started=!1}catch(r){this.logger.error(`Failed to stop ${t.data.id}:`,r.message),t.started=!0}},_proto.enable=function(e){var t=this.resolve(e);if(t)try{this.settings.set(t.id,!0),t.started||this.start(t)}catch(r){this.logger.error(`Failed to enable ${t.data.id}:`,r.message)}},_proto.disable=function(e){var t=this.resolve(e);if(t)try{this.settings.set(t.id,!1),t.started&&this.stop(t)}catch(r){this.logger.error(`Failed to stop ${t.data.id}:`,r.message)}},_proto.isEnabled=function(e){return this.settings.get(e,!1)},_proto.unload=function(e){var t=this.resolve(e);if(t)try{this.stop(t),this.entities.delete(t.id),this.emit("updated")}catch(r){this.logger.error(`FATAL: ${t.id} was not able to unload properly, a full app restart is recommended.`,r)}},_proto.shutdown=function(){for(var e of this.addons)try{this.unload(e)}catch(t){this.logger.error(`Failed to stop ${e.id}. Skipping.`,t.message);continue}},_proto.handleBundle=function handleBundle(bundle){return eval(bundle)},_proto.handleInvalidBundle=function(){throw Error("Bundle didn't return an instance.")},_proto.resolve=function(e){if(e.instance)return e;var t=this.entities.get(e);if(t)return t;var r=[...this.entities.values()].find(t=>t.data.name===e);if(r)return r},_createClass(Manager,[{key:"addons",get:function(){return[...this.entities.values()]}}]),Manager}(EventEmitter);function _assertThisInitialized$3(e){if(void 0===e)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function _classCallCheck$3(e,t){if(!(e instanceof t))throw TypeError("Cannot call a class as a function")}function _getPrototypeOf$3(e){return(_getPrototypeOf$3=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function _inherits$3(e,t){if("function"!=typeof t&&null!==t)throw TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&_setPrototypeOf$3(e,t)}function _possibleConstructorReturn$3(e,t){return t&&("object"===_typeof$3(t)||"function"==typeof t)?t:_assertThisInitialized$3(e)}function _setPrototypeOf$3(e,t){return(_setPrototypeOf$3=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var _typeof$3=function(e){return e&&"undefined"!=typeof Symbol&&e.constructor===Symbol?"symbol":typeof e};function _isNativeReflectConstruct$3(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}function _createSuper$3(e){var t=_isNativeReflectConstruct$3();return function(){var r,n=_getPrototypeOf$3(e);if(t){var o=_getPrototypeOf$3(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return _possibleConstructorReturn$3(this,r)}}var Plugins$1=function(e){_inherits$3(r,e);var t=_createSuper$3(r);function r(){var e;return _classCallCheck$3(this,r),(e=t.call(this,ManagerType.Plugins)).initialize(),e}return r.prototype.initialize=function(){for(var e of window.ENMITY_PLUGINS){var{manifest:t,bundle:r}=e;this.load(r,t)}},r}(Manager),Plugins$2=new Plugins$1;function _assertThisInitialized$2(e){if(void 0===e)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function _classCallCheck$2(e,t){if(!(e instanceof t))throw TypeError("Cannot call a class as a function")}function _getPrototypeOf$2(e){return(_getPrototypeOf$2=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function _inherits$2(e,t){if("function"!=typeof t&&null!==t)throw TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&_setPrototypeOf$2(e,t)}function _possibleConstructorReturn$2(e,t){return t&&("object"===_typeof$2(t)||"function"==typeof t)?t:_assertThisInitialized$2(e)}function _setPrototypeOf$2(e,t){return(_setPrototypeOf$2=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var _typeof$2=function(e){return e&&"undefined"!=typeof Symbol&&e.constructor===Symbol?"symbol":typeof e};function _isNativeReflectConstruct$2(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}function _createSuper$2(e){var t=_isNativeReflectConstruct$2();return function(){var r,n=_getPrototypeOf$2(e);if(t){var o=_getPrototypeOf$2(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return _possibleConstructorReturn$2(this,r)}}var Themes$1=function(e){_inherits$2(r,e);var t=_createSuper$2(r);function r(){return _classCallCheck$2(this,r),t.call(this,ManagerType.Themes)}var n=r.prototype;return n.start=function(e){var t=this.resolve(e);t&&(this.emit("applied",t),this.logger.log(`${t.id} started.`))},n.initialize=function(e){},n.handleBundle=function(e){return JSON.parse(e)},r}(Manager),Themes$2=new Themes$1,{colors:colors$1}=Theme$1,styles$1=StyleSheet.createThemedStyleSheet({trailingText:{color:colors$1.TEXT_MUTED},container:{marginBottom:50}});function General(){var e=Navigation.useNavigation(),t={Twitter:assets$1.getIDByName("img_account_sync_twitter_white"),GitHub:assets$1.getIDByName("img_account_sync_github_white"),Development:assets$1.getIDByName("ic_progress_wrench_24px"),Toasts:assets$1.getIDByName("ic_notification_settings"),Discord:assets$1.getIDByName("Discord")};return React.createElement(ReactNative.ScrollView,null,React.createElement(ReactNative.KeyboardAvoidingView,{enabled:!0,behavior:"position",style:styles$1.container,keyboardVerticalOffset:100,contentContainerStyle:{backfaceVisibility:"hidden"}},React.createElement(Forms.FormSection,null,React.createElement(Forms.FormRow,{label:i18n$1.Messages.ENMITY_TOAST_SETTINGS,leading:React.createElement(Forms.FormRow.Icon,{source:t.Toasts}),trailing:Forms.FormRow.Arrow,onPress:()=>e.push(Screens.Custom,{title:i18n$1.Messages.ENMITY_TOAST_SETTINGS,render:Developer})}),React.createElement(Forms.FormDivider,null),React.createElement(Forms.FormRow,{label:i18n$1.Messages.ENMITY_DEVELOPMENT_SETTINGS,leading:React.createElement(Forms.FormRow.Icon,{source:t.Development}),trailing:Forms.FormRow.Arrow,onPress:()=>e.push(Screens.Custom,{title:i18n$1.Messages.ENMITY_DEVELOPMENT_SETTINGS,render:Developer})})),React.createElement(Forms.FormSection,{title:"Stats"},React.createElement(Forms.FormRow,{label:"Installed Plugins",leading:React.createElement(puzzle,{width:24,height:24}),trailing:()=>React.createElement(ReactNative.Text,{style:styles$1.trailingText},Plugins$2.addons.length)}),React.createElement(Forms.FormDivider,null),React.createElement(Forms.FormRow,{label:"Installed Themes",leading:React.createElement(palette,{width:24,height:24}),trailing:()=>React.createElement(ReactNative.Text,{style:styles$1.trailingText},Themes$2.addons.length)})),React.createElement(Forms.FormSection,{title:"Links"},React.createElement(Forms.FormRow,{label:"Discord Server",leading:React.createElement(Forms.FormRow.Icon,{source:t.Discord}),trailing:Forms.FormRow.Arrow,onPress:()=>Invites.acceptInviteAndTransitionToInviteChannel({inviteKey:Invite})}),React.createElement(Forms.FormDivider,null),React.createElement(Forms.FormRow,{label:"GitHub",leading:React.createElement(Forms.FormRow.Icon,{source:t.GitHub}),trailing:Forms.FormRow.Arrow,onPress:()=>ReactNative.Linking.openURL(Links.GitHub)}),React.createElement(Forms.FormDivider,null),React.createElement(Forms.FormRow,{label:"Twitter",leading:React.createElement(Forms.FormRow.Icon,{source:t.Twitter}),trailing:Forms.FormRow.Arrow,onPress:()=>ReactNative.Linking.openURL(Links.Twitter)}))))}var AsyncUsers=findByProps("fetchProfile",{lazy:!0}),API$1=Object.freeze({__proto__:null,AsyncUsers:AsyncUsers});function _assertThisInitialized$1(e){if(void 0===e)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function asyncGeneratorStep$2(e,t,r,n,o,a,i){try{var s=e[a](i),c=s.value}catch(l){r(l);return}s.done?t(c):Promise.resolve(c).then(n,o)}function _asyncToGenerator$2(e){return function(){var t=this,r=arguments;return new Promise(function(n,o){var a=e.apply(t,r);function i(e){asyncGeneratorStep$2(a,n,o,i,s,"next",e)}function s(e){asyncGeneratorStep$2(a,n,o,i,s,"throw",e)}i(void 0)})}}function _classCallCheck$1(e,t){if(!(e instanceof t))throw TypeError("Cannot call a class as a function")}function _getPrototypeOf$1(e){return(_getPrototypeOf$1=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function _inherits$1(e,t){if("function"!=typeof t&&null!==t)throw TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&_setPrototypeOf$1(e,t)}function _possibleConstructorReturn$1(e,t){return t&&("object"===_typeof$1(t)||"function"==typeof t)?t:_assertThisInitialized$1(e)}function _setPrototypeOf$1(e,t){return(_setPrototypeOf$1=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var _typeof$1=function(e){return e&&"undefined"!=typeof Symbol&&e.constructor===Symbol?"symbol":typeof e};function _isNativeReflectConstruct$1(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}function _createSuper$1(e){var t=_isNativeReflectConstruct$1();return function(){var r,n=_getPrototypeOf$1(e);if(t){var o=_getPrototypeOf$1(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return _possibleConstructorReturn$1(this,r)}}var{Fonts}=Constants,{colors}=Theme$1,_class=function(e){_inherits$1(r,e);var t=_createSuper$1(r);function r(){var e;return _classCallCheck$1(this,r),e=t.apply(this,arguments),e.styles=StyleSheet.createThemedStyleSheet({card:{backgroundColor:colors.BACKGROUND_SECONDARY,marginHorizontal:10,borderRadius:5,marginTop:10},header:{backgroundColor:colors.BACKGROUND_TERTIARY,borderTopRightRadius:5,borderTopLeftRadius:5,paddingHorizontal:15,flexDirection:"row",alignItems:"center",padding:10,flex:1},name:{color:colors.TEXT_NORMAL,fontFamily:Fonts.PRIMARY_BOLD,marginRight:2.5,fontSize:16},version:{fontFamily:Fonts.PRIMARY_SEMIBOLD,color:colors.TEXT_MUTED,marginRight:2.5,fontSize:14},by:{fontFamily:Fonts.PRIMARY_NORMAL,color:colors.TEXT_MUTED,marginRight:2.5,fontSize:14},authors:{fontFamily:Fonts.PRIMARY_SEMIBOLD,color:colors.TEXT_MUTED,fontSize:14,flex:1},authorContainer:{flexDirection:"row"},touchable:{color:colors.TEXT_NORMAL},info:{padding:15},description:{fontFamily:Fonts.PRIMARY_SEMIBOLD,color:colors.TEXT_NORMAL,fontSize:14}}),e}var n=r.prototype;return n.render=function(){return React.createElement(ReactNative.View,{style:this.styles.card},React.createElement(ReactNative.View,{style:this.styles.header},this.renderMetadata(),this.renderAuthors(),React.createElement(ReactNative.Switch,null)),React.createElement(ReactNative.View,{style:this.styles.info},this.renderBody()))},n.renderMetadata=function(){var{addon:e}=this.props;return React.createElement(React.Fragment,null,React.createElement(ReactNative.Text,{style:this.styles.name},e.data.name),React.createElement(ReactNative.Text,{style:this.styles.version},e.data.version??"?.?.?"))},n.renderAuthors=function(){var{addon:e}=this.props;return React.createElement(React.Fragment,null,React.createElement(ReactNative.Text,{style:this.styles.by},"by"),React.createElement(ReactNative.FlatList,{data:e.data.authors??[{name:"???"}],horizontal:!0,style:{flex:1},keyExtractor:(e,t)=>String(t),renderItem:({item:t,index:r})=>{var n=r!==(e.data.authors??[{name:"???"}]).length-1&&React.createElement(ReactNative.Text,{style:this.styles.authors},", ");return t.name&&t.id?React.createElement(ReactNative.TouchableOpacity,{style:this.styles.authorContainer,onPress:this.onTapAuthor.bind(this,t)},React.createElement(ReactNative.Text,{style:{...this.styles.authors,...this.styles.touchable}},t.name),n):React.createElement(ReactNative.View,{style:this.styles.authorContainer},React.createElement(ReactNative.Text,{style:this.styles.authors},t.name??t),n)}}))},n.renderBody=function(){var{addon:e}=this.props;return React.createElement(ReactNative.Text,{style:this.styles.description},e.data.description??i18n$1.Messages.ENMITY_ADDON_NO_DESCRIPTION)},n.onTapAuthor=function(e){return _asyncToGenerator$2(function*(){Users.getUser(e.id)||(yield AsyncUsers.fetchProfile(e.id)),Profiles.showUserProfile({userId:e.id})})()},r}(React.Component);function Addons({addons:e,type:t}){var[r,n]=React.useState(""),o=r?[]:e;if(r)for(var a of e)(a.data.name.toLowerCase().includes(r)||a.data.description.toLowerCase().includes(r)||a.data.authors.some(e=>e.name.includes(r)))&&o.push(a);return React.createElement(ReactNative.SafeAreaView,{style:{flex:1}},React.createElement(ReactNative.View,{style:{flex:1}},React.createElement(Search,{placeholder:i18n$1.Messages[`ENMITY_SEARCH_${t.toUpperCase()}`],onChangeText:e=>n(e),onClear:()=>n(""),value:r}),React.createElement(ReactNative.FlatList,{data:o,renderItem:e=>React.createElement(_class,{addon:e.item}),keyExtractor:(e,t)=>String(t)})))}function _assertThisInitialized(e){if(void 0===e)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function _classCallCheck(e,t){if(!(e instanceof t))throw TypeError("Cannot call a class as a function")}function _getPrototypeOf(e){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&_setPrototypeOf(e,t)}function _possibleConstructorReturn(e,t){return t&&("object"===_typeof(t)||"function"==typeof t)?t:_assertThisInitialized(e)}function _setPrototypeOf(e,t){return(_setPrototypeOf=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var _typeof=function(e){return e&&"undefined"!=typeof Symbol&&e.constructor===Symbol?"symbol":typeof e};function _isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}function _createSuper(e){var t=_isNativeReflectConstruct();return function(){var r,n=_getPrototypeOf(e);if(t){var o=_getPrototypeOf(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return _possibleConstructorReturn(this,r)}}var styles=StyleSheet.createThemedStyleSheet({input:{height:40,margin:12,borderBottomWidth:1,borderBottomColor:Theme$1.colors.INTERACTIVE_NORMAL,padding:10}}),Plugins=()=>{var e=Navigation.useNavigation();return React.useEffect(()=>{e.setOptions({headerRight:()=>React.createElement(Add$1,null)})},[]),React.createElement(ReactNative.View,{style:{flex:1}},React.createElement(Addons,{type:"plugins",addons:Plugins$2.addons}))};function Add$1(){return React.createElement(ReactNative.TouchableOpacity,{style:{marginRight:20},onPress(){Dialog.confirm({title:i18n$1.Messages.ENMITY_INSTALL_TITLE.format({type:"plugin"}),body:React.createElement(InstallModal,{key:"install-input"}),confirmText:i18n$1.Messages.ENMITY_INSTALL,onConfirm:()=>alert("hi")})}},React.createElement(ReactNative.Image,{source:assets$1.getIDByName("ic_add_circle")}))}var InstallModal=function(e){_inherits(r,e);var t=_createSuper(r);function r(){var e;return _classCallCheck(this,r),e=t.apply(this,arguments),e.state={url:""},e}return r.prototype.render=function(){return React.createElement(ReactNative.View,null,React.createElement(ReactNative.TextInput,{onChangeText:e=>this.setState({url:e}),value:this.state.url,style:styles.input,placeholder:"https://example.com"}))},r}(React.PureComponent),Themes=()=>{var e=Navigation.useNavigation();return React.useEffect(()=>{e.setOptions({headerRight:()=>React.createElement(Add,null)})},[]),React.createElement(ReactNative.View,{style:{flex:1}},React.createElement(Addons,{type:"themes",addons:Themes$2.addons}))};function Add(){return React.createElement(ReactNative.Text,{style:{color:"white",marginRight:15},onPress:()=>console.log("hio")},"Add")}function _extends(){return(_extends=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}var Patcher=createPatcher("settings");function apply$2(){var[e,t]=findByName({params:["UserSettingsOverviewWrapper"],interop:!1},{params:["getScreens"],interop:!1},{bulk:!0}),r=Patcher.after(e,"default",(e,t,n)=>{var o=findInReactTree(n,e=>e.type?.name==="UserSettingsOverview");if(!o)return n;patchSettings(o),r()});Patcher.after(t,"default",(e,t,r)=>({...r,[Screens.General]:{key:Screens.General,title:"Enmity",render:General},[Screens.Plugins]:{key:Screens.Plugins,render:Plugins,get title(){return i18n$1.Messages.ENMITY_PLUGINS}},[Screens.Themes]:{key:Screens.Themes,render:Themes,get title(){return i18n$1.Messages.ENMITY_THEMES}},[Screens.Updater]:{key:Screens.Updater,render:()=>null,get title(){return i18n$1.Messages.ENMITY_UPDATER}},[Screens.Custom]:{key:Screens.Custom,title:"Page",render({title:e,render:t,...r}){var n=Navigation.useNavigation();return React.useEffect(()=>{e&&n.setOptions({title:e})},[]),React.createElement(t,_extends({},r))}}}))}function patchSettings(e){Patcher.after(e.type.prototype,"render",(e,t,r)=>{var{navigation:n}=e.props,{children:o}=r.props,a=[i18n$1.Messages.BILLING_SETTINGS,i18n$1.Messages.PREMIUM_SETTINGS],i=o.findIndex(e=>~a.indexOf(e.props.title));o.splice(-1===i?4:i,0,React.createElement(React.Fragment,null,React.createElement(Forms.FormSection,{key:"Enmity",title:"Enmity"},React.createElement(Forms.FormRow,{label:i18n$1.Messages.ENMITY_GENERAL,leading:React.createElement(Forms.FormRow.Icon,{source:{uri:"https://files.enmity.app/icon-64.png"}}),trailing:React.createElement(Forms.FormArrow,null),onPress:()=>n.push(Screens.General,{...e.props,...r.props})}),React.createElement(Forms.FormDivider,null),React.createElement(Forms.FormRow,{label:i18n$1.Messages.ENMITY_PLUGINS,leading:React.createElement(puzzle,{height:24,width:24}),trailing:React.createElement(Forms.FormArrow,null),onPress:()=>n.push(Screens.Plugins,{...e.props,...r.props})}),React.createElement(Forms.FormDivider,null),React.createElement(Forms.FormRow,{label:i18n$1.Messages.ENMITY_THEMES,leading:React.createElement(palette,{height:24,width:24}),trailing:React.createElement(Forms.FormArrow,null),onPress:()=>n.push(Screens.Themes,{...e.props,...r.props})}),React.createElement(Forms.FormDivider,null),React.createElement(Forms.FormRow,{label:i18n$1.Messages.ENMITY_UPDATER,leading:React.createElement(Forms.FormRow.Icon,{source:Icons.ic_download_24px}),trailing:React.createElement(Forms.FormArrow,null),onPress:()=>n.push(Screens.Updater,{...e.props,...r.props})}))));var s=o.find(e=>e.props.title===i18n$1.Messages.SUPPORT),c=s?.props.children;c&&(s.props.children=c.filter(e=>e?.type?.name!=="UploadLogsButton"))})}function remove$2(){Patcher.unpatchAll()}var settings=Object.freeze({__proto__:null,apply:apply$2,remove:remove$2});!function(e){e[e.error=3]="error",e[e.info=1]="info",e[e.log=1]="log",e[e.warn=2]="warn",e[e.trace=0]="trace",e[e.debug=0]="debug"}(Levels||(Levels={}));var methods=["error","info","log","warn","trace","debug"];function apply$1(){var e=function(e){console[e].__ORIGINAL__=console[e],console[e]=(...r)=>{for(var n=[],o=0,a=r.length;a>o;o++)n.push("string"==typeof r[o]?r[o]:t.inspect?.(r[o])??r[o].toString());var i=n.join(" ");addLog({message:i,level:Levels[e]}),window.nativeLoggingHook(i,Levels[e]??Levels.info)}},t=findByProps("inspect",{lazy:!0});for(var r of methods)e(r)}function remove$1(){for(var e of methods){var t=console[e].__ORIGINAL__;t&&(console[e]=t)}}var console$1=Object.freeze({__proto__:null,get Levels(){return Levels},apply:apply$1,remove:remove$1}),Patches$1=Object.freeze({__proto__:null,ThemeFix:themeFix,Settings:settings,Console:console$1}),Logger=createLogger("Core","Patches");function apply(){for(var e in Patches$1){var t=Patches$1[e];try{t.apply?.()}catch(r){Logger.error(`Failed to apply ${e} patch:`,r.message)}}}function remove(){for(var e in Patches$1){var t=Patches$1[e];try{t.remove?.()}catch(r){Logger.error(`Failed to remove ${e} patch:`,r.message)}}}var Patches={apply,remove},managers=Object.freeze({__proto__:null,plugins:Plugins$2,themes:Themes$2}),utilities=Object.freeze({__proto__:null,findInReactTree:findInReactTree,forceRender:forceRender,capitalize:capitalize,findInTree:findInTree,debounce:debounce,colorize:colorize,attempt:attempt,isEmpty:isEmpty,noop:noop,uuid:uuid}),toasts=Object.freeze({__proto__:null}),ENMITY_GENERAL="General",ENMITY_PLUGINS="Plugins",ENMITY_THEMES="Themes",ENMITY_UPDATER="Updater",ENMITY_DEBUG_LOGS="Debug Logs",ENMITY_SEARCH_PLUGINS="Search plugins...",ENMITY_SEARCH_THEMES="Search themes...",ENMITY_SEARCH_ASSETS="Search assets...",ENMITY_DEVELOPMENT_SETTINGS="Development Settings",ENMITY_DEBUG_BRIDGE_IP="Debug IP",ENMITY_DEBUG_BRIDGE_CONNECT="Connect to the debug bridge on startup",ENMITY_DEBUG_BRIDGE="Debug Bridge",ENMITY_TOAST_SETTINGS="Toast Settings",ENMITY_ASSET_BROWSER="Asset Browser",ENMITY_ADDON_NO_DESCRIPTION="No description provided.",ENMITY_INSTALL="Install",ENMITY_INSTALL_TITLE="Install {type}",enUS={ENMITY_GENERAL:ENMITY_GENERAL,ENMITY_PLUGINS:ENMITY_PLUGINS,ENMITY_THEMES:ENMITY_THEMES,ENMITY_UPDATER:ENMITY_UPDATER,ENMITY_DEBUG_LOGS:ENMITY_DEBUG_LOGS,ENMITY_SEARCH_PLUGINS:ENMITY_SEARCH_PLUGINS,ENMITY_SEARCH_THEMES:ENMITY_SEARCH_THEMES,ENMITY_SEARCH_ASSETS:ENMITY_SEARCH_ASSETS,ENMITY_DEVELOPMENT_SETTINGS:ENMITY_DEVELOPMENT_SETTINGS,ENMITY_DEBUG_BRIDGE_IP:ENMITY_DEBUG_BRIDGE_IP,ENMITY_DEBUG_BRIDGE_CONNECT:ENMITY_DEBUG_BRIDGE_CONNECT,ENMITY_DEBUG_BRIDGE:ENMITY_DEBUG_BRIDGE,ENMITY_TOAST_SETTINGS:ENMITY_TOAST_SETTINGS,ENMITY_ASSET_BROWSER:ENMITY_ASSET_BROWSER,ENMITY_ADDON_NO_DESCRIPTION:ENMITY_ADDON_NO_DESCRIPTION,ENMITY_INSTALL:ENMITY_INSTALL,ENMITY_INSTALL_TITLE:ENMITY_INSTALL_TITLE},enGB={},Strings={"en-US":enUS,"en-GB":enGB};function asyncGeneratorStep$1(e,t,r,n,o,a,i){try{var s=e[a](i),c=s.value}catch(l){r(l);return}s.done?t(c):Promise.resolve(c).then(n,o)}function _asyncToGenerator$1(e){return function(){var t=this,r=arguments;return new Promise(function(n,o){var a=e.apply(t,r);function i(e){asyncGeneratorStep$1(a,n,o,i,s,"next",e)}function s(e){asyncGeneratorStep$1(a,n,o,i,s,"throw",e)}i(void 0)})}}var state={locale:"en-US",messages:{}};function add(e){if("object"!=typeof e||Array.isArray(e))throw Error("Locale strings must be an object with languages and strings.");for(var t in e)addStrings(t,e[t]);return{remove(){var t=i18n$1._provider._context;for(var r in e)for(var n of Object.keys(e[r]))delete t.defaultMessages[n],delete t.messages[n],delete i18n$1.Messages[n]}}}function addStrings(e,t){state.locale&&(state.messages[e]??={},Object.assign(state.messages[e],t),i18n$1.loadPromise.then(inject))}function inject(){if(state.locale&&i18n$1?.getLocale){var e=i18n$1._provider._context;Object.assign(e.messages,state.messages[state.locale]??{}),Object.assign(e.defaultMessages,state.messages["en-US"]??{})}}function onChange(e){return _onChange.apply(this,arguments)}function _onChange(){return(_onChange=_asyncToGenerator$1(function*(e){state.locale=e,yield i18n$1.loadPromise,inject()})).apply(this,arguments)}i18n$1?.getLocale&&(state.locale=i18n$1.getLocale()??"en-US",i18n$1.on("locale",onChange),add(Strings));var i18n=Object.freeze({__proto__:null,state:state,add:add}),metro=Object.assign(Modules,{components:Components,filters:Filters,actions:Actions,common:Common,stores:Stores,api:API$1,ui:UI}),API=Object.freeze({__proto__:null,metro:metro,components:components,managers:managers,patcher:patcher,assets:assets$2,utilities:utilities,storage:storage,toasts:toasts,i18n:i18n});function asyncGeneratorStep(e,t,r,n,o,a,i){try{var s=e[a](i),c=s.value}catch(l){r(l);return}s.done?t(c):Promise.resolve(c).then(n,o)}function _asyncToGenerator(e){return function(){var t=this,r=arguments;return new Promise(function(n,o){var a=e.apply(t,r);function i(e){asyncGeneratorStep(a,n,o,i,s,"next",e)}function s(e){asyncGeneratorStep(a,n,o,i,s,"throw",e)}i(void 0)})}}function initialize(){return _initialize.apply(this,arguments)}function _initialize(){return(_initialize=_asyncToGenerator(function*(){try{Patches.apply()}catch(e){alert("Failed to apply patches: "+e.message)}try{BuiltIns.initialize()}catch(t){alert("Failed to apply builtins: "+t.message)}return window.enmity=API,API})).apply(this,arguments)}function shutdown(){return _shutdown.apply(this,arguments)}function _shutdown(){return(_shutdown=_asyncToGenerator(function*(){var{patcher:e}=API;for(var t in e.unpatchAll(),managers)yield managers[t].shutdown();Patches.remove(),BuiltIns.shutdown(),delete window.enmity})).apply(this,arguments)}var index={initialize,shutdown},index$1=Object.freeze({__proto__:null,initialize:initialize,shutdown:shutdown,default:index});
