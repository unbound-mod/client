!function(){function asyncGeneratorStep$8(t,n,l,u,f,d,h){try{var g=t[d](h),y=g.value}catch(t){l(t);return}g.done?n(y):Promise.resolve(y).then(u,f)}function _async_to_generator$8(t){return function(){var n=this,l=arguments;return new Promise(function(u,f){var d=t.apply(n,l);function h(t){asyncGeneratorStep$8(d,u,f,h,g,"next",t)}function g(t){asyncGeneratorStep$8(d,u,f,h,g,"throw",t)}h(void 0)})}}function init(){return _init.apply(this,arguments)}function _init(){return(_init=_async_to_generator$8(function*(){try{(yield Promise.resolve().then(function(){return index$1})).initialize()}catch(t){alert("Unbound failed to initialize: "+t.message)}})).apply(this,arguments)}try{var Type,ManagerType,ws,ApplicationCommandType,ApplicationCommandInputType,ApplicationCommandOptionType,Levels,mdls=Object.values(modules),find$2=t=>mdls.find(n=>n?.publicModule.exports?.[t])?.publicModule?.exports;window.ReactNative=find$2("AppState"),window.React=find$2("createElement"),init()}catch(e){alert("Unbound failed to pre-initialize: "+e.message)}!function(t){t.Before="before",t.Instead="instead",t.After="after"}(Type||(Type={}));var patches=[];function before(t,n,l,u,f=!1){return patch(t,n,l,u,Type.Before,f)}function instead(t,n,l,u,f=!1){return patch(t,n,l,u,Type.Instead,f)}function after(t,n,l,u,f=!1){return patch(t,n,l,u,Type.After,f)}function createPatcher(t){return{getPatchesByCaller,before:(n,l,u,f=!1)=>before(t,n,l,u,f),instead:(n,l,u,f=!1)=>instead(t,n,l,u,f),after:(n,l,u,f=!1)=>after(t,n,l,u,f),unpatchAll:()=>unpatchAll(t)}}function getPatchesByCaller(t){if(!t)return[];var n=[];for(var l of patches)for(var u of[...l.patches.before,...l.patches.instead,...l.patches.after])t&&u.caller!==t||n.push(u);return n}function unpatchAll(t){var n=getPatchesByCaller(t);if(n.length)for(var l of n)l.unpatch()}function override(t){return function(){if(!t?.patches?.before.length&&!t?.patches?.after.length&&!t?.patches?.instead.length&&!patches.find(n=>n.mdl===t.mdl&&n.func===t.func))return t.unpatch(),new.target?new t.original(...arguments):t.original.apply(this,arguments);for(var n,l=arguments,u=[...t.patches.before],f=0;f<u.length;f++){var d=u[f];if(d)try{var h=d.callback(this,l,t.original.bind(this));Array.isArray(h)&&(l=h),d.once&&d.unpatch()}catch(n){console.error(`Could not fire before patch for ${t.func} of ${d.caller}`,n)}}var g=[...t.patches.instead];if(g.length)for(var y=0;y<g.length;y++){var E=g[y];if(E)try{var O=E.callback(this,l,t.original.bind(this));void 0!==O&&(n=O),E.once&&E.unpatch()}catch(n){console.error(`Could not fire instead patch for ${t.func} of ${E.caller}`,n)}}else n=new.target?new t.original(...l):t.original.apply(this,l);for(var N=[...t.patches.after],S=0;S<N.length;S++){var R=N[S];if(R)try{var T=R.callback(this,l,n,t=>n=t);void 0!==T&&(n=T),R.once&&R.unpatch()}catch(n){console.error(`Could not fire after patch for ${t.func} of ${R.caller}`,n)}}return n}}function push(t,n){"renderPatched"===n&&(t[n]=function(...n){return new.target?new t(...n):t.apply(this,n)});var l={mdl:t,func:n,original:t[n],unpatch:()=>{"renderPatched"===l.func?delete l.mdl.renderPatched:l.mdl[l.func]=l.original,l.patches={before:[],after:[],instead:[]}},patches:{before:[],after:[],instead:[]}},u=override(l);t[n]=u;var f=Object.getOwnPropertyDescriptors(l.original);return delete f.length,Object.defineProperties(t[n],{...f,toString:{value:()=>l.original.toString(),configurable:!0,enumerable:!1},__ORIGINAL__:{value:l.original,configurable:!0,enumerable:!1}}),patches.push(l),l}function get$1(t,n){return patches.find(l=>l.mdl===t&&l.func===n)||push(t,n)}function patch(t,n,l,u,f=Type.After,d=!1){if(t&&"string"==typeof t){if(n&&["function","object"].includes(typeof n)){if(l&&"string"==typeof l){if(u&&"function"==typeof u){if(!f||"string"!=typeof f||!["after","before","instead"].includes(f))throw TypeError('fifth argument "type" must be of type string and any of the three: after, before, instead')}else throw TypeError('fourth argument "callback" must be of type function')}else throw TypeError('third argument "func" must be of type string')}else throw TypeError('second argument "mdl" must be of type function or object')}else throw TypeError('first argument "caller" must be of type string');var h=get$1(n,l),g={caller:t,once:d,type:f,id:h.patches?.[f]?.length??0,callback:u,unpatch:()=>{var t=h.patches?.[f].findIndex(t=>t.id===g.id);if(~t&&h.patches?.[f].splice(t,1),!h.patches?.before.length&&!h.patches?.after.length&&!h.patches?.instead.length){var u=patches.findIndex(t=>t.mdl==n&&t.func==l);u&&(patches[u]?.unpatch(),patches.splice(u,1))}}};return h.patches[f]??=[],h.patches[f].push(g),g.unpatch}var Patcher$6={createPatcher,before,instead,after,unpatchAll,patches},patcher=Object.freeze({__proto__:null,get Type(){return Type},after:after,before:before,createPatcher:createPatcher,default:Patcher$6,getPatchesByCaller:getPatchesByCaller,instead:instead,patches:patches,unpatchAll:unpatchAll});function log(...t){return console.log("\xbb",...t)}function error(...t){return console.error("\xbb",...t)}function success(...t){return console.log("\xbb",...t)}function warn(...t){return console.warn("\xbb",...t)}function debug$2(...t){return console.debug("\xbb",...t)}function info(...t){return console.info("\xbb",...t)}function createLogger(...t){var n=t.join(" â†’ ")+":";return{log:(...t)=>log(n,...t),error:(...t)=>error(n,...t),success:(...t)=>success(n,...t),warn:(...t)=>warn(n,...t),debug:(...t)=>debug$2(n,...t),info:(...t)=>info(n,...t)}}var Patcher$5=createPatcher("components"),Logger$9=createLogger("Components"),unknown=new Set,named=new Map;function initialize$9(){Patcher$5.before(window.React,"createElement",(t,n)=>{var[l]=n;return"function"==typeof l&&void 0!==l.renderPatched&&(n[0]=l.renderPatched),n}),Patcher$5.after(React,"createElement",(t,n,l)=>{})}function add$1(t,n){named.get(t)||named.set(t,n)}function getAll$1(){return{named:Object.fromEntries(named.entries()),unknown:[...unknown.values()]}}function getByName$1(t){return named.get(t)}try{initialize$9()}catch(e){Logger$9.error("Failed to intercept React.createElement:",e.message)}var components=Object.freeze({__proto__:null,add:add$1,getAll:getAll$1,getByName:getByName$1});function _assert_this_initialized$8(t){if(void 0===t)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function _class_call_check$a(t,n){if(!(t instanceof n))throw TypeError("Cannot call a class as a function")}function _defineProperties$a(t,n){for(var l=0;l<n.length;l++){var u=n[l];u.enumerable=u.enumerable||!1,u.configurable=!0,"value"in u&&(u.writable=!0),Object.defineProperty(t,u.key,u)}}function _create_class$a(t,n,l){return n&&_defineProperties$a(t.prototype,n),l&&_defineProperties$a(t,l),t}function _get_prototype_of$8(t){return(_get_prototype_of$8=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function _inherits$8(t,n){if("function"!=typeof n&&null!==n)throw TypeError("Super expression must either be null or a function");t.prototype=Object.create(n&&n.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),n&&_set_prototype_of$8(t,n)}function _possible_constructor_return$8(t,n){return n&&("object"===_type_of$9(n)||"function"==typeof n)?n:_assert_this_initialized$8(t)}function _set_prototype_of$8(t,n){return(_set_prototype_of$8=Object.setPrototypeOf||function(t,n){return t.__proto__=n,t})(t,n)}function _type_of$9(t){return t&&"undefined"!=typeof Symbol&&t.constructor===Symbol?"symbol":typeof t}function _is_native_reflect_construct$8(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}function _create_super$8(t){var n=_is_native_reflect_construct$8();return function(){var l,u=_get_prototype_of$8(t);if(n){var f=_get_prototype_of$8(this).constructor;l=Reflect.construct(u,arguments,f)}else l=u.apply(this,arguments);return _possible_constructor_return$8(this,l)}}var ErrorBoundary=function(t){_inherits$8(l,t);var n=_create_super$8(l);function l(){return _class_call_check$a(this,l),n.apply(this,arguments)}return _create_class$a(l,[{key:"render",value:function(){var{state:t}=this.props;return t?.error?React.createElement(ReactNative.ScrollView,{style:{backgroundColor:"white"}},React.createElement(ReactNative.Text,null,t.error.message),React.createElement(ReactNative.Text,{style:{marginTop:10}},t.info.componentStack)):this.props.children}}]),l}(React.PureComponent);function _check_private_redeclaration(t,n){if(n.has(t))throw TypeError("Cannot initialize the same private elements twice on an object")}function _class_apply_descriptor_get(t,n){return n.get?n.get.call(t):n.value}function _class_call_check$9(t,n){if(!(t instanceof n))throw TypeError("Cannot call a class as a function")}function _class_extract_field_descriptor(t,n,l){if(!n.has(t))throw TypeError("attempted to "+l+" private field on non-instance");return n.get(t)}function _class_private_field_get(t,n){var l=_class_extract_field_descriptor(t,n,"get");return _class_apply_descriptor_get(t,l)}function _class_private_field_init(t,n,l){_check_private_redeclaration(t,n),n.set(t,l)}function _defineProperties$9(t,n){for(var l=0;l<n.length;l++){var u=n[l];u.enumerable=u.enumerable||!1,u.configurable=!0,"value"in u&&(u.writable=!0),Object.defineProperty(t,u.key,u)}}function _create_class$9(t,n,l){return n&&_defineProperties$9(t.prototype,n),l&&_defineProperties$9(t,l),t}var _listeners=new WeakMap,EventEmitter=function(){function t(){_class_call_check$9(this,t),_class_private_field_init(this,_listeners,{writable:!0,value:{}})}return _create_class$9(t,[{key:"emit",value:function(t,n=null){if(_class_private_field_get(this,_listeners)[t])for(var l of _class_private_field_get(this,_listeners)[t])try{l(n)}catch(n){console.error(`Failed to fire event listener for ${t}:`,n.message)}}},{key:"on",value:function(t,n){this.addListener(t,n)}},{key:"off",value:function(t,n){this.removeListener(t,n)}},{key:"addListener",value:function(t,n){_class_private_field_get(this,_listeners)[t]??=new Set,_class_private_field_get(this,_listeners)[t].add(n)}},{key:"removeListener",value:function(t,n){_class_private_field_get(this,_listeners)[t]&&(_class_private_field_get(this,_listeners)[t].delete(n),_class_private_field_get(this,_listeners)[t].size||delete _class_private_field_get(this,_listeners)[t])}}]),t}();function findInTree(t={},n=t=>t,{ignore:l=[],walkable:u=[],maxProperties:f=100}={}){for(var d=[t],h=function(...t){try{return Reflect.apply(n,this,t)}catch{return!1}};d.length&&f;){var g=d.shift();if(h(g))return g;if(Array.isArray(g))d.push(...g);else if("object"==typeof g&&null!==g){if(u.length)for(var y in g){var E=g[y];~u.indexOf(y)&&!~l.indexOf(y)&&d.push(E)}else for(var O in g){var N=g[O];g&&~l.indexOf(O)||d.push(N)}}f--}}function findInReactTree(t,n=t=>t,l={}){return findInTree(t,n,{walkable:["props","children"],...l})}var overrides={useMemo:t=>t(),useState:t=>[t,()=>void 0],useReducer:t=>[t,()=>void 0],useEffect:()=>{},useLayoutEffect:()=>{},useRef:()=>({current:null}),useCallback:t=>t,useImperativeHandle:()=>{},useContext:t=>t._currentValue},keys=Object.keys(overrides);function forceRender(t){return(...n)=>{var l=React.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentDispatcher.current,u=keys.map(t=>[t,l[t]]);Object.assign(l,overrides);var f={rendered:null,error:null};try{f.rendered=t(...n)}catch(t){f.error=t}if(Object.assign(l,Object.fromEntries(u)),f.error)throw f.error;return f.rendered}}function mergeStyles(...t){return t.reduce((t,n)=>(n&&Object.assign(t,n),t),{})}function capitalize(t){if("string"!=typeof t)throw TypeError("capitalize's first argument must be of type string");return t.charAt(0).toUpperCase()+t.slice(1)}function debounce(t,n){var l;return function(...u){clearTimeout(l),l=setTimeout(()=>t.apply(this,u),n)}}var Colors={red:"\x1b[31m",reset:"\x1b[0m",green:"\x1b[32m",gray:"\x1b[90m",blue:"\x1b[34m",yellow:"\x1b[33m"};function colorize(t,n="reset"){return Colors[n.toLowerCase()]+t+Colors.reset}function attempt(t){try{var n=t();if(n instanceof Promise)return n.then(()=>!0);return!0}catch{return!1}}function isEmpty(t){for(var n in t)return!1;return!0}function noop(...t){}function uuid(t=30){var n="";do{var l=16*Math.random()|0;n+=(12==n.length?4:16==n.length?3&l|8:l).toString(16)}while(n.length<t);return n}var index$3=Object.freeze({__proto__:null,attempt:attempt,capitalize:capitalize,colorize:colorize,debounce:debounce,findInReactTree:findInReactTree,findInTree:findInTree,forceRender:forceRender,isEmpty:isEmpty,mergeStyles:mergeStyles,noop:noop,uuid:uuid}),Files$1=ReactNative.NativeModules.DCDFileManager??ReactNative.NativeModules.RTNFileManager,Events=new EventEmitter,settings$1=globalThis.UNBOUND_SETTINGS??{},on=Events.on.bind(Events),off=Events.off.bind(Events);function get(t,n,l){var u=n.split("."),f={result:settings$1[t]};for(var d of u){if(void 0===f.result||void 0===f.result[d]){f.result=l;break}f.result=f.result[d]}return f.result}function set(t,n,l){for(var u=n.split("."),f={current:settings$1[t]??={}},d=0;u.length>d;d++)f.current[u[d]]??={},u.length-1===d?f.current[u[d]]=l:f.current=f.current[u[d]];Events.emit("changed",{store:t,key:n,value:l}),Events.emit("set",{store:t,key:n,value:l})}function toggle(t,n,l){var u=get(t,n,l);set(t,n,!u),Events.emit("changed",{store:t,key:n,value:!u}),Events.emit("toggled",{store:t,key:n,prev:u,value:!u})}function remove$4(t,n){delete settings$1[t][n],isEmpty(settings$1[t])&&delete settings$1[t],Events.emit("changed",{store:t,key:n,value:void 0}),Events.emit("removed",{store:t,key:n})}function getStore(t){return{set:(n,l)=>set(t,n,l),get:(n,l)=>get(t,n,l),toggle:(n,l)=>toggle(t,n,l),remove:n=>remove$4(t,n),useSettingsStore:()=>useSettingsStore(t)}}function useSettingsStore(t){var[,n]=React.useState({});return React.useEffect(()=>{function l(l){l.store===t&&n({})}return Events.on("changed",l),()=>void Events.off("changed",l)},[]),getStore(t)}Events.on("changed",debounce(()=>{var t=JSON.stringify(settings$1,null,2),n="Unbound/settings.json";Files$1.writeFile("documents",n,t,"utf8")},250));var Storage={useSettingsStore,getStore,get,set,remove:remove$4,on,off},storage=Object.freeze({__proto__:null,default:Storage,get:get,getStore:getStore,off:off,on:on,remove:remove$4,set:set,settings:settings$1,toggle:toggle,useSettingsStore:useSettingsStore}),Invite="unboundapp",Links={GitHub:"https://github.com/unbound-mod",Twitter:"https://twitter.com/UnboundApp",Bundle:"https://raw.githubusercontent.com/unbound-mod/unbound/main/dist/bundle.js",Badges:"https://raw.githubusercontent.com/unbound-mod/badges/main/"},ClientName="Unbound",Keys={General:"UNBOUND_GENERAL",Plugins:"UNBOUND_PLUGINS",Themes:"UNBOUND_THEMES",Updater:"UNBOUND_UPDATER",Custom:"UNBOUND_CUSTOM"},Times={HOUR:36e5},Regex={SemanticVersioning:/^(0|[1-9]\d*)\.(0|[1-9]\d*)\.(0|[1-9]\d*)(?:-((?:0|[1-9]\d*|\d*[a-zA-Z-][0-9a-zA-Z-]*)(?:\.(?:0|[1-9]\d*|\d*[a-zA-Z-][0-9a-zA-Z-]*))*))?(?:\+([0-9a-zA-Z-]+(?:\.[0-9a-zA-Z-]+)*))?$/i,URL:/https?:\/\/(www\.)?[-a-zA-Z0-9@:%._\+~#=]{1,256}\.[a-zA-Z0-9()]{1,6}\b([-a-zA-Z0-9()@:%_\+.~#?&//=]*)/i};function _assert_this_initialized$7(t){if(void 0===t)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function asyncGeneratorStep$7(t,n,l,u,f,d,h){try{var g=t[d](h),y=g.value}catch(t){l(t);return}g.done?n(y):Promise.resolve(y).then(u,f)}function _async_to_generator$7(t){return function(){var n=this,l=arguments;return new Promise(function(u,f){var d=t.apply(n,l);function h(t){asyncGeneratorStep$7(d,u,f,h,g,"next",t)}function g(t){asyncGeneratorStep$7(d,u,f,h,g,"throw",t)}h(void 0)})}}function _class_call_check$8(t,n){if(!(t instanceof n))throw TypeError("Cannot call a class as a function")}function _defineProperties$8(t,n){for(var l=0;l<n.length;l++){var u=n[l];u.enumerable=u.enumerable||!1,u.configurable=!0,"value"in u&&(u.writable=!0),Object.defineProperty(t,u.key,u)}}function _create_class$8(t,n,l){return n&&_defineProperties$8(t.prototype,n),l&&_defineProperties$8(t,l),t}function _define_property$7(t,n,l){return n in t?Object.defineProperty(t,n,{value:l,enumerable:!0,configurable:!0,writable:!0}):t[n]=l,t}function _get_prototype_of$7(t){return(_get_prototype_of$7=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function _inherits$7(t,n){if("function"!=typeof n&&null!==n)throw TypeError("Super expression must either be null or a function");t.prototype=Object.create(n&&n.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),n&&_set_prototype_of$7(t,n)}function _possible_constructor_return$7(t,n){return n&&("object"===_type_of$8(n)||"function"==typeof n)?n:_assert_this_initialized$7(t)}function _set_prototype_of$7(t,n){return(_set_prototype_of$7=Object.setPrototypeOf||function(t,n){return t.__proto__=n,t})(t,n)}function _type_of$8(t){return t&&"undefined"!=typeof Symbol&&t.constructor===Symbol?"symbol":typeof t}function _is_native_reflect_construct$7(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}function _create_super$7(t){var n=_is_native_reflect_construct$7();return function(){var l,u=_get_prototype_of$7(t);if(n){var f=_get_prototype_of$7(this).constructor;l=Reflect.construct(u,arguments,f)}else l=u.apply(this,arguments);return _possible_constructor_return$7(this,l)}}var Files=ReactNative.NativeModules.DCDFileManager??ReactNative.NativeModules.RTNFileManager;!function(t){t.Plugins="plugin",t.Themes="theme"}(ManagerType||(ManagerType={}));var Manager=function(t){_inherits$7(l,t);var n=_create_super$7(l);function l(t){var u;return _class_call_check$8(this,l),_define_property$7(_assert_this_initialized$7(u=n.call(this)),"logger",void 0),_define_property$7(_assert_this_initialized$7(u),"settings",void 0),_define_property$7(_assert_this_initialized$7(u),"id",void 0),_define_property$7(_assert_this_initialized$7(u),"entities",new Map),_define_property$7(_assert_this_initialized$7(u),"started",new Set),_define_property$7(_assert_this_initialized$7(u),"errors",new Map),_define_property$7(_assert_this_initialized$7(u),"type",void 0),_define_property$7(_assert_this_initialized$7(u),"extension",void 0),_define_property$7(_assert_this_initialized$7(u),"path",void 0),_define_property$7(_assert_this_initialized$7(u),"name",void 0),u.type=t,u.name=capitalize(t)+"s",u.logger=createLogger("Manager",u.name),u.settings=getStore(`${t}-states`),u.path=`Unbound/${u.name}`,u}return _create_class$8(l,[{key:"install",value:function(t){var n=this;return _async_to_generator$7(function*(){n.logger.debug(`Fetching ${t} for manifest...`);var l=yield fetch(t,{cache:"no-cache"}).then(t=>t.json());try{n.logger.debug("Validating manifest..."),n.validateManifest(l)}catch(t){return n.logger.debug("Failed to validate manifest:",t.message)}n.logger.debug(`Fetching bundle from ${l.bundle}...`);var u=yield fetch(l.bundle,{cache:"no-cache"}).then(t=>t.text());n.logger.debug("Done fetching..."),n.logger.debug("Saving..."),n.save(u,l),n.logger.debug("Loading..."),n.started.has(l.id)&&n.unload(l.id),n.load(u,l),n.logger.debug("Loaded.")})()}},{key:"save",value:function(t,n){Files.writeFile("documents",`${this.path}/${n.name}/bundle.${this.extension}`,t,"utf8"),Files.writeFile("documents",`${this.path}/${n.name}/manifest.json`,JSON.stringify(n,null,2),"utf8")}},{key:"load",value:function(t,n){var l={failed:!1,instance:null};try{this.validateManifest(n);var u=this.handleBundle(t);u||this.handleInvalidBundle(),l.instance=u,(this.errors.has(n.id)||this.errors.has(n.path))&&(this.errors.delete(n.id),this.errors.delete(n.path))}catch(t){l.failed=!0,this.logger.error(`Failed to execute ${n.id}:`,t.message),this.errors.set(n.id??n.path,t)}var f={data:n,instance:l.instance,id:n.id,failed:l.failed,started:!1};this.entities.set(n.id,f),this.isEnabled(f.id)&&this.start(f),this.emit("updated")}},{key:"delete",value:function(t){var n=this.resolve(t);if(n)try{this.unload(n),Files.writeFile("documents",`${this.path}/${n.data.name}/.delete`,"","utf8")}catch(t){this.logger.error(`Failed to delete ${n.data.id}:`,t.message)}}},{key:"start",value:function(t){var n=this.resolve(t);if(n)try{n.instance.start?.(),n.started=!0}catch(t){this.logger.error(`Failed to start ${n.data.id}:`,t.message),n.started=!1}}},{key:"stop",value:function(t){var n=this.resolve(t);if(n)try{n.instance.stop?.(),n.started=!1}catch(t){this.logger.error(`Failed to stop ${n.data.id}:`,t.message),n.started=!0}}},{key:"toggle",value:function(t){var n=this.resolve(t);if(n){var l=this.isEnabled(n.id);l?this.disable(n):this.enable(n),this.emit("toggle")}}},{key:"enable",value:function(t){var n=this.resolve(t);if(n)try{this.settings.set(n.id,!0),n.started||this.start(n)}catch(t){this.logger.error(`Failed to enable ${n.data.id}:`,t.message)}}},{key:"disable",value:function(t){var n=this.resolve(t);if(n)try{this.settings.set(n.id,!1),n.started&&this.stop(n)}catch(t){this.logger.error(`Failed to stop ${n.data.id}:`,t.message)}}},{key:"isEnabled",value:function(t){return!this.errors.has(t)&&this.settings.get(t,!1)}},{key:"unload",value:function(t){var n=this.resolve(t);if(n)try{n.started&&this.stop(n),this.entities.delete(n.id),this.emit("updated")}catch(t){this.logger.error(`FATAL: ${n.id} was not able to unload properly, a full app restart is recommended.`,t)}}},{key:"shutdown",value:function(){for(var t of this.addons)try{this.unload(t)}catch(n){this.logger.error(`Failed to stop ${t.id}. Skipping.`,n.message);continue}}},{key:"validateManifest",value:function(t){if(t.name&&"string"==typeof t.name){if(t.description&&"string"==typeof t.description){if(t.authors&&("object"==typeof t.name||Array.isArray(t.authors))){if(t.version&&"string"==typeof t.version&&Regex.SemanticVersioning.test(t.version)){if(!t.id||"string"!=typeof t.id)throw Error('Manifest property "id" must be of type string and match a "eternal.unbound" pattern.')}else throw Error('Manifest property "version" must be of type string and match the semantic versioning pattern.')}else throw Error('Manifest property "authors" must be of type array.')}else throw Error('Manifest property "description" must be of type string.')}else throw Error('Manifest property "name" must be of type string.')}},{key:"handleBundle",value:function(t){return""}},{key:"handleInvalidBundle",value:function(){throw Error("Bundle didn't return an instance.")}},{key:"resolve",value:function(t){if(t.data)return t;var n=this.entities.get(t);if(n)return n;var l=[...this.entities.values()].find(n=>n.data.name===t);if(l)return l}},{key:"useEntities",value:function(){var[,t]=React.useState({});return React.useEffect(()=>{function n(){t({})}return this.on("updated",n),this.on("toggle",n),()=>{this.off("updated",n),this.off("toggle",n)}},[]),this.addons}},{key:"addons",get:function(){return[...this.entities.values()]}}]),l}(EventEmitter);function _assert_this_initialized$6(t){if(void 0===t)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function asyncGeneratorStep$6(t,n,l,u,f,d,h){try{var g=t[d](h),y=g.value}catch(t){l(t);return}g.done?n(y):Promise.resolve(y).then(u,f)}function _async_to_generator$6(t){return function(){var n=this,l=arguments;return new Promise(function(u,f){var d=t.apply(n,l);function h(t){asyncGeneratorStep$6(d,u,f,h,g,"next",t)}function g(t){asyncGeneratorStep$6(d,u,f,h,g,"throw",t)}h(void 0)})}}function _class_call_check$7(t,n){if(!(t instanceof n))throw TypeError("Cannot call a class as a function")}function _defineProperties$7(t,n){for(var l=0;l<n.length;l++){var u=n[l];u.enumerable=u.enumerable||!1,u.configurable=!0,"value"in u&&(u.writable=!0),Object.defineProperty(t,u.key,u)}}function _create_class$7(t,n,l){return n&&_defineProperties$7(t.prototype,n),l&&_defineProperties$7(t,l),t}function _define_property$6(t,n,l){return n in t?Object.defineProperty(t,n,{value:l,enumerable:!0,configurable:!0,writable:!0}):t[n]=l,t}function _get_prototype_of$6(t){return(_get_prototype_of$6=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function _inherits$6(t,n){if("function"!=typeof n&&null!==n)throw TypeError("Super expression must either be null or a function");t.prototype=Object.create(n&&n.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),n&&_set_prototype_of$6(t,n)}function _possible_constructor_return$6(t,n){return n&&("object"===_type_of$7(n)||"function"==typeof n)?n:_assert_this_initialized$6(t)}function _set_prototype_of$6(t,n){return(_set_prototype_of$6=Object.setPrototypeOf||function(t,n){return t.__proto__=n,t})(t,n)}function _type_of$7(t){return t&&"undefined"!=typeof Symbol&&t.constructor===Symbol?"symbol":typeof t}function _is_native_reflect_construct$6(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}function _create_super$6(t){var n=_is_native_reflect_construct$6();return function(){var l,u=_get_prototype_of$6(t);if(n){var f=_get_prototype_of$6(this).constructor;l=Reflect.construct(u,arguments,f)}else l=u.apply(this,arguments);return _possible_constructor_return$6(this,l)}}var Themes$2=function(t){_inherits$6(l,t);var n=_create_super$6(l);function l(){var t;return _class_call_check$7(this,l),_define_property$6(_assert_this_initialized$6(t=n.call(this,ManagerType.Themes)),"patcher",void 0),_define_property$6(_assert_this_initialized$6(t),"original",void 0),_define_property$6(_assert_this_initialized$6(t),"extension","json"),_define_property$6(_assert_this_initialized$6(t),"module",void 0),t.patcher=createPatcher("themes"),t}return _create_class$7(l,[{key:"initialize",value:function(t){for(var n of(this.module=t,window.UNBOUND_THEMES??[])){var{manifest:l,bundle:u}=n;this.load(u,l)}}},{key:"start",value:function(t){var n=this;return _async_to_generator$6(function*(){var l=n.resolve(t);if(!(!l||l.failed||Storage.get("unbound","recovery",!1))){try{var{instance:u}=l;if(u.raw)for(var[f,d]of(u.raw.PRIMARY_660||(u.raw.PRIMARY_660=u?.semantic?.BACKGROUND_PRIMARY[0]),Object.entries(u.raw)))n.module.RawColor[f]=d,n.module.default.unsafe_rawColors[f]=d;if(u.semantic){var h=n.module.default.meta.resolveSemanticColor;n.module.default.meta.resolveSemanticColor=function(t,n){var l=n[Object.getOwnPropertySymbols(n)[0]];if(u.semantic[l]){var f={dark:0,light:1,amoled:2}[t.toLowerCase()]||0,d=u.semantic[l][f];if("CHAT_BACKGROUND"===l&&"number"==typeof u.background?.opacity)return(d??"#000000")+Math.round(255*u.background.opacity).toString(16);if(d)return d}return h.call(this,t,n)}}u.background&&n.applyBackground(l)}catch(t){n.logger.error("Failed to apply theme:",t.message)}n.emit("applied",l),n.logger.log(`${l.id} started.`)}})()}},{key:"applyBackground",value:function(t){var n=this;return _async_to_generator$6(function*(){var{findByName:l}=yield Promise.resolve().then(function(){return Modules}),{instance:{background:u}}=t,f=l("MessagesWrapperConnected",{interop:!1});n.patcher.after(f,"default",(t,n,l)=>React.createElement(ReactNative.ImageBackground,{blurRadius:"number"==typeof u.blur?u.blur:0,style:{flex:1,height:"100%"},source:{uri:u.url},children:l}))})()}},{key:"toggle",value:function(t){var n=this.resolve(t);if(n){var l=this.isEnabled(n.id);l?this.disable(n):this.enable(n),this.emit("toggle")}}},{key:"enable",value:function(t){var n=this.resolve(t);if(n)try{this.settings.set("applied",n.id),n.started||this.start(n)}catch(t){this.logger.error(`Failed to enable ${n.data.id}:`,t.message)}}},{key:"disable",value:function(t){var n=this.resolve(t);if(n)try{this.settings.set("applied",null),n.started&&this.stop(n)}catch(t){this.logger.error(`Failed to stop ${n.data.id}:`,t.message)}}},{key:"isEnabled",value:function(t){return this.settings.get("applied",null)===t}},{key:"handleBundle",value:function(t){return"object"==typeof t?t:JSON.parse(t)}}]),l}(Manager),Themes$3=new Themes$2;function byProps(...t){return n=>{for(var l=0,u=t.length;l<u;l++)if(void 0===n[t[l]])return!1;return!0}}function byPrototypes(...t){return n=>{if(!n.prototype)return!1;for(var l=0,u=t.length;l<u;l++)if(void 0===n.prototype[t[l]])return!1;return!0}}function byDisplayName(t){return n=>n.displayName===t}function byName(t){return n=>n.name===t}function byStore(t,n=!0){return l=>l._dispatcher&&l.getName?.()===(n?t+"Store":t)}var Filters={byProps,byDisplayName,byPrototypes,byName,byStore};function _type_of$6(t){return t&&"undefined"!=typeof Symbol&&t.constructor===Symbol?"symbol":typeof t}var data$5={cache:[],patchedMoment:!1,patchedThemes:!1};function find$1(t,n={}){var l=function(t){if(!modules[t].isInitialized)try{__r(t)}catch{return deenumerate(t),"continue"}var n=modules[t].publicModule.exports;if(!n||n===window||null===n[Symbol()]||isEmpty(n))return deenumerate(t),"continue";if(!data$5.patchedMoment&&n.defineLocale){var l=n.defineLocale,d=n.locale();n.defineLocale=function(...t){try{l.apply(this,t),n.locale(d)}catch(t){console.error("Failed to define moment locale:",t.message)}},data$5.patchedMoment=!0}if(!data$5.patchedThemes&&n.SemanticColor){try{Themes$3.initialize(n)}catch(t){console.error("Failed to patch themes:",t.message)}data$5.patchedThemes=!0}if(O(n,t)){data$5.cache[t]=n;var h=y?modules[t]:n;if(!u)return{v:h};E.found.push(h)}if(g&&n.default&&O(n.default,t)){data$5.cache[t]=n;var N=y?modules[t]:f?n.default:n;if(!u)return{v:N};E.found.push(N)}};if(!t)throw Error("You must provide a filter to search by.");var{all:u=!1,interop:f=!0,cache:d=!0,initial:h=null,esModules:g=!0,raw:y=!1}=n,E={found:h??[],errored:!1},O=(n,l)=>{try{return t(n,l)}catch(t){if(E.errored)return;E.errored=!0,console.error("Search filter threw an error, degrading performance.","This will create a bad experience for the user including lag spikes, a slow startup, etc.","Please fix this as soon as possible.","\n",t.stack)}},N=d?data$5.cache:modules;for(var S in N){var R=l(S);if("object"===_type_of$6(R))return R.v}return!d||u||E.found.length?d&&u?find$1(t,Object.assign(n,{cache:!1,initial:E.found})):u?E.found:null:find$1(t,Object.assign(n,{cache:!1}))}function bulk(...t){var n=Array(t.length);return find$1((l,u)=>{for(var f=0,d=t.length;f<d;f++){var h=t[f];h.filter&&(h.filter(l,u)&&(n[f]=l),l.default&&h.filter(l.default,u)&&(n[f]=h.interop??!0?l.default:l))}return n.filter(String).length===search.length},{interop:!1,esModules:!1}),n}function findByProps(...t){var[n,l]=parseOptions(t);return search(n,l,"byProps")}function findByPrototypes(...t){var[n,l]=parseOptions(t);return search(n,l,"byPrototypes")}function findStore(...t){var[[n],{short:l=!0,...u}]=parseOptions(t);return search([n,l],u,"byStore")}function findByName(...t){var[n,l]=parseOptions(t);return search(n,l,"byName")}function search(t,n,l){if(n.lazy){var u;return new Proxy({__METRO_LAZY__:!0,get module(){return u}},{get(f,d){if(d&&"string"==typeof d)return(u??=search(t,Object.assign(n,{lazy:!1}),l),"module"===d)?u:u?.[d]},set:(f,d,h)=>Object.defineProperty((u??=search(t,Object.assign(n,{lazy:!1}),l))??{},d,{value:h,writable:!0,configurable:!0})})}if("string"==typeof l&&(l=Filters[l]),l)return n.bulk?bulk(...t.map(t=>!Array.isArray(t)&&"object"==typeof t&&t.params?{filter:l(...t.params??[]),...t}:{filter:l(...t),interop:!0})):find$1(l(...t),n)}function parseOptions(t,n=t=>"object"==typeof t&&!Array.isArray(t),l={}){return[t,n(t[t.length-1])?t.pop():l]}function deenumerate(t){Object.defineProperty(modules,t,{value:modules[t],enumerable:!1,configurable:!0,writable:!0})}var Modules=Object.freeze({__proto__:null,bulk:bulk,find:find$1,findByName:findByName,findByProps:findByProps,findByPrototypes:findByPrototypes,findStore:findStore}),Animated=findByProps("Value","interpolateNode","View",{lazy:!0}),Forms=findByProps("Form","FormSection",{lazy:!0}),SVG=findByProps("Svg","Path",{lazy:!0}),Slider=find$1(t=>t.render?.name==="SliderComponent"),Search$1=findByName("StaticSearchBarContainer"),HelpMessage=findByName("HelpMessage"),Media=findByProps("openMediaModal"),Navigation=findByProps("useNavigation",{lazy:!0}),Components=Object.freeze({__proto__:null,Animated:Animated,Forms:Forms,HelpMessage:HelpMessage,Media:Media,Navigation:Navigation,SVG:SVG,Search:Search$1,Slider:Slider}),Reanimated=findByProps("useAnimatedStyle",{lazy:!0}),Flux=findByProps("Store","connectStores",{lazy:!0}),Moment=findByProps("isMoment"),ReactNative$1=window.ReactNative,React$1=window.React,StyleSheet=findByProps("createThemedStyleSheet",{lazy:!0}),Dispatcher=findByProps("_dispatch",{lazy:!0}),Constants=findByProps("Fonts","Endpoints",{lazy:!0}),Theme$1=findByProps("colors","meta",{lazy:!0}),REST=findByProps("getAPIBaseURL",{lazy:!0}),i18n$1=findByProps("Messages",{lazy:!0}),Common=Object.freeze({__proto__:null,Constants:Constants,Dispatcher:Dispatcher,Flux:Flux,Moment:Moment,REST:REST,React:React$1,ReactNative:ReactNative$1,Reanimated:Reanimated,StyleSheet:StyleSheet,Theme:Theme$1,i18n:i18n$1}),styles$7=StyleSheet.createThemedStyleSheet({search:{margin:0,marginTop:5,padding:10,borderBottomWidth:0,background:"none",backgroundColor:"none"}});function Search(t){return React.createElement(Search$1,{...t,style:mergeStyles(styles$7.search,t.style)})}var Patcher$4=createPatcher("error-boundary"),Boundary=findByName("ErrorBoundary"),data$4={id:"dev.errorBoundary",default:!0};function initialize$8(){Boundary&&Patcher$4.after(Boundary.prototype,"render",(t,n,l)=>React.createElement(ErrorBoundary,{state:t.state},l))}function shutdown$5(){Patcher$4.unpatchAll()}var errorBoundary=Object.freeze({__proto__:null,data:data$4,initialize:initialize$8,shutdown:shutdown$5}),Patcher$3=createPatcher("no-track"),data$3={id:"modules.antiTrack",default:!0};function initialize$7(){var[t,n,l]=findByProps({params:["trackWithMetadata"]},{params:["AnalyticsActionHandlers"]},{params:["encodeProperties","track"]},{bulk:!0});attempt(()=>Patcher$3.instead(t,"trackWithMetadata",noop)),attempt(()=>Patcher$3.instead(n.AnalyticsActionHandlers,"handleConnectionClosed",noop)),attempt(()=>Patcher$3.instead(n.AnalyticsActionHandlers,"handleConnectionOpen",noop)),attempt(()=>Patcher$3.instead(n.AnalyticsActionHandlers,"handleFingerprint",noop)),attempt(()=>Patcher$3.instead(n.AnalyticsActionHandlers,"handleTrack",noop)),attempt(()=>Patcher$3.instead(l,"track",noop))}function shutdown$4(){Patcher$3.unpatchAll()}var antiTrack=Object.freeze({__proto__:null,data:data$3,initialize:initialize$7,shutdown:shutdown$4}),Guilds=findStore("Guild",{lazy:!0}),Theme=findStore("Theme",{lazy:!0}),Users=findStore("User",{lazy:!0}),Stores=Object.freeze({__proto__:null,Guilds:Guilds,Theme:Theme,Users:Users});function asyncGeneratorStep$5(t,n,l,u,f,d,h){try{var g=t[d](h),y=g.value}catch(t){l(t);return}g.done?n(y):Promise.resolve(y).then(u,f)}function _async_to_generator$5(t){return function(){var n=this,l=arguments;return new Promise(function(u,f){var d=t.apply(n,l);function h(t){asyncGeneratorStep$5(d,u,f,h,g,"next",t)}function g(t){asyncGeneratorStep$5(d,u,f,h,g,"throw",t)}h(void 0)})}}var Patcher$2=createPatcher("badges"),data$2={id:"modules.badges",default:!0},cache={user:{},badges:{}};function initialize$6(){for(var t of findByName("ProfileBadges",{all:!0,interop:!1}))Patcher$2.after(t,"default",(t,[{user:n,isUnbound:l,style:u,...f}],d)=>{var[h,g]=React.useState({data:[]});if(l||(React.useEffect(()=>{try{fetchUserBadges(n.id).then(t=>g({data:t}))}catch(t){console.error(`Failed to request/parse badges for ${n.id}`)}},[]),!h.data.length))return d;if(d){var y=h.data.map(t=>makeBadge(t,u));d?.props.badges?d.props.badges.push(...y):d?.props.children&&d?.props.children.push(...y)}})}function shutdown$3(){Patcher$2.unpatchAll()}function fetchUserBadges(t){return _fetchUserBadges.apply(this,arguments)}function _fetchUserBadges(){return(_fetchUserBadges=_async_to_generator$5(function*(t){if(cache.user[t]?.date&&Date.now()-cache.user[t].date<Times.HOUR)return cache.user[t].badges;var n=yield fetch(Links.Badges+t+".json",{headers:{"Cache-Control":"no-cache"}}).then(t=>t.json()).catch(()=>[]);return Array.isArray(n)&&(cache.user[t]={badges:n,date:Date.now()}),n})).apply(this,arguments)}var makeBadge=(t,n)=>React.createElement(ReactNative.View,{unbound:!0,key:t,style:{alignItems:"center",flexDirection:"row",justifyContent:"flex-end"}},React.createElement(Badge,{type:t,size:Array.isArray(n)?n.find(t=>t.paddingVertical&&t.paddingHorizontal)?18:24:20,margin:Array.isArray(n)?4:8})),Badge=({type:t,size:n,margin:l})=>{var[u,f]=React.useState(null);if(React.useEffect(()=>{try{fetchBadge(t).then(f)}catch(n){console.error(`Failed to get badge data for ${t}.`,n.message)}},[]),!u?.url)return null;var d={image:{width:n,height:n,resizeMode:"contain",marginLeft:l,marginRight:l+1}},h=u.url[Theme.theme];return React.createElement(ReactNative.TouchableOpacity,{onPress:()=>{}},React.createElement(ReactNative.Image,{style:d.image,source:{uri:h}}))};function fetchBadge(t){return _fetchBadge.apply(this,arguments)}function _fetchBadge(){return(_fetchBadge=_async_to_generator$5(function*(t){if(cache.badges[t]?.date&&Date.now()-cache.badges[t].date<Times.HOUR)return cache.badges[t].data;var n=yield fetch(Links.Badges+`data/${t}.json`,{headers:{"Cache-Control":"no-cache"}}).then(t=>t.json()).catch(()=>{});return n?.url&&(cache.badges[t]={data:n,date:Date.now()}),n})).apply(this,arguments)}var badges=Object.freeze({__proto__:null,data:data$2,initialize:initialize$6,shutdown:shutdown$3}),Logger$8=createLogger("Debug","WebSocket"),data$1={id:"dev.debugBridge.enabled",settings:["dev.debugBridge.host"],default:!1};function initialize$5(isReconnect=!1){var settings=getStore("unbound");try{ws=new WebSocket(`ws://${settings.get("dev.debugBridge.host","192.168.0.35:9090")}`)}catch(e){alert("Failed to connect to the debug websocket. Make sure the host is reachable."),Logger$8.error(e.message)}ws?.addEventListener("open",()=>{Logger$8.success(isReconnect?"Reconnected.":"Connected.")}),ws?.addEventListener("message",message=>{try{Logger$8.log(eval(message.data))}catch(e){Logger$8.error(e)}}),globalThis._nativeLoggingHook=nativeLoggingHook,globalThis.nativeLoggingHook=function(t,n){return ws?.readyState===WebSocket.OPEN&&ws.send(JSON.stringify({level:n,message:t})),globalThis._nativeLoggingHook.apply(this,arguments)};var{remove}=ReactNative$1.AppState?.addEventListener("change",t=>{switch(t){case"active":if(ws||ws?.readyState===WebSocket.OPEN)return;remove(),initialize$5(!0);break;case"background":shutdown$2()}})}function shutdown$2(){globalThis._nativeLoggingHook&&(globalThis.nativeLoggingHook=globalThis._nativeLoggingHook),ws?.readyState===WebSocket.OPEN&&(ws.close(),ws=null)}var debug$1=Object.freeze({__proto__:null,data:data$1,initialize:initialize$5,shutdown:shutdown$2,get ws(){return ws}}),instances=Object.freeze({__proto__:null,AntiTrack:antiTrack,Badges:badges,Debug:debug$1,ErrorBoundary:errorBoundary});function asyncGeneratorStep$4(t,n,l,u,f,d,h){try{var g=t[d](h),y=g.value}catch(t){l(t);return}g.done?n(y):Promise.resolve(y).then(u,f)}function _async_to_generator$4(t){return function(){var n=this,l=arguments;return new Promise(function(u,f){var d=t.apply(n,l);function h(t){asyncGeneratorStep$4(d,u,f,h,g,"next",t)}function g(t){asyncGeneratorStep$4(d,u,f,h,g,"throw",t)}h(void 0)})}}var Logger$7=createLogger("Core","Built-Ins"),settings=Storage.getStore("unbound"),started=new Set;function initialize$4(){for(var t in instances){var n=instances[t];settings.get(n.data.id,n.data.default??!0)&&start(t)}}function shutdown$1(){for(var t of started)stop(t)}function start(t){return _start.apply(this,arguments)}function _start(){return(_start=_async_to_generator$4(function*(t){if(instances[t]&&!started.has(t)){var n=instances[t];try{yield n.initialize?.(),started.add(t)}catch(n){started.delete(t),Logger$7.error(`Failed to initialize built-in ${t}: ${n.message}`)}}})).apply(this,arguments)}function stop(t){return _stop.apply(this,arguments)}function _stop(){return(_stop=_async_to_generator$4(function*(t){if(instances[t]&&started.has(t)){var n=instances[t];try{yield n.shutdown?.(),started.delete(t)}catch(n){started.add(t),Logger$7.error(`Failed to shutdown built-in ${t}: ${n.message}`)}}})).apply(this,arguments)}function onSettingsChange(t){return _onSettingsChange.apply(this,arguments)}function _onSettingsChange(){return(_onSettingsChange=_async_to_generator$4(function*({store:t,key:n,value:l}){if("unbound"===t)for(var u in instances){var f=instances[u];f.data.id===n?(l?start:stop)(u):f.data.settings?.includes(n)&&started.has(u)&&(yield stop(u),start(u))}})).apply(this,arguments)}Storage.on("changed",onSettingsChange);var BuiltIns={initialize:initialize$4,shutdown:shutdown$1,start,stop},Themes$1=findByProps("updateTheme","overrideTheme",{lazy:!0}),Dialog=findByProps("show","close","openLazy",{lazy:!0}),Profiles=findByProps("showUserProfile",{lazy:!0}),UI=Object.freeze({__proto__:null,Dialog:Dialog,Profiles:Profiles,Themes:Themes$1});function apply$3(){Dispatcher?.subscribe&&Dispatcher.subscribe("I18N_LOAD_SUCCESS",handler)}function remove$3(){Dispatcher?.subscribe&&Dispatcher.unsubscribe("I18N_LOAD_SUCCESS",handler)}function handler(){Themes$1.overrideTheme(Theme.theme)}var themeFix=Object.freeze({__proto__:null,apply:apply$3,remove:remove$3}),assets=new Set,registry=findByProps("registerAsset"),Logger$6=createLogger("Assets");function initialize$3(){Patcher$6.after("unbound-assets",registry,"registerAsset",(t,[n],l)=>{Object.assign(n,{id:l}),assets.add(n)});for(var t=1;;t++){var n=registry.getAssetByID(t);if(!n)break;assets.has(n)||(Object.assign(n,{id:t}),assets.add(n))}}function find(t){return Object.values(assets).find(t)}function getByName(t,n="png"){return[...assets].find(l=>l.name===t&&l.type===n)}function getByID(t){return registry.getAssetByID(t)}function getIDByName(t,n="png"){return getByName(t,n)?.id}function getAll(){return[...assets]}var Icons=new Proxy({},{get:(t,n)=>getIDByName(n)});try{initialize$3()}catch(e){Logger$6.error("Failed to initialize assets:",e.message)}var Assets$1={assets,getByName,getByID,getIDByName},assets$1=Object.freeze({__proto__:null,Icons:Icons,assets:assets,default:Assets$1,find:find,getAll:getAll,getByID:getByID,getByName:getByName,getIDByName:getIDByName,registry:registry}),styles$6=StyleSheet.createThemedStyleSheet({icon:{color:Theme$1.colors.INTERACTIVE_NORMAL,opacity:ReactNative.Platform.select({android:.6,ios:.75}),marginLeft:.5}});function palette({height:t,width:n,color:l=styles$6.icon.color,...u}){return React$1.createElement(SVG.Svg,{viewBox:"0 0 24 24",style:{height:t,width:n,...styles$6.icon,color:l},fill:"currentColor",...u},React$1.createElement(SVG.Path,{d:"M0 0h24v24H0z",fill:"none"}),React$1.createElement(SVG.Path,{d:"M12 3c-4.97 0-9 4.03-9 9s4.03 9 9 9c.83 0 1.5-.67 1.5-1.5 0-.39-.15-.74-.39-1.01-.23-.26-.38-.61-.38-.99 0-.83.67-1.5 1.5-1.5H16c2.76 0 5-2.24 5-5 0-4.42-4.03-8-9-8zm-5.5 9c-.83 0-1.5-.67-1.5-1.5S5.67 9 6.5 9 8 9.67 8 10.5 7.33 12 6.5 12zm3-4C8.67 8 8 7.33 8 6.5S8.67 5 9.5 5s1.5.67 1.5 1.5S10.33 8 9.5 8zm5 0c-.83 0-1.5-.67-1.5-1.5S13.67 5 14.5 5s1.5.67 1.5 1.5S15.33 8 14.5 8zm3 4c-.83 0-1.5-.67-1.5-1.5S16.67 9 17.5 9s1.5.67 1.5 1.5-.67 1.5-1.5 1.5z"}))}var styles$5=StyleSheet.createThemedStyleSheet({icon:{color:Theme$1.colors.INTERACTIVE_NORMAL,opacity:ReactNative.Platform.select({android:.6,ios:.75}),marginLeft:.5}});function puzzle({height:t,width:n,color:l=styles$5.icon.color,...u}){return React$1.createElement(SVG.Svg,{viewBox:"0 0 24 24",style:{height:t,width:n,...styles$5.icon,color:l},fill:"currentColor",...u},React$1.createElement(SVG.Path,{d:"M0 0h24v24H0z",fill:"none"}),React$1.createElement(SVG.Path,{d:"M20.5 11H19V7c0-1.1-.9-2-2-2h-4V3.5C13 2.12 11.88 1 10.5 1S8 2.12 8 3.5V5H4c-1.1 0-1.99.9-1.99 2v3.8H3.5c1.49 0 2.7 1.21 2.7 2.7s-1.21 2.7-2.7 2.7H2V20c0 1.1.9 2 2 2h3.8v-1.5c0-1.49 1.21-2.7 2.7-2.7 1.49 0 2.7 1.21 2.7 2.7V22H17c1.1 0 2-.9 2-2v-4h1.5c1.38 0 2.5-1.12 2.5-2.5S21.88 11 20.5 11z"}))}var{DCDDeviceManager,BundleUpdaterManager}=ReactNative$1.NativeModules,BundleInfo=ReactNative$1.NativeModules.InfoDictionaryManager??ReactNative$1.NativeModules.RTNClientInfoManager,BundleManager=BundleUpdaterManager,DeviceInfo=DCDDeviceManager,native=Object.freeze({__proto__:null,BundleInfo:BundleInfo,BundleManager:BundleManager,DeviceInfo:DeviceInfo}),Invites=findByProps("acceptInviteAndTransitionToInviteChannel",{lazy:!0}),Actions=Object.freeze({__proto__:null,Invites:Invites});function _assert_this_initialized$5(t){if(void 0===t)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function _class_call_check$6(t,n){if(!(t instanceof n))throw TypeError("Cannot call a class as a function")}function _defineProperties$6(t,n){for(var l=0;l<n.length;l++){var u=n[l];u.enumerable=u.enumerable||!1,u.configurable=!0,"value"in u&&(u.writable=!0),Object.defineProperty(t,u.key,u)}}function _create_class$6(t,n,l){return n&&_defineProperties$6(t.prototype,n),l&&_defineProperties$6(t,l),t}function _define_property$5(t,n,l){return n in t?Object.defineProperty(t,n,{value:l,enumerable:!0,configurable:!0,writable:!0}):t[n]=l,t}function _get_prototype_of$5(t){return(_get_prototype_of$5=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function _inherits$5(t,n){if("function"!=typeof n&&null!==n)throw TypeError("Super expression must either be null or a function");t.prototype=Object.create(n&&n.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),n&&_set_prototype_of$5(t,n)}function _possible_constructor_return$5(t,n){return n&&("object"===_type_of$5(n)||"function"==typeof n)?n:_assert_this_initialized$5(t)}function _set_prototype_of$5(t,n){return(_set_prototype_of$5=Object.setPrototypeOf||function(t,n){return t.__proto__=n,t})(t,n)}function _type_of$5(t){return t&&"undefined"!=typeof Symbol&&t.constructor===Symbol?"symbol":typeof t}function _is_native_reflect_construct$5(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}function _create_super$5(t){var n=_is_native_reflect_construct$5();return function(){var l,u=_get_prototype_of$5(t);if(n){var f=_get_prototype_of$5(this).constructor;l=Reflect.construct(u,arguments,f)}else l=u.apply(this,arguments);return _possible_constructor_return$5(this,l)}}var Plugins$1=function(Manager1){_inherits$5(Plugins1,Manager1);var _super=_create_super$5(Plugins1);function Plugins1(){var t;return _class_call_check$6(this,Plugins1),_define_property$5(_assert_this_initialized$5(t=_super.call(this,ManagerType.Plugins)),"extension","js"),t}return _create_class$6(Plugins1,[{key:"initialize",value:function(){for(var t of window.UNBOUND_PLUGINS??[]){var{manifest:n,bundle:l}=t;this.load(l,n)}}},{key:"handleBundle",value:function handleBundle(bundle){if(Storage.get("unbound","recovery",!1))return{start:()=>{},stop:()=>{}};var iife=eval(`() => { return ${bundle} }`),payload=iife(),res="function"==typeof payload?payload():payload;return res.default??res}}]),Plugins1}(Manager),Plugins$2=new Plugins$1;function _assert_this_initialized$4(t){if(void 0===t)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function _class_call_check$5(t,n){if(!(t instanceof n))throw TypeError("Cannot call a class as a function")}function _defineProperties$5(t,n){for(var l=0;l<n.length;l++){var u=n[l];u.enumerable=u.enumerable||!1,u.configurable=!0,"value"in u&&(u.writable=!0),Object.defineProperty(t,u.key,u)}}function _create_class$5(t,n,l){return n&&_defineProperties$5(t.prototype,n),l&&_defineProperties$5(t,l),t}function _get_prototype_of$4(t){return(_get_prototype_of$4=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function _inherits$4(t,n){if("function"!=typeof n&&null!==n)throw TypeError("Super expression must either be null or a function");t.prototype=Object.create(n&&n.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),n&&_set_prototype_of$4(t,n)}function _possible_constructor_return$4(t,n){return n&&("object"===_type_of$4(n)||"function"==typeof n)?n:_assert_this_initialized$4(t)}function _set_prototype_of$4(t,n){return(_set_prototype_of$4=Object.setPrototypeOf||function(t,n){return t.__proto__=n,t})(t,n)}function _type_of$4(t){return t&&"undefined"!=typeof Symbol&&t.constructor===Symbol?"symbol":typeof t}function _is_native_reflect_construct$4(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}function _create_super$4(t){var n=_is_native_reflect_construct$4();return function(){var l,u=_get_prototype_of$4(t);if(n){var f=_get_prototype_of$4(this).constructor;l=Reflect.construct(u,arguments,f)}else l=u.apply(this,arguments);return _possible_constructor_return$4(this,l)}}var styles$4=StyleSheet.createThemedStyleSheet({label:{fontFamily:Constants.Fonts.DISPLAY_SEMIBOLD,color:Theme$1.colors.TEXT_NORMAL,fontSize:16},image:{width:24,height:24}}),_class$1=function(t){_inherits$4(l,t);var n=_create_super$4(l);function l(){return _class_call_check$5(this,l),n.apply(this,arguments)}return _create_class$5(l,[{key:"render",value:function(){var{item:t}=this.props;return React$1.createElement(Forms.FormRow,{label:()=>React$1.createElement(ReactNative$1.Text,{style:styles$4.label},t.name),leading:()=>React$1.createElement(ReactNative$1.Image,{style:styles$4.image,source:t.id}),subLabel:`${t.type.toUpperCase()} - ${t.width}x${t.height}`,onPress:this.open.bind(this)})}},{key:"open",value:function(){}}]),l}(React$1.PureComponent);function AssetBrowser(){var[t,n]=React$1.useState(),l=[...assets.values()].filter(t=>"png"===t.type),u=t?[]:l;if(t)for(var f of l)(f.name.toLowerCase().includes(t)||f.httpServerLocation.toLowerCase().includes(t))&&u.push(f);return React$1.createElement(ReactNative$1.View,null,React$1.createElement(Search$1,{placeholder:i18n$1.Messages.UNBOUND_SEARCH_ASSETS,onChangeText:t=>n(t),onClear:()=>n(""),value:t}),React$1.createElement(Forms.FormSection,{style:{flex:1}},React$1.createElement(ReactNative$1.FlatList,{keyExtractor:(t,n)=>String(n),data:u,ItemSeparatorComponent:Forms.FormDivider,initialNumToRender:20,renderItem:({item:t})=>React$1.createElement(_class$1,{item:t})})))}function createStore(t){var n=new Set,l=Object.freeze({getState:(n=t=>t)=>n(t),setState(l){var u="function"==typeof l?l(t):l;for(var f of(t=Object.assign({},t,u),n))try{f(t)}catch{console.error("Failed to fire listener in zustand store.")}},addListener(t){if(!n.has(t))return n.add(t),()=>n.delete(t)},removeListener:t=>n.delete(t),get listeners(){return n}});function u(t=t=>t){var[,u]=React$1.useReducer(t=>t+1,0);return React$1.useEffect(()=>{var t=()=>{u()};return n.add(t),()=>void n.delete(t)},[]),l.getState(t)}return Object.assign(u,l,{*[Symbol.iterator](){yield l,yield u}}),u}var[store$1,useStore$1]=createStore({logs:[]});function addLog({message:t,level:n}){store$1.setState(l=>({logs:[...l.logs,{time:Date.now(),message:t,level:n}]}))}var Logger$5={store:store$1,useStore:useStore$1};function Logs(){var t=Navigation.useNavigation(),n=Logger$5.useStore(),l=t.addListener("focus",()=>{l(),t.setOptions({headerRight:HeaderRight$1})});return React$1.createElement(Forms.FormSection,{style:{flex:1}},React$1.createElement(ReactNative$1.FlatList,{data:n.logs.sort((t,n)=>t.time-n.time),keyExtractor:(t,n)=>String(n),ListEmptyComponent:React$1.createElement(ReactNative$1.View,{style:styles$3.empty},React$1.createElement(ReactNative$1.Image,{style:styles$3.emptyImage,source:Icons.img_connection_empty_dark}),React$1.createElement(ReactNative$1.Text,{style:styles$3.emptyMessage},i18n$1.Messages.UNBOUND_LOGS_EMPTY)),ItemSeparatorComponent:Forms.FormDivider,renderItem:({item:t})=>{var n=StyleSheet.createThemedStyleSheet({log:{fontSize:16,fontFamily:Constants.Fonts.DISPLAY_SEMIBOLD,color:(()=>{switch(t.level){case 1:return Theme$1.colors.TEXT_NORMAL;case 0:return Theme$1.colors.TEXT_MUTED;case 2:return"yellow";case 3:return"red"}})()},time:{fontSize:16,fontFamily:Constants.Fonts.DISPLAY_SEMIBOLD,color:Theme$1.colors.TEXT_MUTED}});return React$1.createElement(Forms.FormRow,{label:()=>React$1.createElement(ReactNative$1.Text,{style:n.log},t.message),subLabel:Moment(t.time).format("HH:mm:ss.SSS")})}}))}var styles$3=StyleSheet.createThemedStyleSheet({touchable:{marginRight:10},image:{tintColor:Theme$1.colors.TEXT_NORMAL},empty:{justifyContent:"center",alignItems:"center",marginTop:"50%"},emptyImage:{marginBottom:10},emptyMessage:{color:Theme$1.colors.TEXT_MUTED,fontFamily:Constants.Fonts.PRIMARY_SEMIBOLD,textAlign:"center",paddingHorizontal:25}});function HeaderRight$1(){return React$1.createElement(ReactNative$1.TouchableOpacity,{style:styles$3.touchable,onPress:()=>Logger$5.store.setState({logs:[]})},React$1.createElement(ReactNative$1.Image,{style:styles$3.image,source:Icons.ic_input_clear_24px}))}function Developer(){var t=Navigation.useNavigation(),n=useSettingsStore("unbound"),l={Debug:Assets$1.getIDByName("debug"),Sparkle:Assets$1.getIDByName("ic_sparkle3")};return React$1.createElement(ReactNative.ScrollView,null,React$1.createElement(Forms.FormSection,{title:i18n$1.Messages.UNBOUND_DEBUG_BRIDGE,titleStyleType:"no_border_or_margin"},React$1.createElement(Forms.FormRow,{label:i18n$1.Messages.UNBOUND_ENABLED,subLabel:i18n$1.Messages.UNBOUND_DEBUG_BRIDGE_DESC,trailing:React$1.createElement(Forms.FormSwitch,{value:n.get("dev.debugBridge.enabled",!1),onValueChange:()=>n.toggle("dev.debugBridge.enabled",!1)})}),n.get("dev.debugBridge.enabled",!1)&&React$1.createElement(React$1.Fragment,null,React$1.createElement(Forms.FormDivider,null),React$1.createElement(Forms.FormInput,{value:n.get("dev.debugBridge.host","192.168.0.35:9090"),onChange:t=>n.set("dev.debugBridge.host",t),title:i18n$1.Messages.UNBOUND_DEBUG_BRIDGE_IP}))),React$1.createElement(Forms.FormSection,{title:i18n$1.Messages.UNBOUND_LOADER},React$1.createElement(Forms.FormRow,{label:i18n$1.Messages.UNBOUND_ENABLED,subLabel:i18n$1.Messages.UNBOUND_LOADER_ENABLED_DESC,trailing:React$1.createElement(Forms.FormSwitch,{value:n.get("loader.enabled",!0),onValueChange:()=>n.toggle("loader.enabled",!0)})}),React$1.createElement(Forms.FormDivider,null),React$1.createElement(Forms.FormRow,{label:i18n$1.Messages.UNBOUND_LOADER_DEVTOOLS,subLabel:i18n$1.Messages.UNBOUND_LOADER_DEVTOOLS_DESC,trailing:React$1.createElement(Forms.FormSwitch,{value:n.get("loader.devtools",!1),onValueChange:()=>n.toggle("loader.devtools",!1)})}),React$1.createElement(Forms.FormDivider,null),React$1.createElement(Forms.FormRow,{label:i18n$1.Messages.UNBOUND_LOADER_UPDATER_FORCE,subLabel:i18n$1.Messages.UNBOUND_LOADER_UPDATER_FORCE_DESC,trailing:React$1.createElement(Forms.FormSwitch,{value:n.get("loader.update.force",!1),onValueChange:()=>n.toggle("loader.update.force",!1)})}),React$1.createElement(Forms.FormDivider,null),React$1.createElement(Forms.FormInput,{value:n.get("loader.update.url",Links.Bundle),onChange:t=>n.set("loader.update.url",t),title:i18n$1.Messages.UNBOUND_LOADER_CUSTOM_BUNDLE})),React$1.createElement(Forms.FormSection,{title:i18n$1.Messages.UNBOUND_MISC},React$1.createElement(Forms.FormRow,{label:i18n$1.Messages.UNBOUND_ERROR_BOUNDARY,subLabel:i18n$1.Messages.UNBOUND_ERROR_BOUNDARY_DESC,trailing:React$1.createElement(Forms.FormSwitch,{value:n.get("dev.errorBoundary",!0),onValueChange:()=>n.toggle("dev.errorBoundary",!0)})}),React$1.createElement(Forms.FormDivider,null),React$1.createElement(Forms.FormRow,{label:i18n$1.Messages.UNBOUND_ASSET_BROWSER,leading:React$1.createElement(Forms.FormRow.Icon,{source:l.Sparkle}),trailing:Forms.FormRow.Arrow,onPress:()=>t.push(Keys.Custom,{title:i18n$1.Messages.UNBOUND_ASSET_BROWSER,render:AssetBrowser})}),React$1.createElement(Forms.FormDivider,null),React$1.createElement(Forms.FormRow,{label:i18n$1.Messages.UNBOUND_DEBUG_LOGS,leading:React$1.createElement(Forms.FormRow.Icon,{source:l.Debug}),trailing:Forms.FormRow.Arrow,onPress:()=>t.push(Keys.Custom,{title:i18n$1.Messages.UNBOUND_DEBUG_LOGS,render:Logs})})),React$1.createElement(ReactNative.View,{style:{marginBottom:50}}))}function Toasts(){var t=useSettingsStore("unbound");return Assets$1.getIDByName("debug"),Assets$1.getIDByName("ic_sparkle3"),React.createElement(ReactNative.ScrollView,null,React.createElement(Forms.FormSection,null,React.createElement(Forms.FormRow,{label:i18n$1.Messages.UNBOUND_ENABLED,subLabel:i18n$1.Messages.UNBOUND_TOASTS_DESC,trailing:React.createElement(Forms.FormSwitch,{value:t.get("toasts.enabled",!0),onValueChange:()=>t.toggle("toasts.enabled",!0)})}),React.createElement(Forms.FormDivider,null),React.createElement(Forms.FormRow,{label:i18n$1.Messages.UNBOUND_TOASTS_ANIMATIONS,subLabel:i18n$1.Messages.UNBOUND_TOASTS_ANIMATIONS_DESC,trailing:React.createElement(Forms.FormSwitch,{value:t.get("toasts.animations",!0),onValueChange:()=>t.toggle("toasts.animations",!0)})})),React.createElement(Forms.FormSection,null,React.createElement(Forms.FormRow,{label:i18n$1.Messages.UNBOUND_TOAST_DURATION,trailing:React.createElement(Forms.FormText,{size:Forms.FormTextSizes.MEDIUM},i18n$1.Messages.DURATION_SECONDS.format({seconds:t.get("toasts.duration",3)}))}),React.createElement(Slider,{style:{marginHorizontal:15},value:t.get("toasts.duration",3),onValueChange:n=>t.set("toasts.duration",Math.round(n)),minimumValue:3,maximumValue:10,minimumTrackTintColor:Theme$1.unsafe_rawColors.BRAND_500,maximumTrackTintColor:Constants.UNSAFE_Colors.GREY2})),React.createElement(Forms.FormHint,null,i18n$1.Messages.UNBOUND_TOAST_DURATION_DESC))}var styles$2=StyleSheet.createThemedStyleSheet({trailingText:{color:Theme$1.colors.TEXT_MUTED},container:{marginBottom:50}});function General(){var t=Navigation.useNavigation(),n=useSettingsStore("unbound"),l={Twitter:Assets$1.getIDByName("img_account_sync_twitter_white"),GitHub:Assets$1.getIDByName("img_account_sync_github_white"),Development:Assets$1.getIDByName("ic_progress_wrench_24px"),Toasts:Assets$1.getIDByName("ic_notification_settings"),Retry:Assets$1.getIDByName("ic_message_retry"),Discord:Assets$1.getIDByName("Discord"),Debug:Assets$1.getIDByName("debug")};return React$1.createElement(ReactNative$1.ScrollView,null,React$1.createElement(ReactNative$1.KeyboardAvoidingView,{enabled:!0,behavior:"position",style:styles$2.container,keyboardVerticalOffset:100,contentContainerStyle:{backfaceVisibility:"hidden"}},React$1.createElement(Forms.FormSection,null,React$1.createElement(Forms.FormRow,{label:i18n$1.Messages.UNBOUND_RECOVERY_MODE,subLabel:i18n$1.Messages.UNBOUND_RECOVERY_MODE_DESC,leading:React$1.createElement(Forms.FormRow.Icon,{source:l.Retry}),trailing:React$1.createElement(Forms.FormSwitch,{value:n.get("recovery",!1),onValueChange:()=>{n.toggle("recovery",!1),Dialog.confirm({title:i18n$1.Messages.UNBOUND_CHANGE_RESTART,body:i18n$1.Messages.UNBOUND_CHANGE_RESTART_DESC,confirmText:i18n$1.Messages.UNBOUND_RESTART,onConfirm:BundleManager.reload})}})})),React$1.createElement(Forms.FormSection,null,React$1.createElement(Forms.FormRow,{label:i18n$1.Messages.UNBOUND_TOAST_SETTINGS,leading:React$1.createElement(Forms.FormRow.Icon,{source:l.Toasts}),trailing:Forms.FormRow.Arrow,onPress:()=>t.push(Keys.Custom,{title:i18n$1.Messages.UNBOUND_TOAST_SETTINGS,render:Toasts})}),React$1.createElement(Forms.FormDivider,null),React$1.createElement(Forms.FormRow,{label:i18n$1.Messages.UNBOUND_DEVELOPMENT_SETTINGS,leading:React$1.createElement(Forms.FormRow.Icon,{source:l.Development}),trailing:Forms.FormRow.Arrow,onPress:()=>t.push(Keys.Custom,{title:i18n$1.Messages.UNBOUND_DEVELOPMENT_SETTINGS,render:Developer})})),React$1.createElement(Forms.FormSection,{title:i18n$1.Messages.UNBOUND_INFO},React$1.createElement(Forms.FormRow,{label:"Installed Plugins",leading:React$1.createElement(puzzle,{width:24,height:24}),trailing:()=>React$1.createElement(ReactNative$1.Text,{style:styles$2.trailingText},Plugins$2.addons.length)}),React$1.createElement(Forms.FormDivider,null),React$1.createElement(Forms.FormRow,{label:"Installed Themes",leading:React$1.createElement(palette,{width:24,height:24}),trailing:()=>React$1.createElement(ReactNative$1.Text,{style:styles$2.trailingText},Themes$3.addons.length)})),React$1.createElement(Forms.FormSection,{title:"Links"},React$1.createElement(Forms.FormRow,{label:"Discord Server",leading:React$1.createElement(Forms.FormRow.Icon,{source:l.Discord}),trailing:Forms.FormRow.Arrow,onPress:()=>Invites.acceptInviteAndTransitionToInviteChannel({inviteKey:Invite})}),React$1.createElement(Forms.FormDivider,null),React$1.createElement(Forms.FormRow,{label:"GitHub",leading:React$1.createElement(Forms.FormRow.Icon,{source:l.GitHub}),trailing:Forms.FormRow.Arrow,onPress:()=>ReactNative$1.Linking.openURL(Links.GitHub)}),React$1.createElement(Forms.FormDivider,null),React$1.createElement(Forms.FormRow,{label:"Twitter",leading:React$1.createElement(Forms.FormRow.Icon,{source:l.Twitter}),trailing:Forms.FormRow.Arrow,onPress:()=>ReactNative$1.Linking.openURL(Links.Twitter)}))))}function _assert_this_initialized$3(t){if(void 0===t)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function _class_call_check$4(t,n){if(!(t instanceof n))throw TypeError("Cannot call a class as a function")}function _defineProperties$4(t,n){for(var l=0;l<n.length;l++){var u=n[l];u.enumerable=u.enumerable||!1,u.configurable=!0,"value"in u&&(u.writable=!0),Object.defineProperty(t,u.key,u)}}function _create_class$4(t,n,l){return n&&_defineProperties$4(t.prototype,n),l&&_defineProperties$4(t,l),t}function _define_property$4(t,n,l){return n in t?Object.defineProperty(t,n,{value:l,enumerable:!0,configurable:!0,writable:!0}):t[n]=l,t}function _get_prototype_of$3(t){return(_get_prototype_of$3=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function _inherits$3(t,n){if("function"!=typeof n&&null!==n)throw TypeError("Super expression must either be null or a function");t.prototype=Object.create(n&&n.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),n&&_set_prototype_of$3(t,n)}function _possible_constructor_return$3(t,n){return n&&("object"===_type_of$3(n)||"function"==typeof n)?n:_assert_this_initialized$3(t)}function _set_prototype_of$3(t,n){return(_set_prototype_of$3=Object.setPrototypeOf||function(t,n){return t.__proto__=n,t})(t,n)}function _type_of$3(t){return t&&"undefined"!=typeof Symbol&&t.constructor===Symbol?"symbol":typeof t}function _is_native_reflect_construct$3(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}function _create_super$3(t){var n=_is_native_reflect_construct$3();return function(){var l,u=_get_prototype_of$3(t);if(n){var f=_get_prototype_of$3(this).constructor;l=Reflect.construct(u,arguments,f)}else l=u.apply(this,arguments);return _possible_constructor_return$3(this,l)}}var InstallModal=function(t){_inherits$3(l,t);var n=_create_super$3(l);function l(){var t;return _class_call_check$4(this,l),t=n.apply(this,arguments),_define_property$4(_assert_this_initialized$3(t),"state",{url:""}),_define_property$4(_assert_this_initialized$3(t),"styles",StyleSheet.createThemedStyleSheet({input:{height:40,borderBottomWidth:2,marginTop:10,borderBottomColor:Theme$1.colors.CONTROL_BRAND_FOREGROUND_NEW??Theme$1.colors.CONTROL_BRAND_FOREGROUND,color:Theme$1.colors.TEXT_NORMAL}})),t}return _create_class$4(l,[{key:"render",value:function(){return React.createElement(React.Fragment,null,React.createElement(ReactNative$1.TextInput,{style:this.styles.input,onChangeText:t=>this.setState({url:t}),value:this.state.url,placeholder:"https://example.com/",placeholderTextColor:Theme$1.unsafe_rawColors.PRIMARY_400,autoFocus:!0}))}},{key:"getInput",value:function(){return this.state.url}}]),l}(React.PureComponent),Managers=Object.freeze({__proto__:null,plugins:Plugins$2,themes:Themes$3}),debug={name:"debug",description:"Prints out information to help debug unbound.",execute:()=>{var t=[],n=HermesInternal.getRuntimeProperties();return t.push("**Debug Info:**\n"),t.push(`> **Unbound:** ${window.unbound.version}`),t.push(`> **Loader:** ${window.loader?.version??"N/A"} (${window.loader?.type??"N/A"})`),t.push(`> **Discord:** ${BundleInfo.Version} (Build ${BundleInfo.Build} on ${BundleInfo.ReleaseChannel})`),t.push(`> **Hermes:** ${n["OSS Release Version"]}`),t.push(`> **Bytecode:** ${n["Bytecode Version"]}`),t.push(`> **Device:** ${DeviceInfo.device} (${DeviceInfo.systemVersion})`),{content:t.join("\n")}}},CoreCommands=[debug],Patcher$1=createPatcher("unbound-commands"),Logger$4=createLogger("Commands");!function(t){t[t.CHAT=1]="CHAT",t[t.USER=2]="USER",t[t.MESSAGE=3]="MESSAGE"}(ApplicationCommandType||(ApplicationCommandType={})),function(t){t[t.BUILT_IN=0]="BUILT_IN",t[t.BUILT_IN_TEXT=1]="BUILT_IN_TEXT",t[t.BUILT_IN_INTEGRATION=2]="BUILT_IN_INTEGRATION",t[t.BOT=3]="BOT",t[t.PLACEHOLDER=4]="PLACEHOLDER"}(ApplicationCommandInputType||(ApplicationCommandInputType={})),function(t){t[t.SUB_COMMAND=1]="SUB_COMMAND",t[t.SUB_COMMAND_GROUP=2]="SUB_COMMAND_GROUP",t[t.STRING=3]="STRING",t[t.INTEGER=4]="INTEGER",t[t.BOOLEAN=5]="BOOLEAN",t[t.USER=6]="USER",t[t.CHANNEL=7]="CHANNEL",t[t.ROLE=8]="ROLE",t[t.MENTIONABLE=9]="MENTIONABLE",t[t.NUMBER=10]="NUMBER",t[t.ATTACHMENT=11]="ATTACHMENT"}(ApplicationCommandOptionType||(ApplicationCommandOptionType={}));var[Commands,Assets,SearchStore]=bulk({filter:Filters.byProps("getBuiltInCommands")},{filter:Filters.byProps("getApplicationIconURL")},{filter:t=>t.default?.getQueryCommands&&t.useDiscoveryState}),data={commands:[],section:{id:"unbound",type:1,name:"Unbound",icon:"https://files.unbound.app/icon.png"}};function registerCommands(t,n){if(t&&"string"==typeof t){if(!n||!Array.isArray(n))throw TypeError("second argument cmds must be of type array")}else throw TypeError("first argument caller must be of type string");for(var l in n){var u=n[l];n[l]={displayName:u.name,displayDescription:u.description,type:2,inputType:1,id:`unbound-${u.name.replaceAll(" ","-")}`,applicationId:data.section.id,...u,__UNBOUND__:!0,caller:t}}data.commands.push(...n)}function unregisterCommands(t){if(!t||"string"!=typeof t)throw TypeError("first argument caller must be of type string");data.commands=data.commands.filter(n=>n.caller!==t)}function initialize$2(){Commands.BUILT_IN_SECTIONS.unbound=data.section,registerCommands("unbound",CoreCommands);try{Patcher$1.after(SearchStore.default,"getQueryCommands",(t,[,,n],l)=>{var u=function(t){if(!~t.name?.indexOf(n)||l.some(n=>n.__unbound&&n.id===t.id))return"continue";try{l.unshift(t)}catch{l=[...l,t]}};if(!(!n||n.startsWith("/")))for(var f of(l??=[],data.commands))u(f)})}catch{Logger$4.error("Patching getQueryCommands failed.")}try{Patcher$1.instead(SearchStore.default,"getApplicationSections",(t,n,l)=>{try{var u=l.apply(self,n)??[];return!u.find(t=>t.id===data.section.id)&&data.commands.length&&u.push(data.section),u}catch{return[]}})}catch{Logger$4.error("Patching getApplicationSections failed.")}try{Patcher$1.after(SearchStore,"useDiscoveryState",(t,[,n],l)=>{if(1===n){if(l.sectionDescriptors?.find?.(t=>t.id===data.section.id)||(l.sectionDescriptors??=[],l.sectionDescriptors.push(data.section)),l.filteredSectionId&&l.filteredSectionId!==data.section.id||l.activeSections.find(t=>t.id===data.section.id)||l.activeSections.push(data.section),data.commands.some(t=>!l.commands?.find?.(n=>n.id===t.id))){l.commands??=[];var u=[...l.commands,...data.commands];l.commands=[...new Set(u).values()]}l.filteredSectionId&&l.filteredSectionId!==data.section.id||l.commandsByActiveSection.find(t=>t.section.id===data.section.id)||l.commandsByActiveSection.push({section:data.section,data:data.commands});var f=l.commandsByActiveSection.find(t=>t.section.id===data.section.id);(!l.filteredSectionId||l.filteredSectionId===data.section.id)&&f&&0===f.data.length&&0!==data.commands.length&&(f.data=data.commands);var d=l.sectionDescriptors.filter(t=>"-1"===t.id);d.length>1&&(l.sectionDescriptors=l.sectionDescriptors.filter(t=>"-1"!==t.id),l.sectionDescriptors.push(d.find(t=>"-1"===t.id)))}})}catch{Logger$4.error("Patching useDiscoveryState failed.")}try{Patcher$1.after(Assets,"getApplicationIconURL",(t,[n],l)=>{if("unbound"===n.id)return data.section.icon})}catch{Logger$4.error("Patching getApplicationIconURL failed.")}}try{initialize$2()}catch(e){Logger$4.error("Failed to initialize commands:",e.message)}var commands=Object.freeze({__proto__:null,get ApplicationCommandInputType(){return ApplicationCommandInputType},get ApplicationCommandOptionType(){return ApplicationCommandOptionType},get ApplicationCommandType(){return ApplicationCommandType},data:data,registerCommands:registerCommands,unregisterCommands:unregisterCommands});function asyncGeneratorStep$3(t,n,l,u,f,d,h){try{var g=t[d](h),y=g.value}catch(t){l(t);return}g.done?n(y):Promise.resolve(y).then(u,f)}function _async_to_generator$3(t){return function(){var n=this,l=arguments;return new Promise(function(u,f){var d=t.apply(n,l);function h(t){asyncGeneratorStep$3(d,u,f,h,g,"next",t)}function g(t){asyncGeneratorStep$3(d,u,f,h,g,"throw",t)}h(void 0)})}}function showConfirmationAlert(t){var n=t;return"string"==typeof t.content||Array.isArray(t.content)?n.body=t.content:n.children=t.content,delete n.content,Dialog.confirm(n)}var showCustomAlert=(t,n)=>Dialog.openLazy({importer:_async_to_generator$3(function*(){return React.createElement(t,n)})}),dialogs={showCustomAlert,showConfirmationAlert},dialogs$1=Object.freeze({__proto__:null,default:dialogs,showConfirmationAlert:showConfirmationAlert,showCustomAlert:showCustomAlert}),[store,useStore]=createStore({toasts:{}});function addToast(t){return t.id||(t.id=uuid()),t.date||(t.date=Date.now()),store.setState(n=>({toasts:{...n.toasts,[t.id]:t}})),t.id}var styles$1=StyleSheet.createThemedStyleSheet({main:{backgroundColor:Theme$1.colors.BACKGROUND_TERTIARY,marginHorizontal:100,alignItems:"center",justifyContent:"center",alignContent:"center",flexDirection:"row",alignSelf:"center",borderRadius:25,height:55,width:200,padding:20,position:"relative",zIndex:9999999999999,...Theme$1.shadows.SHADOW_BORDER},text:{color:Theme$1.colors.TEXT_NORMAL},container:{position:"absolute",padding:10,borderRadius:18,borderWidth:1,flexDirection:"row",alignItems:"center",alignSelf:"center",top:50}});function Toast(t){var n=Reanimated.useSharedValue(50),l=Reanimated.useAnimatedStyle(()=>({width:Reanimated.withTiming(n.value,{duration:2e3,easing:Reanimated.Easing.bezier(.25,.1,.25,1)})}));return React$1.createElement(Animated.View,{style:[styles$1.main,styles$1.container,l]},React$1.createElement(ReactNative$1.Button,{onPress:()=>n.value=300*Math.random(),title:"Hey"}))}function ToastContainer(){var{toasts:t}=useStore();return React$1.createElement(ReactNative.View,null,Object.values(t).reverse().map(t=>React$1.createElement(Toast,t)))}var Patcher=createPatcher("toasts"),Logger$3=createLogger("Toasts");function showToast(t){addToast(t)}try{var Container=find$1(t=>t.type?.name==="ToastContainer");Patcher.after(Container,"type",(t,n,l)=>useSettingsStore("unbound").get("toasts.enabled",!0)?React.createElement(React.Fragment,null,l,React.createElement(ToastContainer,null)):l)}catch(e){Logger$3.error("Failed to patch ToastContainer:",e.message)}var toasts={showToast},toasts$1=Object.freeze({__proto__:null,default:toasts,showToast:showToast}),UNBOUND_ADDON_FAILED="Failed to load addon: {error}",UNBOUND_ADDON_NO_DESCRIPTION="No description provided.",UNBOUND_ADDONS_EMPTY="You haven't installed any {type} yet.\nLook for what's shiny and come back here to try it out!",UNBOUND_ASSET_BROWSER="Asset Browser",UNBOUND_CHANGE_RESTART_DESC="This change requires a restart to apply. Would you like to restart?",UNBOUND_CHANGE_RESTART="Restart Required",UNBOUND_DEBUG_BRIDGE_DESC="Automatically connects to a specified remote debug bridge to allow for code evaluation.",UNBOUND_DEBUG_BRIDGE_IP="Debug IP",UNBOUND_DEBUG_BRIDGE="Debug Bridge",UNBOUND_DEBUG_LOGS="Debug Logs",UNBOUND_DEVELOPMENT_SETTINGS="Development Settings",UNBOUND_ENABLED="Enabled",UNBOUND_ERROR_BOUNDARY_DESC="Crash recovery module. Do not disable if you are a consumer.",UNBOUND_ERROR_BOUNDARY="Error Boundary",UNBOUND_GENERAL="General",UNBOUND_INSTALL_TITLE="Install {type}",UNBOUND_INSTALL="Install",UNBOUND_LOADER_CUSTOM_BUNDLE="Custom Bundle URL",UNBOUND_LOADER_DEVTOOLS_DESC="Enables remote developer tools that can be accessed from a desktop.",UNBOUND_LOADER_DEVTOOLS="React DevTools",UNBOUND_LOADER_ENABLED_DESC="Handles the loading of Unbound. You will need to edit the configuration file to enable the loader again.",UNBOUND_LOADER_UPDATER_FORCE_DESC="Always fetches and uses the latest bundle available at the provided bundle URL.",UNBOUND_LOADER_UPDATER_FORCE="Force Update",UNBOUND_LOADER="Loader",UNBOUND_MISC="Misc",UNBOUND_MODULE_SETTINGS="Module Settings",UNBOUND_PLUGINS="Plugins",UNBOUND_RECOVERY_MODE_DESC="Avoids loading addons to prevent crashing.",UNBOUND_RECOVERY_MODE_ENABLED="Recovery mode is enabled, all addons have been disabled to aid you in the diagnosis of issues.",UNBOUND_RECOVERY_MODE="Recovery Mode",UNBOUND_RESTART="Restart",UNBOUND_SEARCH_ASSETS="Search assets...",UNBOUND_SEARCH_PLUGINS="Search plugins...",UNBOUND_SEARCH_THEMES="Search themes...",UNBOUND_INFO="Info",UNBOUND_THEME_EDITOR="Theme Editor",UNBOUND_THEME_GET_DESC="Would you like to create a theme, or import one?",UNBOUND_THEME_GET_OPTION_CREATE="Create",UNBOUND_THEME_GET_OPTION_IMPORT="Import",UNBOUND_THEMES="Themes",UNBOUND_TOAST_DURATION_DESC="This is the default duration that a toast will show for. If an addon developer provides their own duration while showing a toast, that will be used instead.",UNBOUND_TOAST_DURATION="Toast Duration",UNBOUND_TOAST_SETTINGS="Toast Settings",UNBOUND_TOASTS_ANIMATIONS_DESC="You may choose to disable animations for toasts shown by addons.",UNBOUND_TOASTS_ANIMATIONS="Animations",UNBOUND_TOASTS_DESC="This controls whether you would like to see toasts from addons. Keep in mind, this will not hide Discord's toasts.",UNBOUND_UNINSTALL_ADDON_DESC="Are you sure you want to uninstall **{name}**? This action is irreversible.",UNBOUND_UNINSTALL_ADDON="Uninstall {type}",UNBOUND_UNINSTALL="Uninstall",UNBOUND_UPDATER="Updater",enUS={UNBOUND_ADDON_FAILED:UNBOUND_ADDON_FAILED,UNBOUND_ADDON_NO_DESCRIPTION:UNBOUND_ADDON_NO_DESCRIPTION,UNBOUND_ADDONS_EMPTY:UNBOUND_ADDONS_EMPTY,UNBOUND_ASSET_BROWSER:UNBOUND_ASSET_BROWSER,UNBOUND_CHANGE_RESTART_DESC:UNBOUND_CHANGE_RESTART_DESC,UNBOUND_CHANGE_RESTART:UNBOUND_CHANGE_RESTART,UNBOUND_DEBUG_BRIDGE_DESC:UNBOUND_DEBUG_BRIDGE_DESC,UNBOUND_DEBUG_BRIDGE_IP:UNBOUND_DEBUG_BRIDGE_IP,UNBOUND_DEBUG_BRIDGE:UNBOUND_DEBUG_BRIDGE,UNBOUND_DEBUG_LOGS:UNBOUND_DEBUG_LOGS,UNBOUND_DEVELOPMENT_SETTINGS:UNBOUND_DEVELOPMENT_SETTINGS,UNBOUND_ENABLED:UNBOUND_ENABLED,UNBOUND_ERROR_BOUNDARY_DESC:UNBOUND_ERROR_BOUNDARY_DESC,UNBOUND_ERROR_BOUNDARY:UNBOUND_ERROR_BOUNDARY,UNBOUND_GENERAL:UNBOUND_GENERAL,UNBOUND_INSTALL_TITLE:UNBOUND_INSTALL_TITLE,UNBOUND_INSTALL:UNBOUND_INSTALL,UNBOUND_LOADER_CUSTOM_BUNDLE:UNBOUND_LOADER_CUSTOM_BUNDLE,UNBOUND_LOADER_DEVTOOLS_DESC:UNBOUND_LOADER_DEVTOOLS_DESC,UNBOUND_LOADER_DEVTOOLS:UNBOUND_LOADER_DEVTOOLS,UNBOUND_LOADER_ENABLED_DESC:UNBOUND_LOADER_ENABLED_DESC,UNBOUND_LOADER_UPDATER_FORCE_DESC:UNBOUND_LOADER_UPDATER_FORCE_DESC,UNBOUND_LOADER_UPDATER_FORCE:UNBOUND_LOADER_UPDATER_FORCE,UNBOUND_LOADER:UNBOUND_LOADER,UNBOUND_MISC:UNBOUND_MISC,UNBOUND_MODULE_SETTINGS:UNBOUND_MODULE_SETTINGS,UNBOUND_PLUGINS:UNBOUND_PLUGINS,UNBOUND_RECOVERY_MODE_DESC:UNBOUND_RECOVERY_MODE_DESC,UNBOUND_RECOVERY_MODE_ENABLED:UNBOUND_RECOVERY_MODE_ENABLED,UNBOUND_RECOVERY_MODE:UNBOUND_RECOVERY_MODE,UNBOUND_RESTART:UNBOUND_RESTART,UNBOUND_SEARCH_ASSETS:UNBOUND_SEARCH_ASSETS,UNBOUND_SEARCH_PLUGINS:UNBOUND_SEARCH_PLUGINS,UNBOUND_SEARCH_THEMES:UNBOUND_SEARCH_THEMES,UNBOUND_INFO:UNBOUND_INFO,UNBOUND_THEME_EDITOR:UNBOUND_THEME_EDITOR,UNBOUND_THEME_GET_DESC:UNBOUND_THEME_GET_DESC,UNBOUND_THEME_GET_OPTION_CREATE:UNBOUND_THEME_GET_OPTION_CREATE,UNBOUND_THEME_GET_OPTION_IMPORT:UNBOUND_THEME_GET_OPTION_IMPORT,UNBOUND_THEMES:UNBOUND_THEMES,UNBOUND_TOAST_DURATION_DESC:UNBOUND_TOAST_DURATION_DESC,UNBOUND_TOAST_DURATION:UNBOUND_TOAST_DURATION,UNBOUND_TOAST_SETTINGS:UNBOUND_TOAST_SETTINGS,UNBOUND_TOASTS_ANIMATIONS_DESC:UNBOUND_TOASTS_ANIMATIONS_DESC,UNBOUND_TOASTS_ANIMATIONS:UNBOUND_TOASTS_ANIMATIONS,UNBOUND_TOASTS_DESC:UNBOUND_TOASTS_DESC,UNBOUND_UNINSTALL_ADDON_DESC:UNBOUND_UNINSTALL_ADDON_DESC,UNBOUND_UNINSTALL_ADDON:UNBOUND_UNINSTALL_ADDON,UNBOUND_UNINSTALL:UNBOUND_UNINSTALL,UNBOUND_UPDATER:UNBOUND_UPDATER},enGB={},Strings={"en-US":enUS,"en-GB":enGB};function asyncGeneratorStep$2(t,n,l,u,f,d,h){try{var g=t[d](h),y=g.value}catch(t){l(t);return}g.done?n(y):Promise.resolve(y).then(u,f)}function _async_to_generator$2(t){return function(){var n=this,l=arguments;return new Promise(function(u,f){var d=t.apply(n,l);function h(t){asyncGeneratorStep$2(d,u,f,h,g,"next",t)}function g(t){asyncGeneratorStep$2(d,u,f,h,g,"throw",t)}h(void 0)})}}var Logger$2=createLogger("Components"),state={locale:"en-US",messages:{}};function initialize$1(){state.locale=i18n$1.getLocale()??"en-US",i18n$1.on("locale",onChange),add(Strings)}function add(t){if("object"!=typeof t||Array.isArray(t))throw Error("Locale strings must be an object with languages and strings.");for(var n in t)addStrings(n,t[n]);return{remove:()=>{var n=i18n$1._provider._context;for(var l in t)for(var u of Object.keys(t[l]))delete n.defaultMessages[u],delete n.messages[u],delete i18n$1.Messages[u]}}}function addStrings(t,n){state.locale&&(state.messages[t]??={},Object.assign(state.messages[t],n),i18n$1.loadPromise.then(inject))}function inject(){if(state.locale&&i18n$1?.getLocale){var t=i18n$1._provider._context;Object.assign(t.messages,state.messages[state.locale]??{}),Object.assign(t.defaultMessages,state.messages["en-US"]??{})}}function onChange(t){return _onChange.apply(this,arguments)}function _onChange(){return(_onChange=_async_to_generator$2(function*(t){state.locale=t,yield i18n$1.loadPromise,inject()})).apply(this,arguments)}try{initialize$1()}catch(e){Logger$2.error("Failed to initialize i18n:",e.message)}var i18n=Object.freeze({__proto__:null,add:add,state:state}),AsyncUsers=findByProps("fetchProfile",{lazy:!0}),API$1=Object.freeze({__proto__:null,AsyncUsers:AsyncUsers}),metro=Object.assign(Modules,{components:Components,filters:Filters,actions:Actions,common:Common,stores:Stores,api:API$1,ui:UI}),API=Object.freeze({__proto__:null,assets:assets$1,commands:commands,components:components,dialogs:dialogs$1,i18n:i18n,managers:Managers,metro:metro,native:native,patcher:patcher,storage:storage,toasts:toasts$1,utilities:index$3});function _assert_this_initialized$2(t){if(void 0===t)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function asyncGeneratorStep$1(t,n,l,u,f,d,h){try{var g=t[d](h),y=g.value}catch(t){l(t);return}g.done?n(y):Promise.resolve(y).then(u,f)}function _async_to_generator$1(t){return function(){var n=this,l=arguments;return new Promise(function(u,f){var d=t.apply(n,l);function h(t){asyncGeneratorStep$1(d,u,f,h,g,"next",t)}function g(t){asyncGeneratorStep$1(d,u,f,h,g,"throw",t)}h(void 0)})}}function _class_call_check$3(t,n){if(!(t instanceof n))throw TypeError("Cannot call a class as a function")}function _defineProperties$3(t,n){for(var l=0;l<n.length;l++){var u=n[l];u.enumerable=u.enumerable||!1,u.configurable=!0,"value"in u&&(u.writable=!0),Object.defineProperty(t,u.key,u)}}function _create_class$3(t,n,l){return n&&_defineProperties$3(t.prototype,n),l&&_defineProperties$3(t,l),t}function _define_property$3(t,n,l){return n in t?Object.defineProperty(t,n,{value:l,enumerable:!0,configurable:!0,writable:!0}):t[n]=l,t}function _get_prototype_of$2(t){return(_get_prototype_of$2=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function _inherits$2(t,n){if("function"!=typeof n&&null!==n)throw TypeError("Super expression must either be null or a function");t.prototype=Object.create(n&&n.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),n&&_set_prototype_of$2(t,n)}function _possible_constructor_return$2(t,n){return n&&("object"===_type_of$2(n)||"function"==typeof n)?n:_assert_this_initialized$2(t)}function _set_prototype_of$2(t,n){return(_set_prototype_of$2=Object.setPrototypeOf||function(t,n){return t.__proto__=n,t})(t,n)}function _type_of$2(t){return t&&"undefined"!=typeof Symbol&&t.constructor===Symbol?"symbol":typeof t}function _is_native_reflect_construct$2(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}function _create_super$2(t){var n=_is_native_reflect_construct$2();return function(){var l,u=_get_prototype_of$2(t);if(n){var f=_get_prototype_of$2(this).constructor;l=Reflect.construct(u,arguments,f)}else l=u.apply(this,arguments);return _possible_constructor_return$2(this,l)}}var _class=function(t){_inherits$2(l,t);var n=_create_super$2(l);function l(){var t;return _class_call_check$3(this,l),t=n.apply(this,arguments),_define_property$3(_assert_this_initialized$2(t),"styles",StyleSheet.createThemedStyleSheet({card:{backgroundColor:Theme$1.colors.BACKGROUND_SECONDARY,marginHorizontal:10,borderRadius:5,marginTop:10},failed:{opacity:.5},error:{color:"red",marginTop:10},header:{backgroundColor:Theme$1.colors.BACKGROUND_TERTIARY,borderTopRightRadius:5,borderTopLeftRadius:5,paddingHorizontal:15,flexDirection:"row",alignItems:"center",padding:10,flex:1},name:{color:Theme$1.colors.TEXT_NORMAL,fontFamily:Constants.Fonts.PRIMARY_BOLD,marginRight:2.5,fontSize:16},version:{fontFamily:Constants.Fonts.PRIMARY_SEMIBOLD,color:Theme$1.colors.TEXT_MUTED,marginRight:2.5,fontSize:14},by:{fontFamily:Constants.Fonts.PRIMARY_NORMAL,color:Theme$1.colors.TEXT_MUTED,marginRight:2.5,fontSize:14},authors:{fontFamily:Constants.Fonts.PRIMARY_SEMIBOLD,color:Theme$1.colors.TEXT_MUTED,fontSize:14,flex:1},authorContainer:{flexDirection:"row"},touchable:{color:Theme$1.colors.TEXT_NORMAL},info:{padding:15},description:{fontFamily:Constants.Fonts.PRIMARY_SEMIBOLD,color:Theme$1.colors.TEXT_NORMAL,fontSize:14},recovery:{opacity:.5,pointerEvents:"none"},controlButton:{marginRight:ReactNative.Platform.select({android:2.5,ios:10})},icon:{width:22,height:22,tintColor:Theme$1.colors.INTERACTIVE_NORMAL}})),t}return _create_class$3(l,[{key:"render",value:function(){var{addon:t,recovery:n}=this.props;return React$1.createElement(ReactNative$1.View,{style:mergeStyles(this.styles.card,t.failed&&this.styles.failed,n&&this.styles.recovery)},React$1.createElement(ReactNative$1.View,{style:this.styles.header},this.renderMetadata(),this.renderAuthors(),this.renderControls()),React$1.createElement(ReactNative$1.View,{style:this.styles.info},this.renderBody()))}},{key:"renderMetadata",value:function(){var{addon:t}=this.props;return React$1.createElement(React$1.Fragment,null,React$1.createElement(ReactNative$1.Text,{style:this.styles.name},t.data.name),React$1.createElement(ReactNative$1.Text,{style:this.styles.version},t.data.version??"?.?.?"))}},{key:"renderAuthors",value:function(){var{addon:t}=this.props;return React$1.createElement(React$1.Fragment,null,React$1.createElement(ReactNative$1.Text,{style:this.styles.by},"by"),React$1.createElement(ReactNative$1.FlatList,{data:t.data.authors??[{name:"???"}],horizontal:!0,style:{flex:1},keyExtractor:(t,n)=>String(n),renderItem:({item:n,index:l})=>{var u=l!==(t.data.authors?.length||1)-1&&React$1.createElement(ReactNative$1.Text,{style:this.styles.authors},", ");return n.name&&n.id?React$1.createElement(ReactNative$1.TouchableOpacity,{style:this.styles.authorContainer,onPress:this.onTapAuthor.bind(this,n)},React$1.createElement(ReactNative$1.Text,{style:mergeStyles(this.styles.authors,this.styles.touchable)},n.name),u):React$1.createElement(ReactNative$1.View,{style:this.styles.authorContainer},React$1.createElement(ReactNative$1.Text,{style:this.styles.authors},n.name??n),u)}}))}},{key:"renderControls",value:function(){var{addon:t,manager:n,shouldRestart:l,recovery:u}=this.props;return React$1.createElement(React$1.Fragment,null,n.type===ManagerType.Plugins&&t.instance?.settings&&React$1.createElement(ReactNative$1.Pressable,{style:({pressed:t})=>({opacity:t?.25:1,...this.styles.controlButton}),hitSlop:15,onPress:()=>{this.props.navigation.push(Keys.Custom,{title:t.data.name,render:t.instance.settings})}},React$1.createElement(ReactNative$1.Image,{source:Icons.settings,style:this.styles.icon})),React$1.createElement(ReactNative$1.Pressable,{style:({pressed:t})=>({opacity:t?.25:1,...this.styles.controlButton}),hitSlop:15,onPress:()=>{showConfirmationAlert({title:i18n$1.Messages.UNBOUND_UNINSTALL_ADDON.format({type:capitalize(n.type)}),content:i18n$1.Messages.UNBOUND_UNINSTALL_ADDON_DESC.format({name:t.data.name}),confirmText:i18n$1.Messages.UNBOUND_UNINSTALL,onConfirm:_async_to_generator$1(function*(){return yield n.delete(t.id)})})}},React$1.createElement(ReactNative$1.Image,{source:Icons.trash,style:this.styles.icon})),React$1.createElement(ReactNative$1.Switch,{disabled:t.failed||u,value:n.isEnabled(t.id),trackColor:{false:Theme$1.colors.BACKGROUND_FLOATING,true:Theme$1.colors.HEADER_PRIMARY},onChange:()=>{n.toggle(t.id),l&&showConfirmationAlert({title:i18n$1.Messages.UNBOUND_CHANGE_RESTART,content:i18n$1.Messages.UNBOUND_CHANGE_RESTART_DESC,confirmText:i18n$1.Messages.UNBOUND_RESTART,onConfirm:BundleManager.reload})}}))}},{key:"renderBody",value:function(){var{addon:t,manager:n}=this.props,l=n.errors.get(t.id??t.data.path);return React$1.createElement(React$1.Fragment,null,React$1.createElement(ReactNative$1.Text,{style:this.styles.description},t.data.description??i18n$1.Messages.UNBOUND_ADDON_NO_DESCRIPTION),t.failed&&React$1.createElement(ReactNative$1.Text,{style:mergeStyles(this.styles.description,this.styles.error)},i18n$1.Messages.UNBOUND_ADDON_FAILED.format({error:l.message})))}},{key:"onTapAuthor",value:function(t){return _async_to_generator$1(function*(){Users.getUser(t.id)||(yield AsyncUsers.fetchProfile(t.id)),Profiles.showUserProfile({userId:t.id})})()}}]),l}(React$1.Component),styles=StyleSheet.createThemedStyleSheet({root:{flex:1},recoveryContainer:{paddingHorizontal:10,marginBottom:10},empty:{justifyContent:"center",alignItems:"center",marginTop:"50%"},emptyImage:{marginBottom:10},emptyMessage:{color:Theme$1.colors.TEXT_MUTED,fontFamily:Constants.Fonts.PRIMARY_SEMIBOLD,textAlign:"center",paddingHorizontal:25}});function Addons({addons:t,type:n,shouldRestart:l}){var[u,f]=React$1.useState(""),d=useSettingsStore("unbound"),h=Navigation.useNavigation(),g=u?[]:t,y=d.get("recovery",!1);if(u)for(var E of t)(E.data.name.toLowerCase().includes(u)||E.data.description.toLowerCase().includes(u)||E.data.authors.some(t=>t.name.includes(u)))&&g.push(E);return React$1.createElement(ReactNative$1.SafeAreaView,{style:styles.root},React$1.createElement(ReactNative$1.View,{style:styles.root},React$1.createElement(Search,{placeholder:i18n$1.Messages[`UNBOUND_SEARCH_${n.toUpperCase()}`],onChangeText:t=>f(t),onClear:()=>f(""),value:u}),y&&React$1.createElement(ReactNative$1.View,{style:styles.recoveryContainer},React$1.createElement(HelpMessage,{messageType:0},i18n$1.Messages.UNBOUND_RECOVERY_MODE_ENABLED)),React$1.createElement(ReactNative$1.FlatList,{data:g,keyExtractor:(t,n)=>String(n),renderItem:t=>React$1.createElement(_class,{recovery:y,shouldRestart:l,manager:Managers[n],addon:t.item,navigation:h}),ListEmptyComponent:React$1.createElement(ReactNative$1.View,{style:styles.empty},React$1.createElement(ReactNative$1.Image,{style:styles.emptyImage,source:Icons.img_connection_empty_dark}),React$1.createElement(ReactNative$1.Text,{style:styles.emptyMessage},i18n$1.Messages.UNBOUND_ADDONS_EMPTY.format({type:Managers[n].name.toLowerCase()})))})))}var{colors:colors$1,meta:{resolveSemanticColor:resolveSemanticColor$1}}=Theme$1,Plugins=()=>{var t=Navigation.useNavigation(),n=Plugins$2.useEntities(),l=t.addListener("focus",()=>{l(),t.setOptions({title:n.length?`${i18n$1.Messages.UNBOUND_PLUGINS} - ${n.length}`:i18n$1.Messages.UNBOUND_PLUGINS,headerRight:()=>React$1.createElement(HeaderRight,null)})});return React$1.createElement(ReactNative$1.View,{style:{flex:1}},React$1.createElement(Addons,{type:"plugins",addons:n}))};function HeaderRight(){var t=React$1.useRef(),n=React$1.useCallback(()=>t.current?.getInput(),[t.current]);return React$1.createElement(ReactNative$1.Pressable,{hitSlop:25,style:({pressed:t})=>({opacity:t?.5:1,marginRight:16}),onPress:()=>{Dialog.confirm({title:i18n$1.Messages.UNBOUND_INSTALL_TITLE.format({type:"plugin"}),children:React$1.createElement(InstallModal,{manager:Plugins$2,ref:t}),confirmText:i18n$1.Messages.UNBOUND_INSTALL,onConfirm:()=>n()&&Plugins$2.install(n())})}},React$1.createElement(ReactNative$1.Image,{source:Icons.ic_add_circle,style:{tintColor:resolveSemanticColor$1(Theme.theme,colors$1.INTERACTIVE_NORMAL)}}))}var Editor=({initial:t})=>{var n=Navigation.useNavigation(),l=Object.keys(Theme$1.colors);return React$1.useEffect(()=>{n.setOptions({headerRight:()=>React$1.createElement(Add$1,null)})},[]),React$1.createElement(ReactNative$1.ScrollView,null,React$1.createElement(Forms.FormSection,{style:{flex:1}},l.map(t=>React$1.createElement(Forms.FormRow,{key:t,label:t.split("_").map(t=>capitalize(t.toLowerCase()))}))))};function Add$1(){return Navigation.useNavigation(),React$1.createElement(ReactNative$1.Pressable,{hitSlop:25,style:({pressed:t})=>({opacity:t?.5:1,marginRight:20}),onPress:()=>{}},React$1.createElement(ReactNative$1.Image,{source:Icons.ic_add_circle}))}var{colors,meta:{resolveSemanticColor}}=Theme$1,Themes=()=>{var t=Navigation.useNavigation(),n=Themes$3.useEntities(),l=t.addListener("focus",()=>{l(),t.setOptions({title:n.length?`${i18n$1.Messages.UNBOUND_THEMES} - ${n.length}`:i18n$1.Messages.UNBOUND_THEMES,headerRight:()=>React$1.createElement(Add,null)})});return React$1.createElement(ReactNative$1.View,{style:{flex:1}},React$1.createElement(Addons,{shouldRestart:!0,type:"themes",addons:n}))};function Add(){var t=Navigation.useNavigation(),n=React$1.useRef(),l=React$1.useCallback(()=>n.current?.getInput(),[n.current]);return React$1.createElement(ReactNative$1.Pressable,{hitSlop:25,style:({pressed:t})=>({opacity:t?.5:1,marginRight:16,tintColor:colors.INTERACTIVE_NORMAL}),onPress:()=>{Dialog.confirm({title:i18n$1.Messages.UNBOUND_INSTALL_TITLE.format({type:"theme"}),confirmText:i18n$1.Messages.UNBOUND_THEME_GET_OPTION_CREATE,cancelText:i18n$1.Messages.UNBOUND_THEME_GET_OPTION_IMPORT,body:i18n$1.Messages.UNBOUND_THEME_GET_DESC,onConfirm:()=>{t.push(Keys.Custom,{title:i18n$1.Messages.UNBOUND_THEME_EDITOR,render:()=>Editor})},onCancel:()=>{Dialog.confirm({title:i18n$1.Messages.UNBOUND_INSTALL_TITLE.format({type:"theme"}),children:React$1.createElement(InstallModal,{manager:Themes$3,ref:n}),confirmText:i18n$1.Messages.UNBOUND_INSTALL,onConfirm:()=>l()&&Themes$3.install(l())})}})}},React$1.createElement(ReactNative$1.Image,{source:Icons.ic_add_circle,style:{tintColor:resolveSemanticColor(Theme.theme,colors.INTERACTIVE_NORMAL)}}))}function _class_call_check$2(t,n){if(!(t instanceof n))throw TypeError("Cannot call a class as a function")}function _defineProperties$2(t,n){for(var l=0;l<n.length;l++){var u=n[l];u.enumerable=u.enumerable||!1,u.configurable=!0,"value"in u&&(u.writable=!0),Object.defineProperty(t,u.key,u)}}function _create_class$2(t,n,l){return n&&_defineProperties$2(t.prototype,n),l&&_defineProperties$2(t,l),t}function _define_property$2(t,n,l){return n in t?Object.defineProperty(t,n,{value:l,enumerable:!0,configurable:!0,writable:!0}):t[n]=l,t}var Settings=function(){function t(n){_class_call_check$2(this,t),_define_property$2(this,"patcher",void 0),_define_property$2(this,"Titles",{get General(){return i18n$1.Messages.SETTINGS},get Plugins(){return i18n$1.Messages.UNBOUND_PLUGINS},get Themes(){return i18n$1.Messages.UNBOUND_THEMES},get Updater(){return i18n$1.Messages.UNBOUND_UPDATER},get Custom(){return"Page"}}),_define_property$2(this,"Icons",{General:null,Plugins:null,Themes:null,Updater:null,Custom:null}),_define_property$2(this,"Breadcrumbs",{General:[ClientName],Plugins:[ClientName],Themes:[ClientName],Updater:[ClientName],Custom:[]}),_define_property$2(this,"Relationships",{General:null,Plugins:Keys.General,Themes:Keys.General,Updater:Keys.General,Custom:null}),_define_property$2(this,"Mappables",{General:!0,Plugins:!0,Themes:!0,Updater:!0,Custom:!1}),_define_property$2(this,"Screens",{General,Plugins,Themes,Updater:()=>null,Custom:({title:t,render:n,...l})=>{var u=Navigation.useNavigation(),f=u.addListener("focus",()=>{f(),u.setOptions({title:t})});return React.createElement(n,l)}}),this.patcher=createPatcher(`${n}-settings`)}return _create_class$2(t,[{key:"apply",value:function(){return null}},{key:"remove",value:function(){return null}}]),t}();function _assert_this_initialized$1(t){if(void 0===t)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function _class_call_check$1(t,n){if(!(t instanceof n))throw TypeError("Cannot call a class as a function")}function _defineProperties$1(t,n){for(var l=0;l<n.length;l++){var u=n[l];u.enumerable=u.enumerable||!1,u.configurable=!0,"value"in u&&(u.writable=!0),Object.defineProperty(t,u.key,u)}}function _create_class$1(t,n,l){return n&&_defineProperties$1(t.prototype,n),l&&_defineProperties$1(t,l),t}function _define_property$1(t,n,l){return n in t?Object.defineProperty(t,n,{value:l,enumerable:!0,configurable:!0,writable:!0}):t[n]=l,t}function _get_prototype_of$1(t){return(_get_prototype_of$1=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function _inherits$1(t,n){if("function"!=typeof n&&null!==n)throw TypeError("Super expression must either be null or a function");t.prototype=Object.create(n&&n.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),n&&_set_prototype_of$1(t,n)}function _possible_constructor_return$1(t,n){return n&&("object"===_type_of$1(n)||"function"==typeof n)?n:_assert_this_initialized$1(t)}function _set_prototype_of$1(t,n){return(_set_prototype_of$1=Object.setPrototypeOf||function(t,n){return t.__proto__=n,t})(t,n)}function _type_of$1(t){return t&&"undefined"!=typeof Symbol&&t.constructor===Symbol?"symbol":typeof t}function _is_native_reflect_construct$1(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}function _create_super$1(t){var n=_is_native_reflect_construct$1();return function(){var l,u=_get_prototype_of$1(t);if(n){var f=_get_prototype_of$1(this).constructor;l=Reflect.construct(u,arguments,f)}else l=u.apply(this,arguments);return _possible_constructor_return$1(this,l)}}var PanelsSettings$1=function(t){_inherits$1(l,t);var n=_create_super$1(l);function l(){_class_call_check$1(this,l),_define_property$1(_assert_this_initialized$1(t=n.call(this,"panels")),"Settings",void 0),_define_property$1(_assert_this_initialized$1(t),"Scenes",void 0),_define_property$1(_assert_this_initialized$1(t),"Icons",{General:()=>React.createElement(Forms.FormRow.Icon,{source:Icons.settings}),Plugins:()=>React.createElement(puzzle,{height:24,width:24}),Themes:()=>React.createElement(palette,{height:24,width:24}),Updater:()=>React.createElement(Forms.FormRow.Icon,{source:Icons.ic_download_24px}),Custom:()=>null});var t,[u,f]=findByName({params:["UserSettingsOverviewWrapper"],interop:!1},{params:["getScreens"],interop:!1},{bulk:!0});return t.Settings=u,t.Scenes=f,t}return _create_class$1(l,[{key:"patchWrapper",value:function(){this.patcher.after(this.Settings,"default",(t,n,l)=>{var u=findInReactTree(l,t=>t.type?.name==="UserSettingsOverview");if(!u)return l;this.patchSettings(u)},!0)}},{key:"patchSettings",value:function(t){this.patcher.after(t.type.prototype,"render",(t,n,l)=>{var{navigation:u}=t.props,{children:f}=l.props,d=f.findIndex(t=>t?.props?.title===i18n$1.Messages.PREMIUM_SETTINGS_GENERIC);f.splice(d,0,React.createElement(React.Fragment,null,React.createElement(Forms.FormSection,{key:ClientName,title:ClientName},Object.keys(Keys).filter(t=>this.Mappables[t]).map((n,f,d)=>React.createElement(React.Fragment,null,React.createElement(Forms.FormRow,{label:this.Titles[n],leading:this.Icons[n],trailing:React.createElement(Forms.FormArrow,null),onPress:()=>u.push(Keys[n],{...t.props,...l.props})}),f<d.length-1&&React.createElement(Forms.FormDivider,null))))));var h=f.find(t=>t?.props.title===i18n$1.Messages.SUPPORT),g=h?.props.children;g&&(h.props.children=g.filter(t=>t?.type?.name!=="UploadLogsButton"))})}},{key:"patchScenes",value:function(){this.patcher.after(this.Scenes,"default",(t,n,l)=>({...l,...Object.keys(Keys).map(t=>({[Keys[t]]:{key:Keys[t],render:this.Screens[t],title:this.Titles[t]}})).reduce((t,n)=>({...t,...n}),{})}))}},{key:"apply",value:function(){this.patchWrapper(),this.patchScenes()}},{key:"remove",value:function(){this.patcher.unpatchAll()}}]),l}(Settings);function _assert_this_initialized(t){if(void 0===t)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function _class_call_check(t,n){if(!(t instanceof n))throw TypeError("Cannot call a class as a function")}function _defineProperties(t,n){for(var l=0;l<n.length;l++){var u=n[l];u.enumerable=u.enumerable||!1,u.configurable=!0,"value"in u&&(u.writable=!0),Object.defineProperty(t,u.key,u)}}function _create_class(t,n,l){return n&&_defineProperties(t.prototype,n),l&&_defineProperties(t,l),t}function _define_property(t,n,l){return n in t?Object.defineProperty(t,n,{value:l,enumerable:!0,configurable:!0,writable:!0}):t[n]=l,t}function _get_prototype_of(t){return(_get_prototype_of=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function _inherits(t,n){if("function"!=typeof n&&null!==n)throw TypeError("Super expression must either be null or a function");t.prototype=Object.create(n&&n.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),n&&_set_prototype_of(t,n)}function _possible_constructor_return(t,n){return n&&("object"===_type_of(n)||"function"==typeof n)?n:_assert_this_initialized(t)}function _set_prototype_of(t,n){return(_set_prototype_of=Object.setPrototypeOf||function(t,n){return t.__proto__=n,t})(t,n)}function _type_of(t){return t&&"undefined"!=typeof Symbol&&t.constructor===Symbol?"symbol":typeof t}function _is_native_reflect_construct(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}function _create_super(t){var n=_is_native_reflect_construct();return function(){var l,u=_get_prototype_of(t);if(n){var f=_get_prototype_of(this).constructor;l=Reflect.construct(u,arguments,f)}else l=u.apply(this,arguments);return _possible_constructor_return(this,l)}}var TabsSettings$1=function(t){_inherits(l,t);var n=_create_super(l);function l(){_class_call_check(this,l),_define_property(_assert_this_initialized(t=n.call(this,"tabs")),"Config",void 0),_define_property(_assert_this_initialized(t),"Settings",void 0),_define_property(_assert_this_initialized(t),"Icons",{General:Icons.settings,Plugins:Icons.ic_activity_24px,Themes:Icons.ic_paint_brush,Updater:Icons.ic_download_24px,Custom:null});var t,[u,f]=bulk({filter:byProps("SETTING_RENDERER_CONFIGS","SETTING_RELATIONSHIPS"),lazy:!0},{filter:byName("SettingsOverviewScreen"),interop:!1});return t.Config=u,t.Settings=f,t}return _create_class(l,[{key:"patchConstants",value:function(){this.Config._SETTING_RENDERER_CONFIGS={...this.Config.SETTING_RENDERER_CONFIGS},this.Config._SETTING_RELATIONSHIPS={...this.Config.SETTING_RELATIONSHIPS},Object.assign(this.Config.SETTING_RENDERER_CONFIGS,Object.keys(Keys).map(t=>({[Keys[t]]:{type:"route",icon:this.Icons[t],screen:{route:Keys[t],getComponent:()=>({route:n})=>{var l=this.Screens[t];return React.createElement(ReactNative.View,{style:{width:"100%",height:"100%",backgroundColor:Theme$1.meta.resolveSemanticColor(Theme.theme,Theme$1.colors.BACKGROUND_MOBILE_PRIMARY)}},React.createElement(l,n?.params??{}))}}}})).reduce((t,n)=>({...t,...n}),{})),Object.assign(this.Config.SETTING_RELATIONSHIPS,Object.keys(Keys).map(t=>({[Keys[t]]:this.Relationships[t]})).reduce((t,n)=>({...t,...n}),{}))}},{key:"patchSections",value:function(){this.patcher.after(this.Settings,"default",(t,n,l)=>{var{sections:u}=findInReactTree(l,t=>t.sections),f=u?.findIndex(t=>t.settings.find(t=>"ACCOUNT"===t));u.find(t=>t.title===ClientName)||u.splice(-1===f?1:f+1,0,{title:ClientName,settings:Object.keys(Keys).filter(t=>this.Mappables[t]).map(t=>Keys[t])});var d=u.find(t=>t.title===i18n$1.Messages.SUPPORT);d&&(d.settings=d.settings.filter(t=>"UPLOAD_DEBUG_LOGS"!==t))})}},{key:"patchSearch",value:function(){var[t,n]=findByProps({params:["useSettingSearch"]},{params:["getSettingSearchListItems"]},{bulk:!0});this.patcher.after(t,"useSettingSearch",(t,n,l)=>{l.results=l.results.filter(t=>!Object.values(Keys).includes(t)),Object.keys(Keys).filter(t=>this.Mappables[t]).forEach(t=>{[ClientName,this.Titles[t]].some(t=>t.toLowerCase().includes(l.text.toLowerCase()))&&!l.results.find(n=>n===Keys[t])&&l.results.unshift(Keys[t])})}),this.patcher.after(n,"getSettingSearchListItems",(t,[n],l)=>(l=l.filter(t=>!Object.values(Keys).includes(t.setting)),Object.keys(Keys).reverse().forEach(t=>{n.includes(Keys[t])&&(l.unshift({type:"setting_search_result",ancestorRendererData:this.Config.SETTING_RENDERER_CONFIGS[Keys[t]],setting:Keys[t],title:this.Titles[t],breadcrumbs:this.Breadcrumbs[t],icon:this.Icons[t]}),l.forEach((t,n,l)=>{t.index=n,t.total=l.length}))}),l))}},{key:"patchTitles",value:function(){this.patcher.after(this.Config,"getSettingTitleConfig",(t,n,l)=>({...l,...Object.keys(Keys).map(t=>({[Keys[t]]:this.Titles[t]})).reduce((t,n)=>({...t,...n}),{})}))}},{key:"apply",value:function(){this.patchConstants(),this.patchSections(),this.patchTitles(),this.patchSearch()}},{key:"remove",value:function(){this.patcher.unpatchAll(),this.Config.SETTING_RENDERER_CONFIGS={...this.Config._SETTING_RENDERER_CONFIGS},this.Config.SETTING_RELATIONSHIPS={...this.Config._SETTING_RELATIONSHIPS},delete this.Config._SETTING_RENDERER_CONFIGS,delete this.Config._SETTING_RELATIONSHIPS}}]),l}(Settings),PanelsSettings=new PanelsSettings$1,TabsSettings=new TabsSettings$1;function apply$2(){PanelsSettings.apply?.(),TabsSettings.apply?.()}function remove$2(){PanelsSettings.remove?.(),TabsSettings.remove?.()}var index$2=Object.freeze({__proto__:null,apply:apply$2,remove:remove$2});!function(t){t[t.error=3]="error",t[t.info=1]="info",t[t.log=1]="log",t[t.warn=2]="warn",t[t.trace=0]="trace",t[t.debug=0]="debug"}(Levels||(Levels={}));var methods=["error","info","log","warn","trace","debug"];function apply$1(){var t=function(t){console[t].__ORIGINAL__=console[t],console[t]=(...l)=>{for(var u=[],f=0,d=l.length;d>f;f++)u.push("string"==typeof l[f]?l[f]:n.inspect?.(l[f])??l[f].toString());var h=u.join(" ");addLog({message:h,level:Levels[t]}),nativeLoggingHook(h,Levels[t]??Levels.info)}},n=findByProps("inspect",{lazy:!0});for(var l of methods)t(l)}function remove$1(){for(var t of methods){var n=console[t].__ORIGINAL__;n&&(console[t]=n)}}var console$1=Object.freeze({__proto__:null,get Levels(){return Levels},apply:apply$1,remove:remove$1}),Patches$1=Object.freeze({__proto__:null,Console:console$1,Settings:index$2,ThemeFix:themeFix}),Logger$1=createLogger("Core","Patches");function apply(){for(var t in Patches$1){var n=Patches$1[t];try{n.apply?.()}catch(n){Logger$1.error(`Failed to apply ${t} patch:`,n.message)}}}function remove(){for(var t in Patches$1){var n=Patches$1[t];try{n.remove?.()}catch(n){Logger$1.error(`Failed to remove ${t} patch:`,n.message)}}}var Patches={apply,remove};function asyncGeneratorStep(t,n,l,u,f,d,h){try{var g=t[d](h),y=g.value}catch(t){l(t);return}g.done?n(y):Promise.resolve(y).then(u,f)}function _async_to_generator(t){return function(){var n=this,l=arguments;return new Promise(function(u,f){var d=t.apply(n,l);function h(t){asyncGeneratorStep(d,u,f,h,g,"next",t)}function g(t){asyncGeneratorStep(d,u,f,h,g,"throw",t)}h(void 0)})}}var Logger=createLogger("Core");function initialize(){return _initialize.apply(this,arguments)}function _initialize(){return(_initialize=_async_to_generator(function*(){try{Patches.apply()}catch(t){Logger.error("Failed to apply patches:",t.message)}try{BuiltIns.initialize()}catch(t){Logger.error("Failed to apply built-ins:",t.message)}return window.unbound=Object.assign(API,{version:"f8aa2f6"}),Plugins$2.initialize(),API})).apply(this,arguments)}function shutdown(){return _shutdown.apply(this,arguments)}function _shutdown(){return(_shutdown=_async_to_generator(function*(){for(var t in Patcher$6.unpatchAll(),Managers){var n=Managers[t];yield n.shutdown()}Patches.remove(),BuiltIns.shutdown(),delete window.unbound})).apply(this,arguments)}var index={initialize,shutdown},index$1=Object.freeze({__proto__:null,default:index,initialize:initialize,shutdown:shutdown})}();
